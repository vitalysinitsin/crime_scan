var My=Object.defineProperty;var Py=(r,e,t)=>e in r?My(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Bg=(r,e,t)=>Py(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function um(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Oc={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yg;function ky(){if(Yg)return Se;Yg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),_=Symbol.iterator;function y(R){return R===null||typeof R!="object"?null:(R=_&&R[_]||R["@@iterator"],typeof R=="function"?R:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,w={};function S(R,N,re){this.props=R,this.context=N,this.refs=w,this.updater=re||x}S.prototype.isReactComponent={},S.prototype.setState=function(R,N){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,N,"setState")},S.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function I(){}I.prototype=S.prototype;function T(R,N,re){this.props=R,this.context=N,this.refs=w,this.updater=re||x}var O=T.prototype=new I;O.constructor=T,v(O,S.prototype),O.isPureReactComponent=!0;var A=Array.isArray,P=Object.prototype.hasOwnProperty,j={current:null},Z={key:!0,ref:!0,__self:!0,__source:!0};function U(R,N,re){var z,ue={},he=null,me=null;if(N!=null)for(z in N.ref!==void 0&&(me=N.ref),N.key!==void 0&&(he=""+N.key),N)P.call(N,z)&&!Z.hasOwnProperty(z)&&(ue[z]=N[z]);var ve=arguments.length-2;if(ve===1)ue.children=re;else if(1<ve){for(var Ce=Array(ve),Ne=0;Ne<ve;Ne++)Ce[Ne]=arguments[Ne+2];ue.children=Ce}if(R&&R.defaultProps)for(z in ve=R.defaultProps,ve)ue[z]===void 0&&(ue[z]=ve[z]);return{$$typeof:r,type:R,key:he,ref:me,props:ue,_owner:j.current}}function X(R,N){return{$$typeof:r,type:R.type,key:N,ref:R.ref,props:R.props,_owner:R._owner}}function B(R){return typeof R=="object"&&R!==null&&R.$$typeof===r}function ie(R){var N={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(re){return N[re]})}var $=/\/+/g;function te(R,N){return typeof R=="object"&&R!==null&&R.key!=null?ie(""+R.key):N.toString(36)}function J(R,N,re,z,ue){var he=typeof R;(he==="undefined"||he==="boolean")&&(R=null);var me=!1;if(R===null)me=!0;else switch(he){case"string":case"number":me=!0;break;case"object":switch(R.$$typeof){case r:case e:me=!0}}if(me)return me=R,ue=ue(me),R=z===""?"."+te(me,0):z,A(ue)?(re="",R!=null&&(re=R.replace($,"$&/")+"/"),J(ue,N,re,"",function(Ne){return Ne})):ue!=null&&(B(ue)&&(ue=X(ue,re+(!ue.key||me&&me.key===ue.key?"":(""+ue.key).replace($,"$&/")+"/")+R)),N.push(ue)),1;if(me=0,z=z===""?".":z+":",A(R))for(var ve=0;ve<R.length;ve++){he=R[ve];var Ce=z+te(he,ve);me+=J(he,N,re,Ce,ue)}else if(Ce=y(R),typeof Ce=="function")for(R=Ce.call(R),ve=0;!(he=R.next()).done;)he=he.value,Ce=z+te(he,ve++),me+=J(he,N,re,Ce,ue);else if(he==="object")throw N=String(R),Error("Objects are not valid as a React child (found: "+(N==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":N)+"). If you meant to render a collection of children, use an array instead.");return me}function ee(R,N,re){if(R==null)return R;var z=[],ue=0;return J(R,z,"","",function(he){return N.call(re,he,ue++)}),z}function ne(R){if(R._status===-1){var N=R._result;N=N(),N.then(function(re){(R._status===0||R._status===-1)&&(R._status=1,R._result=re)},function(re){(R._status===0||R._status===-1)&&(R._status=2,R._result=re)}),R._status===-1&&(R._status=0,R._result=N)}if(R._status===1)return R._result.default;throw R._result}var K={current:null},b={transition:null},q={ReactCurrentDispatcher:K,ReactCurrentBatchConfig:b,ReactCurrentOwner:j};function G(){throw Error("act(...) is not supported in production builds of React.")}return Se.Children={map:ee,forEach:function(R,N,re){ee(R,function(){N.apply(this,arguments)},re)},count:function(R){var N=0;return ee(R,function(){N++}),N},toArray:function(R){return ee(R,function(N){return N})||[]},only:function(R){if(!B(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},Se.Component=S,Se.Fragment=t,Se.Profiler=o,Se.PureComponent=T,Se.StrictMode=i,Se.Suspense=d,Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,Se.act=G,Se.cloneElement=function(R,N,re){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var z=v({},R.props),ue=R.key,he=R.ref,me=R._owner;if(N!=null){if(N.ref!==void 0&&(he=N.ref,me=j.current),N.key!==void 0&&(ue=""+N.key),R.type&&R.type.defaultProps)var ve=R.type.defaultProps;for(Ce in N)P.call(N,Ce)&&!Z.hasOwnProperty(Ce)&&(z[Ce]=N[Ce]===void 0&&ve!==void 0?ve[Ce]:N[Ce])}var Ce=arguments.length-2;if(Ce===1)z.children=re;else if(1<Ce){ve=Array(Ce);for(var Ne=0;Ne<Ce;Ne++)ve[Ne]=arguments[Ne+2];z.children=ve}return{$$typeof:r,type:R.type,key:ue,ref:he,props:z,_owner:me}},Se.createContext=function(R){return R={$$typeof:u,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:l,_context:R},R.Consumer=R},Se.createElement=U,Se.createFactory=function(R){var N=U.bind(null,R);return N.type=R,N},Se.createRef=function(){return{current:null}},Se.forwardRef=function(R){return{$$typeof:c,render:R}},Se.isValidElement=B,Se.lazy=function(R){return{$$typeof:p,_payload:{_status:-1,_result:R},_init:ne}},Se.memo=function(R,N){return{$$typeof:g,type:R,compare:N===void 0?null:N}},Se.startTransition=function(R){var N=b.transition;b.transition={};try{R()}finally{b.transition=N}},Se.unstable_act=G,Se.useCallback=function(R,N){return K.current.useCallback(R,N)},Se.useContext=function(R){return K.current.useContext(R)},Se.useDebugValue=function(){},Se.useDeferredValue=function(R){return K.current.useDeferredValue(R)},Se.useEffect=function(R,N){return K.current.useEffect(R,N)},Se.useId=function(){return K.current.useId()},Se.useImperativeHandle=function(R,N,re){return K.current.useImperativeHandle(R,N,re)},Se.useInsertionEffect=function(R,N){return K.current.useInsertionEffect(R,N)},Se.useLayoutEffect=function(R,N){return K.current.useLayoutEffect(R,N)},Se.useMemo=function(R,N){return K.current.useMemo(R,N)},Se.useReducer=function(R,N,re){return K.current.useReducer(R,N,re)},Se.useRef=function(R){return K.current.useRef(R)},Se.useState=function(R){return K.current.useState(R)},Se.useSyncExternalStore=function(R,N,re){return K.current.useSyncExternalStore(R,N,re)},Se.useTransition=function(){return K.current.useTransition()},Se.version="18.3.1",Se}var Vg;function Ch(){return Vg||(Vg=1,Oc.exports=ky()),Oc.exports}var un=Ch();const ra=um(un);var sa={},Fc={exports:{}},Nt={},Nc={exports:{}},zc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kg;function Dy(){return Kg||(Kg=1,function(r){function e(b,q){var G=b.length;b.push(q);e:for(;0<G;){var R=G-1>>>1,N=b[R];if(0<o(N,q))b[R]=q,b[G]=N,G=R;else break e}}function t(b){return b.length===0?null:b[0]}function i(b){if(b.length===0)return null;var q=b[0],G=b.pop();if(G!==q){b[0]=G;e:for(var R=0,N=b.length,re=N>>>1;R<re;){var z=2*(R+1)-1,ue=b[z],he=z+1,me=b[he];if(0>o(ue,G))he<N&&0>o(me,ue)?(b[R]=me,b[he]=G,R=he):(b[R]=ue,b[z]=G,R=z);else if(he<N&&0>o(me,G))b[R]=me,b[he]=G,R=he;else break e}}return q}function o(b,q){var G=b.sortIndex-q.sortIndex;return G!==0?G:b.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var u=Date,c=u.now();r.unstable_now=function(){return u.now()-c}}var d=[],g=[],p=1,_=null,y=3,x=!1,v=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(b){for(var q=t(g);q!==null;){if(q.callback===null)i(g);else if(q.startTime<=b)i(g),q.sortIndex=q.expirationTime,e(d,q);else break;q=t(g)}}function A(b){if(w=!1,O(b),!v)if(t(d)!==null)v=!0,ne(P);else{var q=t(g);q!==null&&K(A,q.startTime-b)}}function P(b,q){v=!1,w&&(w=!1,I(U),U=-1),x=!0;var G=y;try{for(O(q),_=t(d);_!==null&&(!(_.expirationTime>q)||b&&!ie());){var R=_.callback;if(typeof R=="function"){_.callback=null,y=_.priorityLevel;var N=R(_.expirationTime<=q);q=r.unstable_now(),typeof N=="function"?_.callback=N:_===t(d)&&i(d),O(q)}else i(d);_=t(d)}if(_!==null)var re=!0;else{var z=t(g);z!==null&&K(A,z.startTime-q),re=!1}return re}finally{_=null,y=G,x=!1}}var j=!1,Z=null,U=-1,X=5,B=-1;function ie(){return!(r.unstable_now()-B<X)}function $(){if(Z!==null){var b=r.unstable_now();B=b;var q=!0;try{q=Z(!0,b)}finally{q?te():(j=!1,Z=null)}}else j=!1}var te;if(typeof T=="function")te=function(){T($)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ee=J.port2;J.port1.onmessage=$,te=function(){ee.postMessage(null)}}else te=function(){S($,0)};function ne(b){Z=b,j||(j=!0,te())}function K(b,q){U=S(function(){b(r.unstable_now())},q)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(b){b.callback=null},r.unstable_continueExecution=function(){v||x||(v=!0,ne(P))},r.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<b?Math.floor(1e3/b):5},r.unstable_getCurrentPriorityLevel=function(){return y},r.unstable_getFirstCallbackNode=function(){return t(d)},r.unstable_next=function(b){switch(y){case 1:case 2:case 3:var q=3;break;default:q=y}var G=y;y=q;try{return b()}finally{y=G}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(b,q){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var G=y;y=b;try{return q()}finally{y=G}},r.unstable_scheduleCallback=function(b,q,G){var R=r.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?R+G:R):G=R,b){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=G+N,b={id:p++,callback:q,priorityLevel:b,startTime:G,expirationTime:N,sortIndex:-1},G>R?(b.sortIndex=G,e(g,b),t(d)===null&&b===t(g)&&(w?(I(U),U=-1):w=!0,K(A,G-R))):(b.sortIndex=N,e(d,b),v||x||(v=!0,ne(P))),b},r.unstable_shouldYield=ie,r.unstable_wrapCallback=function(b){var q=y;return function(){var G=y;y=q;try{return b.apply(this,arguments)}finally{y=G}}}}(zc)),zc}var Zg;function Oy(){return Zg||(Zg=1,Nc.exports=Dy()),Nc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hg;function Fy(){if(Hg)return Nt;Hg=1;var r=Ch(),e=Oy();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){u(n,s),u(n+"Capture",s)}function u(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},_={};function y(n){return d.call(_,n)?!0:d.call(p,n)?!1:g.test(n)?_[n]=!0:(p[n]=!0,!1)}function x(n,s,a,h){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function v(n,s,a,h){if(s===null||typeof s>"u"||x(n,s,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function w(n,s,a,h,f,m,E){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=m,this.removeEmptyString=E}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){S[n]=new w(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];S[s]=new w(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){S[n]=new w(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){S[n]=new w(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){S[n]=new w(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){S[n]=new w(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){S[n]=new w(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){S[n]=new w(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){S[n]=new w(n,5,!1,n.toLowerCase(),null,!1,!1)});var I=/[\-:]([a-z])/g;function T(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(I,T);S[s]=new w(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(I,T);S[s]=new w(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(I,T);S[s]=new w(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){S[n]=new w(n,1,!1,n.toLowerCase(),null,!1,!1)}),S.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){S[n]=new w(n,1,!1,n.toLowerCase(),null,!0,!0)});function O(n,s,a,h){var f=S.hasOwnProperty(s)?S[s]:null;(f!==null?f.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(v(s,a,f,h)&&(a=null),h||f===null?y(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,h=f.attributeNamespace,a===null?n.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,h?n.setAttributeNS(h,s,a):n.setAttribute(s,a))))}var A=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),j=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),ie=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),b=Symbol.iterator;function q(n){return n===null||typeof n!="object"?null:(n=b&&n[b]||n["@@iterator"],typeof n=="function"?n:null)}var G=Object.assign,R;function N(n){if(R===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);R=s&&s[1]||""}return`
`+R+n}var re=!1;function z(n,s){if(!n||re)return"";re=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(F){var h=F}Reflect.construct(n,[],s)}else{try{s.call()}catch(F){h=F}n.call(s.prototype)}else{try{throw Error()}catch(F){h=F}n()}}catch(F){if(F&&h&&typeof F.stack=="string"){for(var f=F.stack.split(`
`),m=h.stack.split(`
`),E=f.length-1,C=m.length-1;1<=E&&0<=C&&f[E]!==m[C];)C--;for(;1<=E&&0<=C;E--,C--)if(f[E]!==m[C]){if(E!==1||C!==1)do if(E--,C--,0>C||f[E]!==m[C]){var L=`
`+f[E].replace(" at new "," at ");return n.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",n.displayName)),L}while(1<=E&&0<=C);break}}}finally{re=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?N(n):""}function ue(n){switch(n.tag){case 5:return N(n.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return n=z(n.type,!1),n;case 11:return n=z(n.type.render,!1),n;case 1:return n=z(n.type,!0),n;default:return""}}function he(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Z:return"Fragment";case j:return"Portal";case X:return"Profiler";case U:return"StrictMode";case te:return"Suspense";case J:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case ie:return(n.displayName||"Context")+".Consumer";case B:return(n._context.displayName||"Context")+".Provider";case $:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ee:return s=n.displayName||null,s!==null?s:he(n.type)||"Memo";case ne:s=n._payload,n=n._init;try{return he(n(s))}catch{}}return null}function me(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return he(s);case 8:return s===U?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function ve(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ce(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ne(n){var s=Ce(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),h=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,m=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(E){h=""+E,m.call(this,E)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(E){h=""+E},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function St(n){n._valueTracker||(n._valueTracker=Ne(n))}function Mn(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),h="";return n&&(h=Ce(n)?n.checked?"true":"false":n.value),n=h,n!==a?(s.setValue(n),!0):!1}function fn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Bn(n,s){var a=s.checked;return G({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Pn(n,s){var a=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;a=ve(s.value!=null?s.value:a),n._wrapperState={initialChecked:h,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function $t(n,s){s=s.checked,s!=null&&O(n,"checked",s,!1)}function gt(n,s){$t(n,s);var a=ve(s.value),h=s.type;if(a!=null)h==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?kn(n,s.type,a):s.hasOwnProperty("defaultValue")&&kn(n,s.type,ve(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Yt(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function kn(n,s,a){(s!=="number"||fn(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var qt=Array.isArray;function Qt(n,s,a,h){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&h&&(n[a].defaultSelected=!0)}else{for(a=""+ve(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,h&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function gn(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return G({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Yn(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(qt(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:ve(a)}}function Vn(n,s){var a=ve(s.value),h=ve(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),h!=null&&(n.defaultValue=""+h)}function Ze(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function Tr(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ji(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?Tr(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Kn,er=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,h,f){MSApp.execUnsafeLocalFunction(function(){return n(s,a,h,f)})}:n}(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(Kn=Kn||document.createElement("div"),Kn.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Kn.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function tr(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var gi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qo=["Webkit","ms","Moz","O"];Object.keys(gi).forEach(function(n){qo.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),gi[s]=gi[n]})});function Ir(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||gi.hasOwnProperty(n)&&gi[n]?(""+s).trim():s+"px"}function Qo(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var h=a.indexOf("--")===0,f=Ir(a,s[a],h);a==="float"&&(a="cssFloat"),h?n.setProperty(a,f):n[a]=f}}var Ja=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lr(n,s){if(s){if(Ja[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Ar(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nr=null;function Mr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ps=null,Dn=null,Jt=null;function pi(n){if(n=Js(n)){if(typeof Ps!="function")throw Error(t(280));var s=n.stateNode;s&&(s=El(s),Ps(n.stateNode,n.type,s))}}function mi(n){Dn?Jt?Jt.push(n):Jt=[n]:Dn=n}function ks(){if(Dn){var n=Dn,s=Jt;if(Jt=Dn=null,pi(n),s)for(n=0;n<s.length;n++)pi(s[n])}}function Ds(n,s){return n(s)}function Ct(){}var pn=!1;function Rt(n,s,a){if(pn)return n(s,a);pn=!0;try{return Ds(n,s,a)}finally{pn=!1,(Dn!==null||Jt!==null)&&(Ct(),ks())}}function pt(n,s){var a=n.stateNode;if(a===null)return null;var h=El(a);if(h===null)return null;a=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var mt=!1;if(c)try{var Tt={};Object.defineProperty(Tt,"passive",{get:function(){mt=!0}}),window.addEventListener("test",Tt,Tt),window.removeEventListener("test",Tt,Tt)}catch{mt=!1}function mn(n,s,a,h,f,m,E,C,L){var F=Array.prototype.slice.call(arguments,3);try{s.apply(a,F)}catch(V){this.onError(V)}}var ze=!1,qe=null,Mt=!1,Os=null,G_={onError:function(n){ze=!0,qe=n}};function U_(n,s,a,h,f,m,E,C,L){ze=!1,qe=null,mn.apply(G_,arguments)}function b_(n,s,a,h,f,m,E,C,L){if(U_.apply(this,arguments),ze){if(ze){var F=qe;ze=!1,qe=null}else throw Error(t(198));Mt||(Mt=!0,Os=F)}}function ir(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,s.flags&4098&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function dd(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function fd(n){if(ir(n)!==n)throw Error(t(188))}function W_(n){var s=n.alternate;if(!s){if(s=ir(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,h=s;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(h=f.return,h!==null){a=h;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return fd(f),n;if(m===h)return fd(f),s;m=m.sibling}throw Error(t(188))}if(a.return!==h.return)a=f,h=m;else{for(var E=!1,C=f.child;C;){if(C===a){E=!0,a=f,h=m;break}if(C===h){E=!0,h=f,a=m;break}C=C.sibling}if(!E){for(C=m.child;C;){if(C===a){E=!0,a=m,h=f;break}if(C===h){E=!0,h=m,a=f;break}C=C.sibling}if(!E)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function gd(n){return n=W_(n),n!==null?pd(n):null}function pd(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=pd(n);if(s!==null)return s;n=n.sibling}return null}var md=e.unstable_scheduleCallback,_d=e.unstable_cancelCallback,j_=e.unstable_shouldYield,X_=e.unstable_requestPaint,He=e.unstable_now,B_=e.unstable_getCurrentPriorityLevel,eu=e.unstable_ImmediatePriority,yd=e.unstable_UserBlockingPriority,Jo=e.unstable_NormalPriority,Y_=e.unstable_LowPriority,Ed=e.unstable_IdlePriority,el=null,On=null;function V_(n){if(On&&typeof On.onCommitFiberRoot=="function")try{On.onCommitFiberRoot(el,n,void 0,(n.current.flags&128)===128)}catch{}}var _n=Math.clz32?Math.clz32:H_,K_=Math.log,Z_=Math.LN2;function H_(n){return n>>>=0,n===0?32:31-(K_(n)/Z_|0)|0}var tl=64,nl=4194304;function Fs(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function il(n,s){var a=n.pendingLanes;if(a===0)return 0;var h=0,f=n.suspendedLanes,m=n.pingedLanes,E=a&268435455;if(E!==0){var C=E&~f;C!==0?h=Fs(C):(m&=E,m!==0&&(h=Fs(m)))}else E=a&~f,E!==0?h=Fs(E):m!==0&&(h=Fs(m));if(h===0)return 0;if(s!==0&&s!==h&&!(s&f)&&(f=h&-h,m=s&-s,f>=m||f===16&&(m&4194240)!==0))return s;if(h&4&&(h|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=h;0<s;)a=31-_n(s),f=1<<a,h|=n[a],s&=~f;return h}function $_(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function q_(n,s){for(var a=n.suspendedLanes,h=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes;0<m;){var E=31-_n(m),C=1<<E,L=f[E];L===-1?(!(C&a)||C&h)&&(f[E]=$_(C,s)):L<=s&&(n.expiredLanes|=C),m&=~C}}function tu(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function vd(){var n=tl;return tl<<=1,!(tl&4194240)&&(tl=64),n}function nu(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Ns(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-_n(s),n[s]=a}function Q_(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-_n(a),m=1<<f;s[f]=0,h[f]=-1,n[f]=-1,a&=~m}}function iu(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var h=31-_n(a),f=1<<h;f&s|n[h]&s&&(n[h]|=s),a&=~f}}var Oe=0;function xd(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var wd,ru,Sd,Cd,Rd,su=!1,rl=[],_i=null,yi=null,Ei=null,zs=new Map,Gs=new Map,vi=[],J_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Td(n,s){switch(n){case"focusin":case"focusout":_i=null;break;case"dragenter":case"dragleave":yi=null;break;case"mouseover":case"mouseout":Ei=null;break;case"pointerover":case"pointerout":zs.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gs.delete(s.pointerId)}}function Us(n,s,a,h,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:a,eventSystemFlags:h,nativeEvent:m,targetContainers:[f]},s!==null&&(s=Js(s),s!==null&&ru(s)),n):(n.eventSystemFlags|=h,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function e0(n,s,a,h,f){switch(s){case"focusin":return _i=Us(_i,n,s,a,h,f),!0;case"dragenter":return yi=Us(yi,n,s,a,h,f),!0;case"mouseover":return Ei=Us(Ei,n,s,a,h,f),!0;case"pointerover":var m=f.pointerId;return zs.set(m,Us(zs.get(m)||null,n,s,a,h,f)),!0;case"gotpointercapture":return m=f.pointerId,Gs.set(m,Us(Gs.get(m)||null,n,s,a,h,f)),!0}return!1}function Id(n){var s=rr(n.target);if(s!==null){var a=ir(s);if(a!==null){if(s=a.tag,s===13){if(s=dd(a),s!==null){n.blockedOn=s,Rd(n.priority,function(){Sd(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function sl(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=lu(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var h=new a.constructor(a.type,a);nr=h,a.target.dispatchEvent(h),nr=null}else return s=Js(a),s!==null&&ru(s),n.blockedOn=a,!1;s.shift()}return!0}function Ld(n,s,a){sl(n)&&a.delete(s)}function t0(){su=!1,_i!==null&&sl(_i)&&(_i=null),yi!==null&&sl(yi)&&(yi=null),Ei!==null&&sl(Ei)&&(Ei=null),zs.forEach(Ld),Gs.forEach(Ld)}function bs(n,s){n.blockedOn===s&&(n.blockedOn=null,su||(su=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,t0)))}function Ws(n){function s(f){return bs(f,n)}if(0<rl.length){bs(rl[0],n);for(var a=1;a<rl.length;a++){var h=rl[a];h.blockedOn===n&&(h.blockedOn=null)}}for(_i!==null&&bs(_i,n),yi!==null&&bs(yi,n),Ei!==null&&bs(Ei,n),zs.forEach(s),Gs.forEach(s),a=0;a<vi.length;a++)h=vi[a],h.blockedOn===n&&(h.blockedOn=null);for(;0<vi.length&&(a=vi[0],a.blockedOn===null);)Id(a),a.blockedOn===null&&vi.shift()}var Pr=A.ReactCurrentBatchConfig,ol=!0;function n0(n,s,a,h){var f=Oe,m=Pr.transition;Pr.transition=null;try{Oe=1,ou(n,s,a,h)}finally{Oe=f,Pr.transition=m}}function i0(n,s,a,h){var f=Oe,m=Pr.transition;Pr.transition=null;try{Oe=4,ou(n,s,a,h)}finally{Oe=f,Pr.transition=m}}function ou(n,s,a,h){if(ol){var f=lu(n,s,a,h);if(f===null)Cu(n,s,h,ll,a),Td(n,h);else if(e0(f,n,s,a,h))h.stopPropagation();else if(Td(n,h),s&4&&-1<J_.indexOf(n)){for(;f!==null;){var m=Js(f);if(m!==null&&wd(m),m=lu(n,s,a,h),m===null&&Cu(n,s,h,ll,a),m===f)break;f=m}f!==null&&h.stopPropagation()}else Cu(n,s,h,null,a)}}var ll=null;function lu(n,s,a,h){if(ll=null,n=Mr(h),n=rr(n),n!==null)if(s=ir(n),s===null)n=null;else if(a=s.tag,a===13){if(n=dd(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return ll=n,null}function Ad(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(B_()){case eu:return 1;case yd:return 4;case Jo:case Y_:return 16;case Ed:return 536870912;default:return 16}default:return 16}}var xi=null,au=null,al=null;function Md(){if(al)return al;var n,s=au,a=s.length,h,f="value"in xi?xi.value:xi.textContent,m=f.length;for(n=0;n<a&&s[n]===f[n];n++);var E=a-n;for(h=1;h<=E&&s[a-h]===f[m-h];h++);return al=f.slice(n,1<h?1-h:void 0)}function ul(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function cl(){return!0}function Pd(){return!1}function Vt(n){function s(a,h,f,m,E){this._reactName=a,this._targetInst=f,this.type=h,this.nativeEvent=m,this.target=E,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(a=n[C],this[C]=a?a(m):m[C]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?cl:Pd,this.isPropagationStopped=Pd,this}return G(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=cl)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=cl)},persist:function(){},isPersistent:cl}),s}var kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uu=Vt(kr),js=G({},kr,{view:0,detail:0}),r0=Vt(js),cu,hu,Xs,hl=G({},js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Xs&&(Xs&&n.type==="mousemove"?(cu=n.screenX-Xs.screenX,hu=n.screenY-Xs.screenY):hu=cu=0,Xs=n),cu)},movementY:function(n){return"movementY"in n?n.movementY:hu}}),kd=Vt(hl),s0=G({},hl,{dataTransfer:0}),o0=Vt(s0),l0=G({},js,{relatedTarget:0}),du=Vt(l0),a0=G({},kr,{animationName:0,elapsedTime:0,pseudoElement:0}),u0=Vt(a0),c0=G({},kr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),h0=Vt(c0),d0=G({},kr,{data:0}),Dd=Vt(d0),f0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},g0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},p0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function m0(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=p0[n])?!!s[n]:!1}function fu(){return m0}var _0=G({},js,{key:function(n){if(n.key){var s=f0[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=ul(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?g0[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fu,charCode:function(n){return n.type==="keypress"?ul(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ul(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),y0=Vt(_0),E0=G({},hl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Od=Vt(E0),v0=G({},js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fu}),x0=Vt(v0),w0=G({},kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),S0=Vt(w0),C0=G({},hl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),R0=Vt(C0),T0=[9,13,27,32],gu=c&&"CompositionEvent"in window,Bs=null;c&&"documentMode"in document&&(Bs=document.documentMode);var I0=c&&"TextEvent"in window&&!Bs,Fd=c&&(!gu||Bs&&8<Bs&&11>=Bs),Nd=" ",zd=!1;function Gd(n,s){switch(n){case"keyup":return T0.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ud(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Dr=!1;function L0(n,s){switch(n){case"compositionend":return Ud(s);case"keypress":return s.which!==32?null:(zd=!0,Nd);case"textInput":return n=s.data,n===Nd&&zd?null:n;default:return null}}function A0(n,s){if(Dr)return n==="compositionend"||!gu&&Gd(n,s)?(n=Md(),al=au=xi=null,Dr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Fd&&s.locale!=="ko"?null:s.data;default:return null}}var M0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bd(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!M0[n.type]:s==="textarea"}function Wd(n,s,a,h){mi(h),s=ml(s,"onChange"),0<s.length&&(a=new uu("onChange","change",null,a,h),n.push({event:a,listeners:s}))}var Ys=null,Vs=null;function P0(n){of(n,0)}function dl(n){var s=Gr(n);if(Mn(s))return n}function k0(n,s){if(n==="change")return s}var jd=!1;if(c){var pu;if(c){var mu="oninput"in document;if(!mu){var Xd=document.createElement("div");Xd.setAttribute("oninput","return;"),mu=typeof Xd.oninput=="function"}pu=mu}else pu=!1;jd=pu&&(!document.documentMode||9<document.documentMode)}function Bd(){Ys&&(Ys.detachEvent("onpropertychange",Yd),Vs=Ys=null)}function Yd(n){if(n.propertyName==="value"&&dl(Vs)){var s=[];Wd(s,Vs,n,Mr(n)),Rt(P0,s)}}function D0(n,s,a){n==="focusin"?(Bd(),Ys=s,Vs=a,Ys.attachEvent("onpropertychange",Yd)):n==="focusout"&&Bd()}function O0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return dl(Vs)}function F0(n,s){if(n==="click")return dl(s)}function N0(n,s){if(n==="input"||n==="change")return dl(s)}function z0(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var yn=typeof Object.is=="function"?Object.is:z0;function Ks(n,s){if(yn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),h=Object.keys(s);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var f=a[h];if(!d.call(s,f)||!yn(n[f],s[f]))return!1}return!0}function Vd(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Kd(n,s){var a=Vd(n);n=0;for(var h;a;){if(a.nodeType===3){if(h=n+a.textContent.length,n<=s&&h>=s)return{node:a,offset:s-n};n=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Vd(a)}}function Zd(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Zd(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Hd(){for(var n=window,s=fn();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=fn(n.document)}return s}function _u(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function G0(n){var s=Hd(),a=n.focusedElem,h=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Zd(a.ownerDocument.documentElement,a)){if(h!==null&&_u(a)){if(s=h.start,n=h.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,m=Math.min(h.start,f);h=h.end===void 0?m:Math.min(h.end,f),!n.extend&&m>h&&(f=h,h=m,m=f),f=Kd(a,m);var E=Kd(a,h);f&&E&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==E.node||n.focusOffset!==E.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),n.removeAllRanges(),m>h?(n.addRange(s),n.extend(E.node,E.offset)):(s.setEnd(E.node,E.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var U0=c&&"documentMode"in document&&11>=document.documentMode,Or=null,yu=null,Zs=null,Eu=!1;function $d(n,s,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Eu||Or==null||Or!==fn(h)||(h=Or,"selectionStart"in h&&_u(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Zs&&Ks(Zs,h)||(Zs=h,h=ml(yu,"onSelect"),0<h.length&&(s=new uu("onSelect","select",null,s,a),n.push({event:s,listeners:h}),s.target=Or)))}function fl(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Fr={animationend:fl("Animation","AnimationEnd"),animationiteration:fl("Animation","AnimationIteration"),animationstart:fl("Animation","AnimationStart"),transitionend:fl("Transition","TransitionEnd")},vu={},qd={};c&&(qd=document.createElement("div").style,"AnimationEvent"in window||(delete Fr.animationend.animation,delete Fr.animationiteration.animation,delete Fr.animationstart.animation),"TransitionEvent"in window||delete Fr.transitionend.transition);function gl(n){if(vu[n])return vu[n];if(!Fr[n])return n;var s=Fr[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in qd)return vu[n]=s[a];return n}var Qd=gl("animationend"),Jd=gl("animationiteration"),ef=gl("animationstart"),tf=gl("transitionend"),nf=new Map,rf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wi(n,s){nf.set(n,s),l(s,[n])}for(var xu=0;xu<rf.length;xu++){var wu=rf[xu],b0=wu.toLowerCase(),W0=wu[0].toUpperCase()+wu.slice(1);wi(b0,"on"+W0)}wi(Qd,"onAnimationEnd"),wi(Jd,"onAnimationIteration"),wi(ef,"onAnimationStart"),wi("dblclick","onDoubleClick"),wi("focusin","onFocus"),wi("focusout","onBlur"),wi(tf,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),j0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hs));function sf(n,s,a){var h=n.type||"unknown-event";n.currentTarget=a,b_(h,s,void 0,n),n.currentTarget=null}function of(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var h=n[a],f=h.event;h=h.listeners;e:{var m=void 0;if(s)for(var E=h.length-1;0<=E;E--){var C=h[E],L=C.instance,F=C.currentTarget;if(C=C.listener,L!==m&&f.isPropagationStopped())break e;sf(f,C,F),m=L}else for(E=0;E<h.length;E++){if(C=h[E],L=C.instance,F=C.currentTarget,C=C.listener,L!==m&&f.isPropagationStopped())break e;sf(f,C,F),m=L}}}if(Mt)throw n=Os,Mt=!1,Os=null,n}function be(n,s){var a=s[Mu];a===void 0&&(a=s[Mu]=new Set);var h=n+"__bubble";a.has(h)||(lf(s,n,2,!1),a.add(h))}function Su(n,s,a){var h=0;s&&(h|=4),lf(a,n,h,s)}var pl="_reactListening"+Math.random().toString(36).slice(2);function $s(n){if(!n[pl]){n[pl]=!0,i.forEach(function(a){a!=="selectionchange"&&(j0.has(a)||Su(a,!1,n),Su(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[pl]||(s[pl]=!0,Su("selectionchange",!1,s))}}function lf(n,s,a,h){switch(Ad(s)){case 1:var f=n0;break;case 4:f=i0;break;default:f=ou}a=f.bind(null,s,a,n),f=void 0,!mt||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),h?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function Cu(n,s,a,h,f){var m=h;if(!(s&1)&&!(s&2)&&h!==null)e:for(;;){if(h===null)return;var E=h.tag;if(E===3||E===4){var C=h.stateNode.containerInfo;if(C===f||C.nodeType===8&&C.parentNode===f)break;if(E===4)for(E=h.return;E!==null;){var L=E.tag;if((L===3||L===4)&&(L=E.stateNode.containerInfo,L===f||L.nodeType===8&&L.parentNode===f))return;E=E.return}for(;C!==null;){if(E=rr(C),E===null)return;if(L=E.tag,L===5||L===6){h=m=E;continue e}C=C.parentNode}}h=h.return}Rt(function(){var F=m,V=Mr(a),H=[];e:{var Y=nf.get(n);if(Y!==void 0){var se=uu,ae=n;switch(n){case"keypress":if(ul(a)===0)break e;case"keydown":case"keyup":se=y0;break;case"focusin":ae="focus",se=du;break;case"focusout":ae="blur",se=du;break;case"beforeblur":case"afterblur":se=du;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=kd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=o0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=x0;break;case Qd:case Jd:case ef:se=u0;break;case tf:se=S0;break;case"scroll":se=r0;break;case"wheel":se=R0;break;case"copy":case"cut":case"paste":se=h0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=Od}var ce=(s&4)!==0,$e=!ce&&n==="scroll",k=ce?Y!==null?Y+"Capture":null:Y;ce=[];for(var M=F,D;M!==null;){D=M;var Q=D.stateNode;if(D.tag===5&&Q!==null&&(D=Q,k!==null&&(Q=pt(M,k),Q!=null&&ce.push(qs(M,Q,D)))),$e)break;M=M.return}0<ce.length&&(Y=new se(Y,ae,null,a,V),H.push({event:Y,listeners:ce}))}}if(!(s&7)){e:{if(Y=n==="mouseover"||n==="pointerover",se=n==="mouseout"||n==="pointerout",Y&&a!==nr&&(ae=a.relatedTarget||a.fromElement)&&(rr(ae)||ae[Zn]))break e;if((se||Y)&&(Y=V.window===V?V:(Y=V.ownerDocument)?Y.defaultView||Y.parentWindow:window,se?(ae=a.relatedTarget||a.toElement,se=F,ae=ae?rr(ae):null,ae!==null&&($e=ir(ae),ae!==$e||ae.tag!==5&&ae.tag!==6)&&(ae=null)):(se=null,ae=F),se!==ae)){if(ce=kd,Q="onMouseLeave",k="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(ce=Od,Q="onPointerLeave",k="onPointerEnter",M="pointer"),$e=se==null?Y:Gr(se),D=ae==null?Y:Gr(ae),Y=new ce(Q,M+"leave",se,a,V),Y.target=$e,Y.relatedTarget=D,Q=null,rr(V)===F&&(ce=new ce(k,M+"enter",ae,a,V),ce.target=D,ce.relatedTarget=$e,Q=ce),$e=Q,se&&ae)t:{for(ce=se,k=ae,M=0,D=ce;D;D=Nr(D))M++;for(D=0,Q=k;Q;Q=Nr(Q))D++;for(;0<M-D;)ce=Nr(ce),M--;for(;0<D-M;)k=Nr(k),D--;for(;M--;){if(ce===k||k!==null&&ce===k.alternate)break t;ce=Nr(ce),k=Nr(k)}ce=null}else ce=null;se!==null&&af(H,Y,se,ce,!1),ae!==null&&$e!==null&&af(H,$e,ae,ce,!0)}}e:{if(Y=F?Gr(F):window,se=Y.nodeName&&Y.nodeName.toLowerCase(),se==="select"||se==="input"&&Y.type==="file")var de=k0;else if(bd(Y))if(jd)de=N0;else{de=O0;var ge=D0}else(se=Y.nodeName)&&se.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(de=F0);if(de&&(de=de(n,F))){Wd(H,de,a,V);break e}ge&&ge(n,Y,F),n==="focusout"&&(ge=Y._wrapperState)&&ge.controlled&&Y.type==="number"&&kn(Y,"number",Y.value)}switch(ge=F?Gr(F):window,n){case"focusin":(bd(ge)||ge.contentEditable==="true")&&(Or=ge,yu=F,Zs=null);break;case"focusout":Zs=yu=Or=null;break;case"mousedown":Eu=!0;break;case"contextmenu":case"mouseup":case"dragend":Eu=!1,$d(H,a,V);break;case"selectionchange":if(U0)break;case"keydown":case"keyup":$d(H,a,V)}var pe;if(gu)e:{switch(n){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else Dr?Gd(n,a)&&(_e="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(_e="onCompositionStart");_e&&(Fd&&a.locale!=="ko"&&(Dr||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&Dr&&(pe=Md()):(xi=V,au="value"in xi?xi.value:xi.textContent,Dr=!0)),ge=ml(F,_e),0<ge.length&&(_e=new Dd(_e,n,null,a,V),H.push({event:_e,listeners:ge}),pe?_e.data=pe:(pe=Ud(a),pe!==null&&(_e.data=pe)))),(pe=I0?L0(n,a):A0(n,a))&&(F=ml(F,"onBeforeInput"),0<F.length&&(V=new Dd("onBeforeInput","beforeinput",null,a,V),H.push({event:V,listeners:F}),V.data=pe))}of(H,s)})}function qs(n,s,a){return{instance:n,listener:s,currentTarget:a}}function ml(n,s){for(var a=s+"Capture",h=[];n!==null;){var f=n,m=f.stateNode;f.tag===5&&m!==null&&(f=m,m=pt(n,a),m!=null&&h.unshift(qs(n,m,f)),m=pt(n,s),m!=null&&h.push(qs(n,m,f))),n=n.return}return h}function Nr(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function af(n,s,a,h,f){for(var m=s._reactName,E=[];a!==null&&a!==h;){var C=a,L=C.alternate,F=C.stateNode;if(L!==null&&L===h)break;C.tag===5&&F!==null&&(C=F,f?(L=pt(a,m),L!=null&&E.unshift(qs(a,L,C))):f||(L=pt(a,m),L!=null&&E.push(qs(a,L,C)))),a=a.return}E.length!==0&&n.push({event:s,listeners:E})}var X0=/\r\n?/g,B0=/\u0000|\uFFFD/g;function uf(n){return(typeof n=="string"?n:""+n).replace(X0,`
`).replace(B0,"")}function _l(n,s,a){if(s=uf(s),uf(n)!==s&&a)throw Error(t(425))}function yl(){}var Ru=null,Tu=null;function Iu(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Lu=typeof setTimeout=="function"?setTimeout:void 0,Y0=typeof clearTimeout=="function"?clearTimeout:void 0,cf=typeof Promise=="function"?Promise:void 0,V0=typeof queueMicrotask=="function"?queueMicrotask:typeof cf<"u"?function(n){return cf.resolve(null).then(n).catch(K0)}:Lu;function K0(n){setTimeout(function(){throw n})}function Au(n,s){var a=s,h=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(h===0){n.removeChild(f),Ws(s);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=f}while(a);Ws(s)}function Si(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function hf(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var zr=Math.random().toString(36).slice(2),Fn="__reactFiber$"+zr,Qs="__reactProps$"+zr,Zn="__reactContainer$"+zr,Mu="__reactEvents$"+zr,Z0="__reactListeners$"+zr,H0="__reactHandles$"+zr;function rr(n){var s=n[Fn];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Zn]||a[Fn]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=hf(n);n!==null;){if(a=n[Fn])return a;n=hf(n)}return s}n=a,a=n.parentNode}return null}function Js(n){return n=n[Fn]||n[Zn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Gr(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function El(n){return n[Qs]||null}var Pu=[],Ur=-1;function Ci(n){return{current:n}}function We(n){0>Ur||(n.current=Pu[Ur],Pu[Ur]=null,Ur--)}function Ge(n,s){Ur++,Pu[Ur]=n.current,n.current=s}var Ri={},_t=Ci(Ri),Pt=Ci(!1),sr=Ri;function br(n,s){var a=n.type.contextTypes;if(!a)return Ri;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var f={},m;for(m in a)f[m]=s[m];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=f),f}function kt(n){return n=n.childContextTypes,n!=null}function vl(){We(Pt),We(_t)}function df(n,s,a){if(_t.current!==Ri)throw Error(t(168));Ge(_t,s),Ge(Pt,a)}function ff(n,s,a){var h=n.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var f in h)if(!(f in s))throw Error(t(108,me(n)||"Unknown",f));return G({},a,h)}function xl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ri,sr=_t.current,Ge(_t,n),Ge(Pt,Pt.current),!0}function gf(n,s,a){var h=n.stateNode;if(!h)throw Error(t(169));a?(n=ff(n,s,sr),h.__reactInternalMemoizedMergedChildContext=n,We(Pt),We(_t),Ge(_t,n)):We(Pt),Ge(Pt,a)}var Hn=null,wl=!1,ku=!1;function pf(n){Hn===null?Hn=[n]:Hn.push(n)}function $0(n){wl=!0,pf(n)}function Ti(){if(!ku&&Hn!==null){ku=!0;var n=0,s=Oe;try{var a=Hn;for(Oe=1;n<a.length;n++){var h=a[n];do h=h(!0);while(h!==null)}Hn=null,wl=!1}catch(f){throw Hn!==null&&(Hn=Hn.slice(n+1)),md(eu,Ti),f}finally{Oe=s,ku=!1}}return null}var Wr=[],jr=0,Sl=null,Cl=0,en=[],tn=0,or=null,$n=1,qn="";function lr(n,s){Wr[jr++]=Cl,Wr[jr++]=Sl,Sl=n,Cl=s}function mf(n,s,a){en[tn++]=$n,en[tn++]=qn,en[tn++]=or,or=n;var h=$n;n=qn;var f=32-_n(h)-1;h&=~(1<<f),a+=1;var m=32-_n(s)+f;if(30<m){var E=f-f%5;m=(h&(1<<E)-1).toString(32),h>>=E,f-=E,$n=1<<32-_n(s)+f|a<<f|h,qn=m+n}else $n=1<<m|a<<f|h,qn=n}function Du(n){n.return!==null&&(lr(n,1),mf(n,1,0))}function Ou(n){for(;n===Sl;)Sl=Wr[--jr],Wr[jr]=null,Cl=Wr[--jr],Wr[jr]=null;for(;n===or;)or=en[--tn],en[tn]=null,qn=en[--tn],en[tn]=null,$n=en[--tn],en[tn]=null}var Kt=null,Zt=null,je=!1,En=null;function _f(n,s){var a=on(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function yf(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,Kt=n,Zt=Si(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,Kt=n,Zt=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=or!==null?{id:$n,overflow:qn}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=on(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,Kt=n,Zt=null,!0):!1;default:return!1}}function Fu(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Nu(n){if(je){var s=Zt;if(s){var a=s;if(!yf(n,s)){if(Fu(n))throw Error(t(418));s=Si(a.nextSibling);var h=Kt;s&&yf(n,s)?_f(h,a):(n.flags=n.flags&-4097|2,je=!1,Kt=n)}}else{if(Fu(n))throw Error(t(418));n.flags=n.flags&-4097|2,je=!1,Kt=n}}}function Ef(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Kt=n}function Rl(n){if(n!==Kt)return!1;if(!je)return Ef(n),je=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!Iu(n.type,n.memoizedProps)),s&&(s=Zt)){if(Fu(n))throw vf(),Error(t(418));for(;s;)_f(n,s),s=Si(s.nextSibling)}if(Ef(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){Zt=Si(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}Zt=null}}else Zt=Kt?Si(n.stateNode.nextSibling):null;return!0}function vf(){for(var n=Zt;n;)n=Si(n.nextSibling)}function Xr(){Zt=Kt=null,je=!1}function zu(n){En===null?En=[n]:En.push(n)}var q0=A.ReactCurrentBatchConfig;function eo(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,n));var f=h,m=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===m?s.ref:(s=function(E){var C=f.refs;E===null?delete C[m]:C[m]=E},s._stringRef=m,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Tl(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function xf(n){var s=n._init;return s(n._payload)}function wf(n){function s(k,M){if(n){var D=k.deletions;D===null?(k.deletions=[M],k.flags|=16):D.push(M)}}function a(k,M){if(!n)return null;for(;M!==null;)s(k,M),M=M.sibling;return null}function h(k,M){for(k=new Map;M!==null;)M.key!==null?k.set(M.key,M):k.set(M.index,M),M=M.sibling;return k}function f(k,M){return k=Oi(k,M),k.index=0,k.sibling=null,k}function m(k,M,D){return k.index=D,n?(D=k.alternate,D!==null?(D=D.index,D<M?(k.flags|=2,M):D):(k.flags|=2,M)):(k.flags|=1048576,M)}function E(k){return n&&k.alternate===null&&(k.flags|=2),k}function C(k,M,D,Q){return M===null||M.tag!==6?(M=Lc(D,k.mode,Q),M.return=k,M):(M=f(M,D),M.return=k,M)}function L(k,M,D,Q){var de=D.type;return de===Z?V(k,M,D.props.children,Q,D.key):M!==null&&(M.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===ne&&xf(de)===M.type)?(Q=f(M,D.props),Q.ref=eo(k,M,D),Q.return=k,Q):(Q=$l(D.type,D.key,D.props,null,k.mode,Q),Q.ref=eo(k,M,D),Q.return=k,Q)}function F(k,M,D,Q){return M===null||M.tag!==4||M.stateNode.containerInfo!==D.containerInfo||M.stateNode.implementation!==D.implementation?(M=Ac(D,k.mode,Q),M.return=k,M):(M=f(M,D.children||[]),M.return=k,M)}function V(k,M,D,Q,de){return M===null||M.tag!==7?(M=pr(D,k.mode,Q,de),M.return=k,M):(M=f(M,D),M.return=k,M)}function H(k,M,D){if(typeof M=="string"&&M!==""||typeof M=="number")return M=Lc(""+M,k.mode,D),M.return=k,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case P:return D=$l(M.type,M.key,M.props,null,k.mode,D),D.ref=eo(k,null,M),D.return=k,D;case j:return M=Ac(M,k.mode,D),M.return=k,M;case ne:var Q=M._init;return H(k,Q(M._payload),D)}if(qt(M)||q(M))return M=pr(M,k.mode,D,null),M.return=k,M;Tl(k,M)}return null}function Y(k,M,D,Q){var de=M!==null?M.key:null;if(typeof D=="string"&&D!==""||typeof D=="number")return de!==null?null:C(k,M,""+D,Q);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case P:return D.key===de?L(k,M,D,Q):null;case j:return D.key===de?F(k,M,D,Q):null;case ne:return de=D._init,Y(k,M,de(D._payload),Q)}if(qt(D)||q(D))return de!==null?null:V(k,M,D,Q,null);Tl(k,D)}return null}function se(k,M,D,Q,de){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return k=k.get(D)||null,C(M,k,""+Q,de);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case P:return k=k.get(Q.key===null?D:Q.key)||null,L(M,k,Q,de);case j:return k=k.get(Q.key===null?D:Q.key)||null,F(M,k,Q,de);case ne:var ge=Q._init;return se(k,M,D,ge(Q._payload),de)}if(qt(Q)||q(Q))return k=k.get(D)||null,V(M,k,Q,de,null);Tl(M,Q)}return null}function ae(k,M,D,Q){for(var de=null,ge=null,pe=M,_e=M=0,st=null;pe!==null&&_e<D.length;_e++){pe.index>_e?(st=pe,pe=null):st=pe.sibling;var Pe=Y(k,pe,D[_e],Q);if(Pe===null){pe===null&&(pe=st);break}n&&pe&&Pe.alternate===null&&s(k,pe),M=m(Pe,M,_e),ge===null?de=Pe:ge.sibling=Pe,ge=Pe,pe=st}if(_e===D.length)return a(k,pe),je&&lr(k,_e),de;if(pe===null){for(;_e<D.length;_e++)pe=H(k,D[_e],Q),pe!==null&&(M=m(pe,M,_e),ge===null?de=pe:ge.sibling=pe,ge=pe);return je&&lr(k,_e),de}for(pe=h(k,pe);_e<D.length;_e++)st=se(pe,k,_e,D[_e],Q),st!==null&&(n&&st.alternate!==null&&pe.delete(st.key===null?_e:st.key),M=m(st,M,_e),ge===null?de=st:ge.sibling=st,ge=st);return n&&pe.forEach(function(Fi){return s(k,Fi)}),je&&lr(k,_e),de}function ce(k,M,D,Q){var de=q(D);if(typeof de!="function")throw Error(t(150));if(D=de.call(D),D==null)throw Error(t(151));for(var ge=de=null,pe=M,_e=M=0,st=null,Pe=D.next();pe!==null&&!Pe.done;_e++,Pe=D.next()){pe.index>_e?(st=pe,pe=null):st=pe.sibling;var Fi=Y(k,pe,Pe.value,Q);if(Fi===null){pe===null&&(pe=st);break}n&&pe&&Fi.alternate===null&&s(k,pe),M=m(Fi,M,_e),ge===null?de=Fi:ge.sibling=Fi,ge=Fi,pe=st}if(Pe.done)return a(k,pe),je&&lr(k,_e),de;if(pe===null){for(;!Pe.done;_e++,Pe=D.next())Pe=H(k,Pe.value,Q),Pe!==null&&(M=m(Pe,M,_e),ge===null?de=Pe:ge.sibling=Pe,ge=Pe);return je&&lr(k,_e),de}for(pe=h(k,pe);!Pe.done;_e++,Pe=D.next())Pe=se(pe,k,_e,Pe.value,Q),Pe!==null&&(n&&Pe.alternate!==null&&pe.delete(Pe.key===null?_e:Pe.key),M=m(Pe,M,_e),ge===null?de=Pe:ge.sibling=Pe,ge=Pe);return n&&pe.forEach(function(Ay){return s(k,Ay)}),je&&lr(k,_e),de}function $e(k,M,D,Q){if(typeof D=="object"&&D!==null&&D.type===Z&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case P:e:{for(var de=D.key,ge=M;ge!==null;){if(ge.key===de){if(de=D.type,de===Z){if(ge.tag===7){a(k,ge.sibling),M=f(ge,D.props.children),M.return=k,k=M;break e}}else if(ge.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===ne&&xf(de)===ge.type){a(k,ge.sibling),M=f(ge,D.props),M.ref=eo(k,ge,D),M.return=k,k=M;break e}a(k,ge);break}else s(k,ge);ge=ge.sibling}D.type===Z?(M=pr(D.props.children,k.mode,Q,D.key),M.return=k,k=M):(Q=$l(D.type,D.key,D.props,null,k.mode,Q),Q.ref=eo(k,M,D),Q.return=k,k=Q)}return E(k);case j:e:{for(ge=D.key;M!==null;){if(M.key===ge)if(M.tag===4&&M.stateNode.containerInfo===D.containerInfo&&M.stateNode.implementation===D.implementation){a(k,M.sibling),M=f(M,D.children||[]),M.return=k,k=M;break e}else{a(k,M);break}else s(k,M);M=M.sibling}M=Ac(D,k.mode,Q),M.return=k,k=M}return E(k);case ne:return ge=D._init,$e(k,M,ge(D._payload),Q)}if(qt(D))return ae(k,M,D,Q);if(q(D))return ce(k,M,D,Q);Tl(k,D)}return typeof D=="string"&&D!==""||typeof D=="number"?(D=""+D,M!==null&&M.tag===6?(a(k,M.sibling),M=f(M,D),M.return=k,k=M):(a(k,M),M=Lc(D,k.mode,Q),M.return=k,k=M),E(k)):a(k,M)}return $e}var Br=wf(!0),Sf=wf(!1),Il=Ci(null),Ll=null,Yr=null,Gu=null;function Uu(){Gu=Yr=Ll=null}function bu(n){var s=Il.current;We(Il),n._currentValue=s}function Wu(n,s,a){for(;n!==null;){var h=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),n===a)break;n=n.return}}function Vr(n,s){Ll=n,Gu=Yr=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&s&&(Dt=!0),n.firstContext=null)}function nn(n){var s=n._currentValue;if(Gu!==n)if(n={context:n,memoizedValue:s,next:null},Yr===null){if(Ll===null)throw Error(t(308));Yr=n,Ll.dependencies={lanes:0,firstContext:n}}else Yr=Yr.next=n;return s}var ar=null;function ju(n){ar===null?ar=[n]:ar.push(n)}function Cf(n,s,a,h){var f=s.interleaved;return f===null?(a.next=a,ju(s)):(a.next=f.next,f.next=a),s.interleaved=a,Qn(n,h)}function Qn(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Ii=!1;function Xu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rf(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Jn(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function Li(n,s,a){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,Te&2){var f=h.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),h.pending=s,Qn(n,a)}return f=h.interleaved,f===null?(s.next=s,ju(h)):(s.next=f.next,f.next=s),h.interleaved=s,Qn(n,a)}function Al(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var h=s.lanes;h&=n.pendingLanes,a|=h,s.lanes=a,iu(n,a)}}function Tf(n,s){var a=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var E={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?f=m=E:m=m.next=E,a=a.next}while(a!==null);m===null?f=m=s:m=m.next=s}else f=m=s;a={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:h.shared,effects:h.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function Ml(n,s,a,h){var f=n.updateQueue;Ii=!1;var m=f.firstBaseUpdate,E=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var L=C,F=L.next;L.next=null,E===null?m=F:E.next=F,E=L;var V=n.alternate;V!==null&&(V=V.updateQueue,C=V.lastBaseUpdate,C!==E&&(C===null?V.firstBaseUpdate=F:C.next=F,V.lastBaseUpdate=L))}if(m!==null){var H=f.baseState;E=0,V=F=L=null,C=m;do{var Y=C.lane,se=C.eventTime;if((h&Y)===Y){V!==null&&(V=V.next={eventTime:se,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var ae=n,ce=C;switch(Y=s,se=a,ce.tag){case 1:if(ae=ce.payload,typeof ae=="function"){H=ae.call(se,H,Y);break e}H=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=ce.payload,Y=typeof ae=="function"?ae.call(se,H,Y):ae,Y==null)break e;H=G({},H,Y);break e;case 2:Ii=!0}}C.callback!==null&&C.lane!==0&&(n.flags|=64,Y=f.effects,Y===null?f.effects=[C]:Y.push(C))}else se={eventTime:se,lane:Y,tag:C.tag,payload:C.payload,callback:C.callback,next:null},V===null?(F=V=se,L=H):V=V.next=se,E|=Y;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;Y=C,C=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);if(V===null&&(L=H),f.baseState=L,f.firstBaseUpdate=F,f.lastBaseUpdate=V,s=f.shared.interleaved,s!==null){f=s;do E|=f.lane,f=f.next;while(f!==s)}else m===null&&(f.shared.lanes=0);hr|=E,n.lanes=E,n.memoizedState=H}}function If(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var h=n[s],f=h.callback;if(f!==null){if(h.callback=null,h=a,typeof f!="function")throw Error(t(191,f));f.call(h)}}}var to={},Nn=Ci(to),no=Ci(to),io=Ci(to);function ur(n){if(n===to)throw Error(t(174));return n}function Bu(n,s){switch(Ge(io,s),Ge(no,n),Ge(Nn,to),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Ji(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Ji(s,n)}We(Nn),Ge(Nn,s)}function Kr(){We(Nn),We(no),We(io)}function Lf(n){ur(io.current);var s=ur(Nn.current),a=Ji(s,n.type);s!==a&&(Ge(no,n),Ge(Nn,a))}function Yu(n){no.current===n&&(We(Nn),We(no))}var Xe=Ci(0);function Pl(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Vu=[];function Ku(){for(var n=0;n<Vu.length;n++)Vu[n]._workInProgressVersionPrimary=null;Vu.length=0}var kl=A.ReactCurrentDispatcher,Zu=A.ReactCurrentBatchConfig,cr=0,Be=null,et=null,it=null,Dl=!1,ro=!1,so=0,Q0=0;function yt(){throw Error(t(321))}function Hu(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!yn(n[a],s[a]))return!1;return!0}function $u(n,s,a,h,f,m){if(cr=m,Be=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,kl.current=n===null||n.memoizedState===null?ny:iy,n=a(h,f),ro){m=0;do{if(ro=!1,so=0,25<=m)throw Error(t(301));m+=1,it=et=null,s.updateQueue=null,kl.current=ry,n=a(h,f)}while(ro)}if(kl.current=Nl,s=et!==null&&et.next!==null,cr=0,it=et=Be=null,Dl=!1,s)throw Error(t(300));return n}function qu(){var n=so!==0;return so=0,n}function zn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?Be.memoizedState=it=n:it=it.next=n,it}function rn(){if(et===null){var n=Be.alternate;n=n!==null?n.memoizedState:null}else n=et.next;var s=it===null?Be.memoizedState:it.next;if(s!==null)it=s,et=n;else{if(n===null)throw Error(t(310));et=n,n={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},it===null?Be.memoizedState=it=n:it=it.next=n}return it}function oo(n,s){return typeof s=="function"?s(n):s}function Qu(n){var s=rn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var h=et,f=h.baseQueue,m=a.pending;if(m!==null){if(f!==null){var E=f.next;f.next=m.next,m.next=E}h.baseQueue=f=m,a.pending=null}if(f!==null){m=f.next,h=h.baseState;var C=E=null,L=null,F=m;do{var V=F.lane;if((cr&V)===V)L!==null&&(L=L.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),h=F.hasEagerState?F.eagerState:n(h,F.action);else{var H={lane:V,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};L===null?(C=L=H,E=h):L=L.next=H,Be.lanes|=V,hr|=V}F=F.next}while(F!==null&&F!==m);L===null?E=h:L.next=C,yn(h,s.memoizedState)||(Dt=!0),s.memoizedState=h,s.baseState=E,s.baseQueue=L,a.lastRenderedState=h}if(n=a.interleaved,n!==null){f=n;do m=f.lane,Be.lanes|=m,hr|=m,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Ju(n){var s=rn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var h=a.dispatch,f=a.pending,m=s.memoizedState;if(f!==null){a.pending=null;var E=f=f.next;do m=n(m,E.action),E=E.next;while(E!==f);yn(m,s.memoizedState)||(Dt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,h]}function Af(){}function Mf(n,s){var a=Be,h=rn(),f=s(),m=!yn(h.memoizedState,f);if(m&&(h.memoizedState=f,Dt=!0),h=h.queue,ec(Df.bind(null,a,h,n),[n]),h.getSnapshot!==s||m||it!==null&&it.memoizedState.tag&1){if(a.flags|=2048,lo(9,kf.bind(null,a,h,f,s),void 0,null),rt===null)throw Error(t(349));cr&30||Pf(a,s,f)}return f}function Pf(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=Be.updateQueue,s===null?(s={lastEffect:null,stores:null},Be.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function kf(n,s,a,h){s.value=a,s.getSnapshot=h,Of(s)&&Ff(n)}function Df(n,s,a){return a(function(){Of(s)&&Ff(n)})}function Of(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!yn(n,a)}catch{return!0}}function Ff(n){var s=Qn(n,1);s!==null&&Sn(s,n,1,-1)}function Nf(n){var s=zn();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oo,lastRenderedState:n},s.queue=n,n=n.dispatch=ty.bind(null,Be,n),[s.memoizedState,n]}function lo(n,s,a,h){return n={tag:n,create:s,destroy:a,deps:h,next:null},s=Be.updateQueue,s===null?(s={lastEffect:null,stores:null},Be.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(h=a.next,a.next=n,n.next=h,s.lastEffect=n)),n}function zf(){return rn().memoizedState}function Ol(n,s,a,h){var f=zn();Be.flags|=n,f.memoizedState=lo(1|s,a,void 0,h===void 0?null:h)}function Fl(n,s,a,h){var f=rn();h=h===void 0?null:h;var m=void 0;if(et!==null){var E=et.memoizedState;if(m=E.destroy,h!==null&&Hu(h,E.deps)){f.memoizedState=lo(s,a,m,h);return}}Be.flags|=n,f.memoizedState=lo(1|s,a,m,h)}function Gf(n,s){return Ol(8390656,8,n,s)}function ec(n,s){return Fl(2048,8,n,s)}function Uf(n,s){return Fl(4,2,n,s)}function bf(n,s){return Fl(4,4,n,s)}function Wf(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function jf(n,s,a){return a=a!=null?a.concat([n]):null,Fl(4,4,Wf.bind(null,s,n),a)}function tc(){}function Xf(n,s){var a=rn();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&Hu(s,h[1])?h[0]:(a.memoizedState=[n,s],n)}function Bf(n,s){var a=rn();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&Hu(s,h[1])?h[0]:(n=n(),a.memoizedState=[n,s],n)}function Yf(n,s,a){return cr&21?(yn(a,s)||(a=vd(),Be.lanes|=a,hr|=a,n.baseState=!0),s):(n.baseState&&(n.baseState=!1,Dt=!0),n.memoizedState=a)}function J0(n,s){var a=Oe;Oe=a!==0&&4>a?a:4,n(!0);var h=Zu.transition;Zu.transition={};try{n(!1),s()}finally{Oe=a,Zu.transition=h}}function Vf(){return rn().memoizedState}function ey(n,s,a){var h=ki(n);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},Kf(n))Zf(s,a);else if(a=Cf(n,s,a,h),a!==null){var f=Lt();Sn(a,n,h,f),Hf(a,s,h)}}function ty(n,s,a){var h=ki(n),f={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(Kf(n))Zf(s,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var E=s.lastRenderedState,C=m(E,a);if(f.hasEagerState=!0,f.eagerState=C,yn(C,E)){var L=s.interleaved;L===null?(f.next=f,ju(s)):(f.next=L.next,L.next=f),s.interleaved=f;return}}catch{}finally{}a=Cf(n,s,f,h),a!==null&&(f=Lt(),Sn(a,n,h,f),Hf(a,s,h))}}function Kf(n){var s=n.alternate;return n===Be||s!==null&&s===Be}function Zf(n,s){ro=Dl=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Hf(n,s,a){if(a&4194240){var h=s.lanes;h&=n.pendingLanes,a|=h,s.lanes=a,iu(n,a)}}var Nl={readContext:nn,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},ny={readContext:nn,useCallback:function(n,s){return zn().memoizedState=[n,s===void 0?null:s],n},useContext:nn,useEffect:Gf,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,Ol(4194308,4,Wf.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Ol(4194308,4,n,s)},useInsertionEffect:function(n,s){return Ol(4,2,n,s)},useMemo:function(n,s){var a=zn();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var h=zn();return s=a!==void 0?a(s):s,h.memoizedState=h.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},h.queue=n,n=n.dispatch=ey.bind(null,Be,n),[h.memoizedState,n]},useRef:function(n){var s=zn();return n={current:n},s.memoizedState=n},useState:Nf,useDebugValue:tc,useDeferredValue:function(n){return zn().memoizedState=n},useTransition:function(){var n=Nf(!1),s=n[0];return n=J0.bind(null,n[1]),zn().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var h=Be,f=zn();if(je){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),rt===null)throw Error(t(349));cr&30||Pf(h,s,a)}f.memoizedState=a;var m={value:a,getSnapshot:s};return f.queue=m,Gf(Df.bind(null,h,m,n),[n]),h.flags|=2048,lo(9,kf.bind(null,h,m,a,s),void 0,null),a},useId:function(){var n=zn(),s=rt.identifierPrefix;if(je){var a=qn,h=$n;a=(h&~(1<<32-_n(h)-1)).toString(32)+a,s=":"+s+"R"+a,a=so++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=Q0++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},iy={readContext:nn,useCallback:Xf,useContext:nn,useEffect:ec,useImperativeHandle:jf,useInsertionEffect:Uf,useLayoutEffect:bf,useMemo:Bf,useReducer:Qu,useRef:zf,useState:function(){return Qu(oo)},useDebugValue:tc,useDeferredValue:function(n){var s=rn();return Yf(s,et.memoizedState,n)},useTransition:function(){var n=Qu(oo)[0],s=rn().memoizedState;return[n,s]},useMutableSource:Af,useSyncExternalStore:Mf,useId:Vf,unstable_isNewReconciler:!1},ry={readContext:nn,useCallback:Xf,useContext:nn,useEffect:ec,useImperativeHandle:jf,useInsertionEffect:Uf,useLayoutEffect:bf,useMemo:Bf,useReducer:Ju,useRef:zf,useState:function(){return Ju(oo)},useDebugValue:tc,useDeferredValue:function(n){var s=rn();return et===null?s.memoizedState=n:Yf(s,et.memoizedState,n)},useTransition:function(){var n=Ju(oo)[0],s=rn().memoizedState;return[n,s]},useMutableSource:Af,useSyncExternalStore:Mf,useId:Vf,unstable_isNewReconciler:!1};function vn(n,s){if(n&&n.defaultProps){s=G({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function nc(n,s,a,h){s=n.memoizedState,a=a(h,s),a=a==null?s:G({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var zl={isMounted:function(n){return(n=n._reactInternals)?ir(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var h=Lt(),f=ki(n),m=Jn(h,f);m.payload=s,a!=null&&(m.callback=a),s=Li(n,m,f),s!==null&&(Sn(s,n,f,h),Al(s,n,f))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var h=Lt(),f=ki(n),m=Jn(h,f);m.tag=1,m.payload=s,a!=null&&(m.callback=a),s=Li(n,m,f),s!==null&&(Sn(s,n,f,h),Al(s,n,f))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=Lt(),h=ki(n),f=Jn(a,h);f.tag=2,s!=null&&(f.callback=s),s=Li(n,f,h),s!==null&&(Sn(s,n,h,a),Al(s,n,h))}};function $f(n,s,a,h,f,m,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,m,E):s.prototype&&s.prototype.isPureReactComponent?!Ks(a,h)||!Ks(f,m):!0}function qf(n,s,a){var h=!1,f=Ri,m=s.contextType;return typeof m=="object"&&m!==null?m=nn(m):(f=kt(s)?sr:_t.current,h=s.contextTypes,m=(h=h!=null)?br(n,f):Ri),s=new s(a,m),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=zl,n.stateNode=s,s._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=m),s}function Qf(n,s,a,h){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,h),s.state!==n&&zl.enqueueReplaceState(s,s.state,null)}function ic(n,s,a,h){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},Xu(n);var m=s.contextType;typeof m=="object"&&m!==null?f.context=nn(m):(m=kt(s)?sr:_t.current,f.context=br(n,m)),f.state=n.memoizedState,m=s.getDerivedStateFromProps,typeof m=="function"&&(nc(n,s,m,a),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&zl.enqueueReplaceState(f,f.state,null),Ml(n,a,f,h),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function Zr(n,s){try{var a="",h=s;do a+=ue(h),h=h.return;while(h);var f=a}catch(m){f=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:s,stack:f,digest:null}}function rc(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function sc(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var sy=typeof WeakMap=="function"?WeakMap:Map;function Jf(n,s,a){a=Jn(-1,a),a.tag=3,a.payload={element:null};var h=s.value;return a.callback=function(){Bl||(Bl=!0,vc=h),sc(n,s)},a}function eg(n,s,a){a=Jn(-1,a),a.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var f=s.value;a.payload=function(){return h(f)},a.callback=function(){sc(n,s)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){sc(n,s),typeof h!="function"&&(Mi===null?Mi=new Set([this]):Mi.add(this));var E=s.stack;this.componentDidCatch(s.value,{componentStack:E!==null?E:""})}),a}function tg(n,s,a){var h=n.pingCache;if(h===null){h=n.pingCache=new sy;var f=new Set;h.set(s,f)}else f=h.get(s),f===void 0&&(f=new Set,h.set(s,f));f.has(a)||(f.add(a),n=Ey.bind(null,n,s,a),s.then(n,n))}function ng(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function ig(n,s,a,h,f){return n.mode&1?(n.flags|=65536,n.lanes=f,n):(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Jn(-1,1),s.tag=2,Li(a,s,1))),a.lanes|=1),n)}var oy=A.ReactCurrentOwner,Dt=!1;function It(n,s,a,h){s.child=n===null?Sf(s,null,a,h):Br(s,n.child,a,h)}function rg(n,s,a,h,f){a=a.render;var m=s.ref;return Vr(s,f),h=$u(n,s,a,h,m,f),a=qu(),n!==null&&!Dt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,ei(n,s,f)):(je&&a&&Du(s),s.flags|=1,It(n,s,h,f),s.child)}function sg(n,s,a,h,f){if(n===null){var m=a.type;return typeof m=="function"&&!Ic(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=m,og(n,s,m,h,f)):(n=$l(a.type,null,h,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,!(n.lanes&f)){var E=m.memoizedProps;if(a=a.compare,a=a!==null?a:Ks,a(E,h)&&n.ref===s.ref)return ei(n,s,f)}return s.flags|=1,n=Oi(m,h),n.ref=s.ref,n.return=s,s.child=n}function og(n,s,a,h,f){if(n!==null){var m=n.memoizedProps;if(Ks(m,h)&&n.ref===s.ref)if(Dt=!1,s.pendingProps=h=m,(n.lanes&f)!==0)n.flags&131072&&(Dt=!0);else return s.lanes=n.lanes,ei(n,s,f)}return oc(n,s,a,h,f)}function lg(n,s,a){var h=s.pendingProps,f=h.children,m=n!==null?n.memoizedState:null;if(h.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge($r,Ht),Ht|=a;else{if(!(a&1073741824))return n=m!==null?m.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Ge($r,Ht),Ht|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=m!==null?m.baseLanes:a,Ge($r,Ht),Ht|=h}else m!==null?(h=m.baseLanes|a,s.memoizedState=null):h=a,Ge($r,Ht),Ht|=h;return It(n,s,f,a),s.child}function ag(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function oc(n,s,a,h,f){var m=kt(a)?sr:_t.current;return m=br(s,m),Vr(s,f),a=$u(n,s,a,h,m,f),h=qu(),n!==null&&!Dt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,ei(n,s,f)):(je&&h&&Du(s),s.flags|=1,It(n,s,a,f),s.child)}function ug(n,s,a,h,f){if(kt(a)){var m=!0;xl(s)}else m=!1;if(Vr(s,f),s.stateNode===null)Ul(n,s),qf(s,a,h),ic(s,a,h,f),h=!0;else if(n===null){var E=s.stateNode,C=s.memoizedProps;E.props=C;var L=E.context,F=a.contextType;typeof F=="object"&&F!==null?F=nn(F):(F=kt(a)?sr:_t.current,F=br(s,F));var V=a.getDerivedStateFromProps,H=typeof V=="function"||typeof E.getSnapshotBeforeUpdate=="function";H||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(C!==h||L!==F)&&Qf(s,E,h,F),Ii=!1;var Y=s.memoizedState;E.state=Y,Ml(s,h,E,f),L=s.memoizedState,C!==h||Y!==L||Pt.current||Ii?(typeof V=="function"&&(nc(s,a,V,h),L=s.memoizedState),(C=Ii||$f(s,a,C,h,Y,L,F))?(H||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(s.flags|=4194308)):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=L),E.props=h,E.state=L,E.context=F,h=C):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{E=s.stateNode,Rf(n,s),C=s.memoizedProps,F=s.type===s.elementType?C:vn(s.type,C),E.props=F,H=s.pendingProps,Y=E.context,L=a.contextType,typeof L=="object"&&L!==null?L=nn(L):(L=kt(a)?sr:_t.current,L=br(s,L));var se=a.getDerivedStateFromProps;(V=typeof se=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(C!==H||Y!==L)&&Qf(s,E,h,L),Ii=!1,Y=s.memoizedState,E.state=Y,Ml(s,h,E,f);var ae=s.memoizedState;C!==H||Y!==ae||Pt.current||Ii?(typeof se=="function"&&(nc(s,a,se,h),ae=s.memoizedState),(F=Ii||$f(s,a,F,h,Y,ae,L)||!1)?(V||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,ae,L),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,ae,L)),typeof E.componentDidUpdate=="function"&&(s.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof E.componentDidUpdate!="function"||C===n.memoizedProps&&Y===n.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&Y===n.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=ae),E.props=h,E.state=ae,E.context=L,h=F):(typeof E.componentDidUpdate!="function"||C===n.memoizedProps&&Y===n.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&Y===n.memoizedState||(s.flags|=1024),h=!1)}return lc(n,s,a,h,m,f)}function lc(n,s,a,h,f,m){ag(n,s);var E=(s.flags&128)!==0;if(!h&&!E)return f&&gf(s,a,!1),ei(n,s,m);h=s.stateNode,oy.current=s;var C=E&&typeof a.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,n!==null&&E?(s.child=Br(s,n.child,null,m),s.child=Br(s,null,C,m)):It(n,s,C,m),s.memoizedState=h.state,f&&gf(s,a,!0),s.child}function cg(n){var s=n.stateNode;s.pendingContext?df(n,s.pendingContext,s.pendingContext!==s.context):s.context&&df(n,s.context,!1),Bu(n,s.containerInfo)}function hg(n,s,a,h,f){return Xr(),zu(f),s.flags|=256,It(n,s,a,h),s.child}var ac={dehydrated:null,treeContext:null,retryLane:0};function uc(n){return{baseLanes:n,cachePool:null,transitions:null}}function dg(n,s,a){var h=s.pendingProps,f=Xe.current,m=!1,E=(s.flags&128)!==0,C;if((C=E)||(C=n!==null&&n.memoizedState===null?!1:(f&2)!==0),C?(m=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),Ge(Xe,f&1),n===null)return Nu(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(s.mode&1?n.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(E=h.children,n=h.fallback,m?(h=s.mode,m=s.child,E={mode:"hidden",children:E},!(h&1)&&m!==null?(m.childLanes=0,m.pendingProps=E):m=ql(E,h,0,null),n=pr(n,h,a,null),m.return=s,n.return=s,m.sibling=n,s.child=m,s.child.memoizedState=uc(a),s.memoizedState=ac,n):cc(s,E));if(f=n.memoizedState,f!==null&&(C=f.dehydrated,C!==null))return ly(n,s,E,h,C,f,a);if(m){m=h.fallback,E=s.mode,f=n.child,C=f.sibling;var L={mode:"hidden",children:h.children};return!(E&1)&&s.child!==f?(h=s.child,h.childLanes=0,h.pendingProps=L,s.deletions=null):(h=Oi(f,L),h.subtreeFlags=f.subtreeFlags&14680064),C!==null?m=Oi(C,m):(m=pr(m,E,a,null),m.flags|=2),m.return=s,h.return=s,h.sibling=m,s.child=h,h=m,m=s.child,E=n.child.memoizedState,E=E===null?uc(a):{baseLanes:E.baseLanes|a,cachePool:null,transitions:E.transitions},m.memoizedState=E,m.childLanes=n.childLanes&~a,s.memoizedState=ac,h}return m=n.child,n=m.sibling,h=Oi(m,{mode:"visible",children:h.children}),!(s.mode&1)&&(h.lanes=a),h.return=s,h.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=h,s.memoizedState=null,h}function cc(n,s){return s=ql({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Gl(n,s,a,h){return h!==null&&zu(h),Br(s,n.child,null,a),n=cc(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function ly(n,s,a,h,f,m,E){if(a)return s.flags&256?(s.flags&=-257,h=rc(Error(t(422))),Gl(n,s,E,h)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(m=h.fallback,f=s.mode,h=ql({mode:"visible",children:h.children},f,0,null),m=pr(m,f,E,null),m.flags|=2,h.return=s,m.return=s,h.sibling=m,s.child=h,s.mode&1&&Br(s,n.child,null,E),s.child.memoizedState=uc(E),s.memoizedState=ac,m);if(!(s.mode&1))return Gl(n,s,E,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var C=h.dgst;return h=C,m=Error(t(419)),h=rc(m,h,void 0),Gl(n,s,E,h)}if(C=(E&n.childLanes)!==0,Dt||C){if(h=rt,h!==null){switch(E&-E){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=f&(h.suspendedLanes|E)?0:f,f!==0&&f!==m.retryLane&&(m.retryLane=f,Qn(n,f),Sn(h,n,f,-1))}return Tc(),h=rc(Error(t(421))),Gl(n,s,E,h)}return f.data==="$?"?(s.flags|=128,s.child=n.child,s=vy.bind(null,n),f._reactRetry=s,null):(n=m.treeContext,Zt=Si(f.nextSibling),Kt=s,je=!0,En=null,n!==null&&(en[tn++]=$n,en[tn++]=qn,en[tn++]=or,$n=n.id,qn=n.overflow,or=s),s=cc(s,h.children),s.flags|=4096,s)}function fg(n,s,a){n.lanes|=s;var h=n.alternate;h!==null&&(h.lanes|=s),Wu(n.return,s,a)}function hc(n,s,a,h,f){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:f}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=h,m.tail=a,m.tailMode=f)}function gg(n,s,a){var h=s.pendingProps,f=h.revealOrder,m=h.tail;if(It(n,s,h.children,a),h=Xe.current,h&2)h=h&1|2,s.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&fg(n,a,s);else if(n.tag===19)fg(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(Ge(Xe,h),!(s.mode&1))s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&Pl(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),hc(s,!1,f,a,m);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&Pl(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}hc(s,!0,a,null,m);break;case"together":hc(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ul(n,s){!(s.mode&1)&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function ei(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),hr|=s.lanes,!(a&s.childLanes))return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=Oi(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Oi(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function ay(n,s,a){switch(s.tag){case 3:cg(s),Xr();break;case 5:Lf(s);break;case 1:kt(s.type)&&xl(s);break;case 4:Bu(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,f=s.memoizedProps.value;Ge(Il,h._currentValue),h._currentValue=f;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Ge(Xe,Xe.current&1),s.flags|=128,null):a&s.child.childLanes?dg(n,s,a):(Ge(Xe,Xe.current&1),n=ei(n,s,a),n!==null?n.sibling:null);Ge(Xe,Xe.current&1);break;case 19:if(h=(a&s.childLanes)!==0,n.flags&128){if(h)return gg(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ge(Xe,Xe.current),h)break;return null;case 22:case 23:return s.lanes=0,lg(n,s,a)}return ei(n,s,a)}var pg,dc,mg,_g;pg=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},dc=function(){},mg=function(n,s,a,h){var f=n.memoizedProps;if(f!==h){n=s.stateNode,ur(Nn.current);var m=null;switch(a){case"input":f=Bn(n,f),h=Bn(n,h),m=[];break;case"select":f=G({},f,{value:void 0}),h=G({},h,{value:void 0}),m=[];break;case"textarea":f=gn(n,f),h=gn(n,h),m=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=yl)}Lr(a,h);var E;a=null;for(F in f)if(!h.hasOwnProperty(F)&&f.hasOwnProperty(F)&&f[F]!=null)if(F==="style"){var C=f[F];for(E in C)C.hasOwnProperty(E)&&(a||(a={}),a[E]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(o.hasOwnProperty(F)?m||(m=[]):(m=m||[]).push(F,null));for(F in h){var L=h[F];if(C=f!=null?f[F]:void 0,h.hasOwnProperty(F)&&L!==C&&(L!=null||C!=null))if(F==="style")if(C){for(E in C)!C.hasOwnProperty(E)||L&&L.hasOwnProperty(E)||(a||(a={}),a[E]="");for(E in L)L.hasOwnProperty(E)&&C[E]!==L[E]&&(a||(a={}),a[E]=L[E])}else a||(m||(m=[]),m.push(F,a)),a=L;else F==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,C=C?C.__html:void 0,L!=null&&C!==L&&(m=m||[]).push(F,L)):F==="children"?typeof L!="string"&&typeof L!="number"||(m=m||[]).push(F,""+L):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(o.hasOwnProperty(F)?(L!=null&&F==="onScroll"&&be("scroll",n),m||C===L||(m=[])):(m=m||[]).push(F,L))}a&&(m=m||[]).push("style",a);var F=m;(s.updateQueue=F)&&(s.flags|=4)}},_g=function(n,s,a,h){a!==h&&(s.flags|=4)};function ao(n,s){if(!je)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function Et(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,h=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=h,n.childLanes=a,s}function uy(n,s,a){var h=s.pendingProps;switch(Ou(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(s),null;case 1:return kt(s.type)&&vl(),Et(s),null;case 3:return h=s.stateNode,Kr(),We(Pt),We(_t),Ku(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(Rl(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,En!==null&&(Sc(En),En=null))),dc(n,s),Et(s),null;case 5:Yu(s);var f=ur(io.current);if(a=s.type,n!==null&&s.stateNode!=null)mg(n,s,a,h,f),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return Et(s),null}if(n=ur(Nn.current),Rl(s)){h=s.stateNode,a=s.type;var m=s.memoizedProps;switch(h[Fn]=s,h[Qs]=m,n=(s.mode&1)!==0,a){case"dialog":be("cancel",h),be("close",h);break;case"iframe":case"object":case"embed":be("load",h);break;case"video":case"audio":for(f=0;f<Hs.length;f++)be(Hs[f],h);break;case"source":be("error",h);break;case"img":case"image":case"link":be("error",h),be("load",h);break;case"details":be("toggle",h);break;case"input":Pn(h,m),be("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!m.multiple},be("invalid",h);break;case"textarea":Yn(h,m),be("invalid",h)}Lr(a,m),f=null;for(var E in m)if(m.hasOwnProperty(E)){var C=m[E];E==="children"?typeof C=="string"?h.textContent!==C&&(m.suppressHydrationWarning!==!0&&_l(h.textContent,C,n),f=["children",C]):typeof C=="number"&&h.textContent!==""+C&&(m.suppressHydrationWarning!==!0&&_l(h.textContent,C,n),f=["children",""+C]):o.hasOwnProperty(E)&&C!=null&&E==="onScroll"&&be("scroll",h)}switch(a){case"input":St(h),Yt(h,m,!0);break;case"textarea":St(h),Ze(h);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(h.onclick=yl)}h=f,s.updateQueue=h,h!==null&&(s.flags|=4)}else{E=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Tr(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=E.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=E.createElement(a,{is:h.is}):(n=E.createElement(a),a==="select"&&(E=n,h.multiple?E.multiple=!0:h.size&&(E.size=h.size))):n=E.createElementNS(n,a),n[Fn]=s,n[Qs]=h,pg(n,s,!1,!1),s.stateNode=n;e:{switch(E=Ar(a,h),a){case"dialog":be("cancel",n),be("close",n),f=h;break;case"iframe":case"object":case"embed":be("load",n),f=h;break;case"video":case"audio":for(f=0;f<Hs.length;f++)be(Hs[f],n);f=h;break;case"source":be("error",n),f=h;break;case"img":case"image":case"link":be("error",n),be("load",n),f=h;break;case"details":be("toggle",n),f=h;break;case"input":Pn(n,h),f=Bn(n,h),be("invalid",n);break;case"option":f=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},f=G({},h,{value:void 0}),be("invalid",n);break;case"textarea":Yn(n,h),f=gn(n,h),be("invalid",n);break;default:f=h}Lr(a,f),C=f;for(m in C)if(C.hasOwnProperty(m)){var L=C[m];m==="style"?Qo(n,L):m==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&er(n,L)):m==="children"?typeof L=="string"?(a!=="textarea"||L!=="")&&tr(n,L):typeof L=="number"&&tr(n,""+L):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?L!=null&&m==="onScroll"&&be("scroll",n):L!=null&&O(n,m,L,E))}switch(a){case"input":St(n),Yt(n,h,!1);break;case"textarea":St(n),Ze(n);break;case"option":h.value!=null&&n.setAttribute("value",""+ve(h.value));break;case"select":n.multiple=!!h.multiple,m=h.value,m!=null?Qt(n,!!h.multiple,m,!1):h.defaultValue!=null&&Qt(n,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=yl)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Et(s),null;case 6:if(n&&s.stateNode!=null)_g(n,s,n.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(a=ur(io.current),ur(Nn.current),Rl(s)){if(h=s.stateNode,a=s.memoizedProps,h[Fn]=s,(m=h.nodeValue!==a)&&(n=Kt,n!==null))switch(n.tag){case 3:_l(h.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&_l(h.nodeValue,a,(n.mode&1)!==0)}m&&(s.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[Fn]=s,s.stateNode=h}return Et(s),null;case 13:if(We(Xe),h=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(je&&Zt!==null&&s.mode&1&&!(s.flags&128))vf(),Xr(),s.flags|=98560,m=!1;else if(m=Rl(s),h!==null&&h.dehydrated!==null){if(n===null){if(!m)throw Error(t(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[Fn]=s}else Xr(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Et(s),m=!1}else En!==null&&(Sc(En),En=null),m=!0;if(!m)return s.flags&65536?s:null}return s.flags&128?(s.lanes=a,s):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(s.child.flags|=8192,s.mode&1&&(n===null||Xe.current&1?tt===0&&(tt=3):Tc())),s.updateQueue!==null&&(s.flags|=4),Et(s),null);case 4:return Kr(),dc(n,s),n===null&&$s(s.stateNode.containerInfo),Et(s),null;case 10:return bu(s.type._context),Et(s),null;case 17:return kt(s.type)&&vl(),Et(s),null;case 19:if(We(Xe),m=s.memoizedState,m===null)return Et(s),null;if(h=(s.flags&128)!==0,E=m.rendering,E===null)if(h)ao(m,!1);else{if(tt!==0||n!==null&&n.flags&128)for(n=s.child;n!==null;){if(E=Pl(n),E!==null){for(s.flags|=128,ao(m,!1),h=E.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=a,a=s.child;a!==null;)m=a,n=h,m.flags&=14680066,E=m.alternate,E===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=E.childLanes,m.lanes=E.lanes,m.child=E.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=E.memoizedProps,m.memoizedState=E.memoizedState,m.updateQueue=E.updateQueue,m.type=E.type,n=E.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ge(Xe,Xe.current&1|2),s.child}n=n.sibling}m.tail!==null&&He()>qr&&(s.flags|=128,h=!0,ao(m,!1),s.lanes=4194304)}else{if(!h)if(n=Pl(E),n!==null){if(s.flags|=128,h=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),ao(m,!0),m.tail===null&&m.tailMode==="hidden"&&!E.alternate&&!je)return Et(s),null}else 2*He()-m.renderingStartTime>qr&&a!==1073741824&&(s.flags|=128,h=!0,ao(m,!1),s.lanes=4194304);m.isBackwards?(E.sibling=s.child,s.child=E):(a=m.last,a!==null?a.sibling=E:s.child=E,m.last=E)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=He(),s.sibling=null,a=Xe.current,Ge(Xe,h?a&1|2:a&1),s):(Et(s),null);case 22:case 23:return Rc(),h=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(s.flags|=8192),h&&s.mode&1?Ht&1073741824&&(Et(s),s.subtreeFlags&6&&(s.flags|=8192)):Et(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function cy(n,s){switch(Ou(s),s.tag){case 1:return kt(s.type)&&vl(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Kr(),We(Pt),We(_t),Ku(),n=s.flags,n&65536&&!(n&128)?(s.flags=n&-65537|128,s):null;case 5:return Yu(s),null;case 13:if(We(Xe),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Xr()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return We(Xe),null;case 4:return Kr(),null;case 10:return bu(s.type._context),null;case 22:case 23:return Rc(),null;case 24:return null;default:return null}}var bl=!1,vt=!1,hy=typeof WeakSet=="function"?WeakSet:Set,le=null;function Hr(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){Ye(n,s,h)}else a.current=null}function fc(n,s,a){try{a()}catch(h){Ye(n,s,h)}}var yg=!1;function dy(n,s){if(Ru=ol,n=Hd(),_u(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var f=h.anchorOffset,m=h.focusNode;h=h.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var E=0,C=-1,L=-1,F=0,V=0,H=n,Y=null;t:for(;;){for(var se;H!==a||f!==0&&H.nodeType!==3||(C=E+f),H!==m||h!==0&&H.nodeType!==3||(L=E+h),H.nodeType===3&&(E+=H.nodeValue.length),(se=H.firstChild)!==null;)Y=H,H=se;for(;;){if(H===n)break t;if(Y===a&&++F===f&&(C=E),Y===m&&++V===h&&(L=E),(se=H.nextSibling)!==null)break;H=Y,Y=H.parentNode}H=se}a=C===-1||L===-1?null:{start:C,end:L}}else a=null}a=a||{start:0,end:0}}else a=null;for(Tu={focusedElem:n,selectionRange:a},ol=!1,le=s;le!==null;)if(s=le,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,le=n;else for(;le!==null;){s=le;try{var ae=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ae!==null){var ce=ae.memoizedProps,$e=ae.memoizedState,k=s.stateNode,M=k.getSnapshotBeforeUpdate(s.elementType===s.type?ce:vn(s.type,ce),$e);k.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var D=s.stateNode.containerInfo;D.nodeType===1?D.textContent="":D.nodeType===9&&D.documentElement&&D.removeChild(D.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Q){Ye(s,s.return,Q)}if(n=s.sibling,n!==null){n.return=s.return,le=n;break}le=s.return}return ae=yg,yg=!1,ae}function uo(n,s,a){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&n)===n){var m=f.destroy;f.destroy=void 0,m!==void 0&&fc(s,a,m)}f=f.next}while(f!==h)}}function Wl(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var h=a.create;a.destroy=h()}a=a.next}while(a!==s)}}function gc(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function Eg(n){var s=n.alternate;s!==null&&(n.alternate=null,Eg(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Fn],delete s[Qs],delete s[Mu],delete s[Z0],delete s[H0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function vg(n){return n.tag===5||n.tag===3||n.tag===4}function xg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||vg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function pc(n,s,a){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=yl));else if(h!==4&&(n=n.child,n!==null))for(pc(n,s,a),n=n.sibling;n!==null;)pc(n,s,a),n=n.sibling}function mc(n,s,a){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(mc(n,s,a),n=n.sibling;n!==null;)mc(n,s,a),n=n.sibling}var ut=null,xn=!1;function Ai(n,s,a){for(a=a.child;a!==null;)wg(n,s,a),a=a.sibling}function wg(n,s,a){if(On&&typeof On.onCommitFiberUnmount=="function")try{On.onCommitFiberUnmount(el,a)}catch{}switch(a.tag){case 5:vt||Hr(a,s);case 6:var h=ut,f=xn;ut=null,Ai(n,s,a),ut=h,xn=f,ut!==null&&(xn?(n=ut,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):ut.removeChild(a.stateNode));break;case 18:ut!==null&&(xn?(n=ut,a=a.stateNode,n.nodeType===8?Au(n.parentNode,a):n.nodeType===1&&Au(n,a),Ws(n)):Au(ut,a.stateNode));break;case 4:h=ut,f=xn,ut=a.stateNode.containerInfo,xn=!0,Ai(n,s,a),ut=h,xn=f;break;case 0:case 11:case 14:case 15:if(!vt&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var m=f,E=m.destroy;m=m.tag,E!==void 0&&(m&2||m&4)&&fc(a,s,E),f=f.next}while(f!==h)}Ai(n,s,a);break;case 1:if(!vt&&(Hr(a,s),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(C){Ye(a,s,C)}Ai(n,s,a);break;case 21:Ai(n,s,a);break;case 22:a.mode&1?(vt=(h=vt)||a.memoizedState!==null,Ai(n,s,a),vt=h):Ai(n,s,a);break;default:Ai(n,s,a)}}function Sg(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new hy),s.forEach(function(h){var f=xy.bind(null,n,h);a.has(h)||(a.add(h),h.then(f,f))})}}function wn(n,s){var a=s.deletions;if(a!==null)for(var h=0;h<a.length;h++){var f=a[h];try{var m=n,E=s,C=E;e:for(;C!==null;){switch(C.tag){case 5:ut=C.stateNode,xn=!1;break e;case 3:ut=C.stateNode.containerInfo,xn=!0;break e;case 4:ut=C.stateNode.containerInfo,xn=!0;break e}C=C.return}if(ut===null)throw Error(t(160));wg(m,E,f),ut=null,xn=!1;var L=f.alternate;L!==null&&(L.return=null),f.return=null}catch(F){Ye(f,s,F)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Cg(s,n),s=s.sibling}function Cg(n,s){var a=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(wn(s,n),Gn(n),h&4){try{uo(3,n,n.return),Wl(3,n)}catch(ce){Ye(n,n.return,ce)}try{uo(5,n,n.return)}catch(ce){Ye(n,n.return,ce)}}break;case 1:wn(s,n),Gn(n),h&512&&a!==null&&Hr(a,a.return);break;case 5:if(wn(s,n),Gn(n),h&512&&a!==null&&Hr(a,a.return),n.flags&32){var f=n.stateNode;try{tr(f,"")}catch(ce){Ye(n,n.return,ce)}}if(h&4&&(f=n.stateNode,f!=null)){var m=n.memoizedProps,E=a!==null?a.memoizedProps:m,C=n.type,L=n.updateQueue;if(n.updateQueue=null,L!==null)try{C==="input"&&m.type==="radio"&&m.name!=null&&$t(f,m),Ar(C,E);var F=Ar(C,m);for(E=0;E<L.length;E+=2){var V=L[E],H=L[E+1];V==="style"?Qo(f,H):V==="dangerouslySetInnerHTML"?er(f,H):V==="children"?tr(f,H):O(f,V,H,F)}switch(C){case"input":gt(f,m);break;case"textarea":Vn(f,m);break;case"select":var Y=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!m.multiple;var se=m.value;se!=null?Qt(f,!!m.multiple,se,!1):Y!==!!m.multiple&&(m.defaultValue!=null?Qt(f,!!m.multiple,m.defaultValue,!0):Qt(f,!!m.multiple,m.multiple?[]:"",!1))}f[Qs]=m}catch(ce){Ye(n,n.return,ce)}}break;case 6:if(wn(s,n),Gn(n),h&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,m=n.memoizedProps;try{f.nodeValue=m}catch(ce){Ye(n,n.return,ce)}}break;case 3:if(wn(s,n),Gn(n),h&4&&a!==null&&a.memoizedState.isDehydrated)try{Ws(s.containerInfo)}catch(ce){Ye(n,n.return,ce)}break;case 4:wn(s,n),Gn(n);break;case 13:wn(s,n),Gn(n),f=n.child,f.flags&8192&&(m=f.memoizedState!==null,f.stateNode.isHidden=m,!m||f.alternate!==null&&f.alternate.memoizedState!==null||(Ec=He())),h&4&&Sg(n);break;case 22:if(V=a!==null&&a.memoizedState!==null,n.mode&1?(vt=(F=vt)||V,wn(s,n),vt=F):wn(s,n),Gn(n),h&8192){if(F=n.memoizedState!==null,(n.stateNode.isHidden=F)&&!V&&n.mode&1)for(le=n,V=n.child;V!==null;){for(H=le=V;le!==null;){switch(Y=le,se=Y.child,Y.tag){case 0:case 11:case 14:case 15:uo(4,Y,Y.return);break;case 1:Hr(Y,Y.return);var ae=Y.stateNode;if(typeof ae.componentWillUnmount=="function"){h=Y,a=Y.return;try{s=h,ae.props=s.memoizedProps,ae.state=s.memoizedState,ae.componentWillUnmount()}catch(ce){Ye(h,a,ce)}}break;case 5:Hr(Y,Y.return);break;case 22:if(Y.memoizedState!==null){Ig(H);continue}}se!==null?(se.return=Y,le=se):Ig(H)}V=V.sibling}e:for(V=null,H=n;;){if(H.tag===5){if(V===null){V=H;try{f=H.stateNode,F?(m=f.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(C=H.stateNode,L=H.memoizedProps.style,E=L!=null&&L.hasOwnProperty("display")?L.display:null,C.style.display=Ir("display",E))}catch(ce){Ye(n,n.return,ce)}}}else if(H.tag===6){if(V===null)try{H.stateNode.nodeValue=F?"":H.memoizedProps}catch(ce){Ye(n,n.return,ce)}}else if((H.tag!==22&&H.tag!==23||H.memoizedState===null||H===n)&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===n)break e;for(;H.sibling===null;){if(H.return===null||H.return===n)break e;V===H&&(V=null),H=H.return}V===H&&(V=null),H.sibling.return=H.return,H=H.sibling}}break;case 19:wn(s,n),Gn(n),h&4&&Sg(n);break;case 21:break;default:wn(s,n),Gn(n)}}function Gn(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(vg(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(tr(f,""),h.flags&=-33);var m=xg(n);mc(n,m,f);break;case 3:case 4:var E=h.stateNode.containerInfo,C=xg(n);pc(n,C,E);break;default:throw Error(t(161))}}catch(L){Ye(n,n.return,L)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function fy(n,s,a){le=n,Rg(n)}function Rg(n,s,a){for(var h=(n.mode&1)!==0;le!==null;){var f=le,m=f.child;if(f.tag===22&&h){var E=f.memoizedState!==null||bl;if(!E){var C=f.alternate,L=C!==null&&C.memoizedState!==null||vt;C=bl;var F=vt;if(bl=E,(vt=L)&&!F)for(le=f;le!==null;)E=le,L=E.child,E.tag===22&&E.memoizedState!==null?Lg(f):L!==null?(L.return=E,le=L):Lg(f);for(;m!==null;)le=m,Rg(m),m=m.sibling;le=f,bl=C,vt=F}Tg(n)}else f.subtreeFlags&8772&&m!==null?(m.return=f,le=m):Tg(n)}}function Tg(n){for(;le!==null;){var s=le;if(s.flags&8772){var a=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:vt||Wl(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!vt)if(a===null)h.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:vn(s.type,a.memoizedProps);h.componentDidUpdate(f,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var m=s.updateQueue;m!==null&&If(s,m,h);break;case 3:var E=s.updateQueue;if(E!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}If(s,E,a)}break;case 5:var C=s.stateNode;if(a===null&&s.flags&4){a=C;var L=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&a.focus();break;case"img":L.src&&(a.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var F=s.alternate;if(F!==null){var V=F.memoizedState;if(V!==null){var H=V.dehydrated;H!==null&&Ws(H)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}vt||s.flags&512&&gc(s)}catch(Y){Ye(s,s.return,Y)}}if(s===n){le=null;break}if(a=s.sibling,a!==null){a.return=s.return,le=a;break}le=s.return}}function Ig(n){for(;le!==null;){var s=le;if(s===n){le=null;break}var a=s.sibling;if(a!==null){a.return=s.return,le=a;break}le=s.return}}function Lg(n){for(;le!==null;){var s=le;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Wl(4,s)}catch(L){Ye(s,a,L)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var f=s.return;try{h.componentDidMount()}catch(L){Ye(s,f,L)}}var m=s.return;try{gc(s)}catch(L){Ye(s,m,L)}break;case 5:var E=s.return;try{gc(s)}catch(L){Ye(s,E,L)}}}catch(L){Ye(s,s.return,L)}if(s===n){le=null;break}var C=s.sibling;if(C!==null){C.return=s.return,le=C;break}le=s.return}}var gy=Math.ceil,jl=A.ReactCurrentDispatcher,_c=A.ReactCurrentOwner,sn=A.ReactCurrentBatchConfig,Te=0,rt=null,Qe=null,ct=0,Ht=0,$r=Ci(0),tt=0,co=null,hr=0,Xl=0,yc=0,ho=null,Ot=null,Ec=0,qr=1/0,ti=null,Bl=!1,vc=null,Mi=null,Yl=!1,Pi=null,Vl=0,fo=0,xc=null,Kl=-1,Zl=0;function Lt(){return Te&6?He():Kl!==-1?Kl:Kl=He()}function ki(n){return n.mode&1?Te&2&&ct!==0?ct&-ct:q0.transition!==null?(Zl===0&&(Zl=vd()),Zl):(n=Oe,n!==0||(n=window.event,n=n===void 0?16:Ad(n.type)),n):1}function Sn(n,s,a,h){if(50<fo)throw fo=0,xc=null,Error(t(185));Ns(n,a,h),(!(Te&2)||n!==rt)&&(n===rt&&(!(Te&2)&&(Xl|=a),tt===4&&Di(n,ct)),Ft(n,h),a===1&&Te===0&&!(s.mode&1)&&(qr=He()+500,wl&&Ti()))}function Ft(n,s){var a=n.callbackNode;q_(n,s);var h=il(n,n===rt?ct:0);if(h===0)a!==null&&_d(a),n.callbackNode=null,n.callbackPriority=0;else if(s=h&-h,n.callbackPriority!==s){if(a!=null&&_d(a),s===1)n.tag===0?$0(Mg.bind(null,n)):pf(Mg.bind(null,n)),V0(function(){!(Te&6)&&Ti()}),a=null;else{switch(xd(h)){case 1:a=eu;break;case 4:a=yd;break;case 16:a=Jo;break;case 536870912:a=Ed;break;default:a=Jo}a=Gg(a,Ag.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function Ag(n,s){if(Kl=-1,Zl=0,Te&6)throw Error(t(327));var a=n.callbackNode;if(Qr()&&n.callbackNode!==a)return null;var h=il(n,n===rt?ct:0);if(h===0)return null;if(h&30||h&n.expiredLanes||s)s=Hl(n,h);else{s=h;var f=Te;Te|=2;var m=kg();(rt!==n||ct!==s)&&(ti=null,qr=He()+500,fr(n,s));do try{_y();break}catch(C){Pg(n,C)}while(!0);Uu(),jl.current=m,Te=f,Qe!==null?s=0:(rt=null,ct=0,s=tt)}if(s!==0){if(s===2&&(f=tu(n),f!==0&&(h=f,s=wc(n,f))),s===1)throw a=co,fr(n,0),Di(n,h),Ft(n,He()),a;if(s===6)Di(n,h);else{if(f=n.current.alternate,!(h&30)&&!py(f)&&(s=Hl(n,h),s===2&&(m=tu(n),m!==0&&(h=m,s=wc(n,m))),s===1))throw a=co,fr(n,0),Di(n,h),Ft(n,He()),a;switch(n.finishedWork=f,n.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:gr(n,Ot,ti);break;case 3:if(Di(n,h),(h&130023424)===h&&(s=Ec+500-He(),10<s)){if(il(n,0)!==0)break;if(f=n.suspendedLanes,(f&h)!==h){Lt(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=Lu(gr.bind(null,n,Ot,ti),s);break}gr(n,Ot,ti);break;case 4:if(Di(n,h),(h&4194240)===h)break;for(s=n.eventTimes,f=-1;0<h;){var E=31-_n(h);m=1<<E,E=s[E],E>f&&(f=E),h&=~m}if(h=f,h=He()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*gy(h/1960))-h,10<h){n.timeoutHandle=Lu(gr.bind(null,n,Ot,ti),h);break}gr(n,Ot,ti);break;case 5:gr(n,Ot,ti);break;default:throw Error(t(329))}}}return Ft(n,He()),n.callbackNode===a?Ag.bind(null,n):null}function wc(n,s){var a=ho;return n.current.memoizedState.isDehydrated&&(fr(n,s).flags|=256),n=Hl(n,s),n!==2&&(s=Ot,Ot=a,s!==null&&Sc(s)),n}function Sc(n){Ot===null?Ot=n:Ot.push.apply(Ot,n)}function py(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var f=a[h],m=f.getSnapshot;f=f.value;try{if(!yn(m(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Di(n,s){for(s&=~yc,s&=~Xl,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-_n(s),h=1<<a;n[a]=-1,s&=~h}}function Mg(n){if(Te&6)throw Error(t(327));Qr();var s=il(n,0);if(!(s&1))return Ft(n,He()),null;var a=Hl(n,s);if(n.tag!==0&&a===2){var h=tu(n);h!==0&&(s=h,a=wc(n,h))}if(a===1)throw a=co,fr(n,0),Di(n,s),Ft(n,He()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,gr(n,Ot,ti),Ft(n,He()),null}function Cc(n,s){var a=Te;Te|=1;try{return n(s)}finally{Te=a,Te===0&&(qr=He()+500,wl&&Ti())}}function dr(n){Pi!==null&&Pi.tag===0&&!(Te&6)&&Qr();var s=Te;Te|=1;var a=sn.transition,h=Oe;try{if(sn.transition=null,Oe=1,n)return n()}finally{Oe=h,sn.transition=a,Te=s,!(Te&6)&&Ti()}}function Rc(){Ht=$r.current,We($r)}function fr(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Y0(a)),Qe!==null)for(a=Qe.return;a!==null;){var h=a;switch(Ou(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&vl();break;case 3:Kr(),We(Pt),We(_t),Ku();break;case 5:Yu(h);break;case 4:Kr();break;case 13:We(Xe);break;case 19:We(Xe);break;case 10:bu(h.type._context);break;case 22:case 23:Rc()}a=a.return}if(rt=n,Qe=n=Oi(n.current,null),ct=Ht=s,tt=0,co=null,yc=Xl=hr=0,Ot=ho=null,ar!==null){for(s=0;s<ar.length;s++)if(a=ar[s],h=a.interleaved,h!==null){a.interleaved=null;var f=h.next,m=a.pending;if(m!==null){var E=m.next;m.next=f,h.next=E}a.pending=h}ar=null}return n}function Pg(n,s){do{var a=Qe;try{if(Uu(),kl.current=Nl,Dl){for(var h=Be.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}Dl=!1}if(cr=0,it=et=Be=null,ro=!1,so=0,_c.current=null,a===null||a.return===null){tt=1,co=s,Qe=null;break}e:{var m=n,E=a.return,C=a,L=s;if(s=ct,C.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var F=L,V=C,H=V.tag;if(!(V.mode&1)&&(H===0||H===11||H===15)){var Y=V.alternate;Y?(V.updateQueue=Y.updateQueue,V.memoizedState=Y.memoizedState,V.lanes=Y.lanes):(V.updateQueue=null,V.memoizedState=null)}var se=ng(E);if(se!==null){se.flags&=-257,ig(se,E,C,m,s),se.mode&1&&tg(m,F,s),s=se,L=F;var ae=s.updateQueue;if(ae===null){var ce=new Set;ce.add(L),s.updateQueue=ce}else ae.add(L);break e}else{if(!(s&1)){tg(m,F,s),Tc();break e}L=Error(t(426))}}else if(je&&C.mode&1){var $e=ng(E);if($e!==null){!($e.flags&65536)&&($e.flags|=256),ig($e,E,C,m,s),zu(Zr(L,C));break e}}m=L=Zr(L,C),tt!==4&&(tt=2),ho===null?ho=[m]:ho.push(m),m=E;do{switch(m.tag){case 3:m.flags|=65536,s&=-s,m.lanes|=s;var k=Jf(m,L,s);Tf(m,k);break e;case 1:C=L;var M=m.type,D=m.stateNode;if(!(m.flags&128)&&(typeof M.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(Mi===null||!Mi.has(D)))){m.flags|=65536,s&=-s,m.lanes|=s;var Q=eg(m,C,s);Tf(m,Q);break e}}m=m.return}while(m!==null)}Og(a)}catch(de){s=de,Qe===a&&a!==null&&(Qe=a=a.return);continue}break}while(!0)}function kg(){var n=jl.current;return jl.current=Nl,n===null?Nl:n}function Tc(){(tt===0||tt===3||tt===2)&&(tt=4),rt===null||!(hr&268435455)&&!(Xl&268435455)||Di(rt,ct)}function Hl(n,s){var a=Te;Te|=2;var h=kg();(rt!==n||ct!==s)&&(ti=null,fr(n,s));do try{my();break}catch(f){Pg(n,f)}while(!0);if(Uu(),Te=a,jl.current=h,Qe!==null)throw Error(t(261));return rt=null,ct=0,tt}function my(){for(;Qe!==null;)Dg(Qe)}function _y(){for(;Qe!==null&&!j_();)Dg(Qe)}function Dg(n){var s=zg(n.alternate,n,Ht);n.memoizedProps=n.pendingProps,s===null?Og(n):Qe=s,_c.current=null}function Og(n){var s=n;do{var a=s.alternate;if(n=s.return,s.flags&32768){if(a=cy(a,s),a!==null){a.flags&=32767,Qe=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{tt=6,Qe=null;return}}else if(a=uy(a,s,Ht),a!==null){Qe=a;return}if(s=s.sibling,s!==null){Qe=s;return}Qe=s=n}while(s!==null);tt===0&&(tt=5)}function gr(n,s,a){var h=Oe,f=sn.transition;try{sn.transition=null,Oe=1,yy(n,s,a,h)}finally{sn.transition=f,Oe=h}return null}function yy(n,s,a,h){do Qr();while(Pi!==null);if(Te&6)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var m=a.lanes|a.childLanes;if(Q_(n,m),n===rt&&(Qe=rt=null,ct=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||Yl||(Yl=!0,Gg(Jo,function(){return Qr(),null})),m=(a.flags&15990)!==0,a.subtreeFlags&15990||m){m=sn.transition,sn.transition=null;var E=Oe;Oe=1;var C=Te;Te|=4,_c.current=null,dy(n,a),Cg(a,n),G0(Tu),ol=!!Ru,Tu=Ru=null,n.current=a,fy(a),X_(),Te=C,Oe=E,sn.transition=m}else n.current=a;if(Yl&&(Yl=!1,Pi=n,Vl=f),m=n.pendingLanes,m===0&&(Mi=null),V_(a.stateNode),Ft(n,He()),s!==null)for(h=n.onRecoverableError,a=0;a<s.length;a++)f=s[a],h(f.value,{componentStack:f.stack,digest:f.digest});if(Bl)throw Bl=!1,n=vc,vc=null,n;return Vl&1&&n.tag!==0&&Qr(),m=n.pendingLanes,m&1?n===xc?fo++:(fo=0,xc=n):fo=0,Ti(),null}function Qr(){if(Pi!==null){var n=xd(Vl),s=sn.transition,a=Oe;try{if(sn.transition=null,Oe=16>n?16:n,Pi===null)var h=!1;else{if(n=Pi,Pi=null,Vl=0,Te&6)throw Error(t(331));var f=Te;for(Te|=4,le=n.current;le!==null;){var m=le,E=m.child;if(le.flags&16){var C=m.deletions;if(C!==null){for(var L=0;L<C.length;L++){var F=C[L];for(le=F;le!==null;){var V=le;switch(V.tag){case 0:case 11:case 15:uo(8,V,m)}var H=V.child;if(H!==null)H.return=V,le=H;else for(;le!==null;){V=le;var Y=V.sibling,se=V.return;if(Eg(V),V===F){le=null;break}if(Y!==null){Y.return=se,le=Y;break}le=se}}}var ae=m.alternate;if(ae!==null){var ce=ae.child;if(ce!==null){ae.child=null;do{var $e=ce.sibling;ce.sibling=null,ce=$e}while(ce!==null)}}le=m}}if(m.subtreeFlags&2064&&E!==null)E.return=m,le=E;else e:for(;le!==null;){if(m=le,m.flags&2048)switch(m.tag){case 0:case 11:case 15:uo(9,m,m.return)}var k=m.sibling;if(k!==null){k.return=m.return,le=k;break e}le=m.return}}var M=n.current;for(le=M;le!==null;){E=le;var D=E.child;if(E.subtreeFlags&2064&&D!==null)D.return=E,le=D;else e:for(E=M;le!==null;){if(C=le,C.flags&2048)try{switch(C.tag){case 0:case 11:case 15:Wl(9,C)}}catch(de){Ye(C,C.return,de)}if(C===E){le=null;break e}var Q=C.sibling;if(Q!==null){Q.return=C.return,le=Q;break e}le=C.return}}if(Te=f,Ti(),On&&typeof On.onPostCommitFiberRoot=="function")try{On.onPostCommitFiberRoot(el,n)}catch{}h=!0}return h}finally{Oe=a,sn.transition=s}}return!1}function Fg(n,s,a){s=Zr(a,s),s=Jf(n,s,1),n=Li(n,s,1),s=Lt(),n!==null&&(Ns(n,1,s),Ft(n,s))}function Ye(n,s,a){if(n.tag===3)Fg(n,n,a);else for(;s!==null;){if(s.tag===3){Fg(s,n,a);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Mi===null||!Mi.has(h))){n=Zr(a,n),n=eg(s,n,1),s=Li(s,n,1),n=Lt(),s!==null&&(Ns(s,1,n),Ft(s,n));break}}s=s.return}}function Ey(n,s,a){var h=n.pingCache;h!==null&&h.delete(s),s=Lt(),n.pingedLanes|=n.suspendedLanes&a,rt===n&&(ct&a)===a&&(tt===4||tt===3&&(ct&130023424)===ct&&500>He()-Ec?fr(n,0):yc|=a),Ft(n,s)}function Ng(n,s){s===0&&(n.mode&1?(s=nl,nl<<=1,!(nl&130023424)&&(nl=4194304)):s=1);var a=Lt();n=Qn(n,s),n!==null&&(Ns(n,s,a),Ft(n,a))}function vy(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Ng(n,a)}function xy(n,s){var a=0;switch(n.tag){case 13:var h=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),Ng(n,a)}var zg;zg=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||Pt.current)Dt=!0;else{if(!(n.lanes&a)&&!(s.flags&128))return Dt=!1,ay(n,s,a);Dt=!!(n.flags&131072)}else Dt=!1,je&&s.flags&1048576&&mf(s,Cl,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Ul(n,s),n=s.pendingProps;var f=br(s,_t.current);Vr(s,a),f=$u(null,s,h,n,f,a);var m=qu();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,kt(h)?(m=!0,xl(s)):m=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Xu(s),f.updater=zl,s.stateNode=f,f._reactInternals=s,ic(s,h,n,a),s=lc(null,s,h,!0,m,a)):(s.tag=0,je&&m&&Du(s),It(null,s,f,a),s=s.child),s;case 16:h=s.elementType;e:{switch(Ul(n,s),n=s.pendingProps,f=h._init,h=f(h._payload),s.type=h,f=s.tag=Sy(h),n=vn(h,n),f){case 0:s=oc(null,s,h,n,a);break e;case 1:s=ug(null,s,h,n,a);break e;case 11:s=rg(null,s,h,n,a);break e;case 14:s=sg(null,s,h,vn(h.type,n),a);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:vn(h,f),oc(n,s,h,f,a);case 1:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:vn(h,f),ug(n,s,h,f,a);case 3:e:{if(cg(s),n===null)throw Error(t(387));h=s.pendingProps,m=s.memoizedState,f=m.element,Rf(n,s),Ml(s,h,null,a);var E=s.memoizedState;if(h=E.element,m.isDehydrated)if(m={element:h,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){f=Zr(Error(t(423)),s),s=hg(n,s,h,a,f);break e}else if(h!==f){f=Zr(Error(t(424)),s),s=hg(n,s,h,a,f);break e}else for(Zt=Si(s.stateNode.containerInfo.firstChild),Kt=s,je=!0,En=null,a=Sf(s,null,h,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Xr(),h===f){s=ei(n,s,a);break e}It(n,s,h,a)}s=s.child}return s;case 5:return Lf(s),n===null&&Nu(s),h=s.type,f=s.pendingProps,m=n!==null?n.memoizedProps:null,E=f.children,Iu(h,f)?E=null:m!==null&&Iu(h,m)&&(s.flags|=32),ag(n,s),It(n,s,E,a),s.child;case 6:return n===null&&Nu(s),null;case 13:return dg(n,s,a);case 4:return Bu(s,s.stateNode.containerInfo),h=s.pendingProps,n===null?s.child=Br(s,null,h,a):It(n,s,h,a),s.child;case 11:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:vn(h,f),rg(n,s,h,f,a);case 7:return It(n,s,s.pendingProps,a),s.child;case 8:return It(n,s,s.pendingProps.children,a),s.child;case 12:return It(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(h=s.type._context,f=s.pendingProps,m=s.memoizedProps,E=f.value,Ge(Il,h._currentValue),h._currentValue=E,m!==null)if(yn(m.value,E)){if(m.children===f.children&&!Pt.current){s=ei(n,s,a);break e}}else for(m=s.child,m!==null&&(m.return=s);m!==null;){var C=m.dependencies;if(C!==null){E=m.child;for(var L=C.firstContext;L!==null;){if(L.context===h){if(m.tag===1){L=Jn(-1,a&-a),L.tag=2;var F=m.updateQueue;if(F!==null){F=F.shared;var V=F.pending;V===null?L.next=L:(L.next=V.next,V.next=L),F.pending=L}}m.lanes|=a,L=m.alternate,L!==null&&(L.lanes|=a),Wu(m.return,a,s),C.lanes|=a;break}L=L.next}}else if(m.tag===10)E=m.type===s.type?null:m.child;else if(m.tag===18){if(E=m.return,E===null)throw Error(t(341));E.lanes|=a,C=E.alternate,C!==null&&(C.lanes|=a),Wu(E,a,s),E=m.sibling}else E=m.child;if(E!==null)E.return=m;else for(E=m;E!==null;){if(E===s){E=null;break}if(m=E.sibling,m!==null){m.return=E.return,E=m;break}E=E.return}m=E}It(n,s,f.children,a),s=s.child}return s;case 9:return f=s.type,h=s.pendingProps.children,Vr(s,a),f=nn(f),h=h(f),s.flags|=1,It(n,s,h,a),s.child;case 14:return h=s.type,f=vn(h,s.pendingProps),f=vn(h.type,f),sg(n,s,h,f,a);case 15:return og(n,s,s.type,s.pendingProps,a);case 17:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:vn(h,f),Ul(n,s),s.tag=1,kt(h)?(n=!0,xl(s)):n=!1,Vr(s,a),qf(s,h,f),ic(s,h,f,a),lc(null,s,h,!0,n,a);case 19:return gg(n,s,a);case 22:return lg(n,s,a)}throw Error(t(156,s.tag))};function Gg(n,s){return md(n,s)}function wy(n,s,a,h){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(n,s,a,h){return new wy(n,s,a,h)}function Ic(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Sy(n){if(typeof n=="function")return Ic(n)?1:0;if(n!=null){if(n=n.$$typeof,n===$)return 11;if(n===ee)return 14}return 2}function Oi(n,s){var a=n.alternate;return a===null?(a=on(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function $l(n,s,a,h,f,m){var E=2;if(h=n,typeof n=="function")Ic(n)&&(E=1);else if(typeof n=="string")E=5;else e:switch(n){case Z:return pr(a.children,f,m,s);case U:E=8,f|=8;break;case X:return n=on(12,a,s,f|2),n.elementType=X,n.lanes=m,n;case te:return n=on(13,a,s,f),n.elementType=te,n.lanes=m,n;case J:return n=on(19,a,s,f),n.elementType=J,n.lanes=m,n;case K:return ql(a,f,m,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case B:E=10;break e;case ie:E=9;break e;case $:E=11;break e;case ee:E=14;break e;case ne:E=16,h=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=on(E,a,s,f),s.elementType=n,s.type=h,s.lanes=m,s}function pr(n,s,a,h){return n=on(7,n,h,s),n.lanes=a,n}function ql(n,s,a,h){return n=on(22,n,h,s),n.elementType=K,n.lanes=a,n.stateNode={isHidden:!1},n}function Lc(n,s,a){return n=on(6,n,null,s),n.lanes=a,n}function Ac(n,s,a){return s=on(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function Cy(n,s,a,h,f){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nu(0),this.expirationTimes=nu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nu(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Mc(n,s,a,h,f,m,E,C,L){return n=new Cy(n,s,a,C,L),s===1?(s=1,m===!0&&(s|=8)):s=0,m=on(3,null,null,s),n.current=m,m.stateNode=n,m.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xu(m),n}function Ry(n,s,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:j,key:h==null?null:""+h,children:n,containerInfo:s,implementation:a}}function Ug(n){if(!n)return Ri;n=n._reactInternals;e:{if(ir(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(kt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(kt(a))return ff(n,a,s)}return s}function bg(n,s,a,h,f,m,E,C,L){return n=Mc(a,h,!0,n,f,m,E,C,L),n.context=Ug(null),a=n.current,h=Lt(),f=ki(a),m=Jn(h,f),m.callback=s??null,Li(a,m,f),n.current.lanes=f,Ns(n,f,h),Ft(n,h),n}function Ql(n,s,a,h){var f=s.current,m=Lt(),E=ki(f);return a=Ug(a),s.context===null?s.context=a:s.pendingContext=a,s=Jn(m,E),s.payload={element:n},h=h===void 0?null:h,h!==null&&(s.callback=h),n=Li(f,s,E),n!==null&&(Sn(n,f,E,m),Al(n,f,E)),E}function Jl(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Wg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Pc(n,s){Wg(n,s),(n=n.alternate)&&Wg(n,s)}var jg=typeof reportError=="function"?reportError:function(n){console.error(n)};function kc(n){this._internalRoot=n}ea.prototype.render=kc.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Ql(n,s,null,null)},ea.prototype.unmount=kc.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;dr(function(){Ql(null,n,null,null)}),s[Zn]=null}};function ea(n){this._internalRoot=n}ea.prototype.unstable_scheduleHydration=function(n){if(n){var s=Cd();n={blockedOn:null,target:n,priority:s};for(var a=0;a<vi.length&&s!==0&&s<vi[a].priority;a++);vi.splice(a,0,n),a===0&&Id(n)}};function Dc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function ta(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Xg(){}function Ty(n,s,a,h,f){if(f){if(typeof h=="function"){var m=h;h=function(){var F=Jl(E);m.call(F)}}var E=bg(s,h,n,0,null,!1,!1,"",Xg);return n._reactRootContainer=E,n[Zn]=E.current,$s(n.nodeType===8?n.parentNode:n),dr(),E}for(;f=n.lastChild;)n.removeChild(f);if(typeof h=="function"){var C=h;h=function(){var F=Jl(L);C.call(F)}}var L=Mc(n,0,!1,null,null,!1,!1,"",Xg);return n._reactRootContainer=L,n[Zn]=L.current,$s(n.nodeType===8?n.parentNode:n),dr(function(){Ql(s,L,a,h)}),L}function na(n,s,a,h,f){var m=a._reactRootContainer;if(m){var E=m;if(typeof f=="function"){var C=f;f=function(){var L=Jl(E);C.call(L)}}Ql(s,E,n,f)}else E=Ty(a,s,n,f,h);return Jl(E)}wd=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=Fs(s.pendingLanes);a!==0&&(iu(s,a|1),Ft(s,He()),!(Te&6)&&(qr=He()+500,Ti()))}break;case 13:dr(function(){var h=Qn(n,1);if(h!==null){var f=Lt();Sn(h,n,1,f)}}),Pc(n,1)}},ru=function(n){if(n.tag===13){var s=Qn(n,134217728);if(s!==null){var a=Lt();Sn(s,n,134217728,a)}Pc(n,134217728)}},Sd=function(n){if(n.tag===13){var s=ki(n),a=Qn(n,s);if(a!==null){var h=Lt();Sn(a,n,s,h)}Pc(n,s)}},Cd=function(){return Oe},Rd=function(n,s){var a=Oe;try{return Oe=n,s()}finally{Oe=a}},Ps=function(n,s,a){switch(s){case"input":if(gt(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var h=a[s];if(h!==n&&h.form===n.form){var f=El(h);if(!f)throw Error(t(90));Mn(h),gt(h,f)}}}break;case"textarea":Vn(n,a);break;case"select":s=a.value,s!=null&&Qt(n,!!a.multiple,s,!1)}},Ds=Cc,Ct=dr;var Iy={usingClientEntryPoint:!1,Events:[Js,Gr,El,mi,ks,Cc]},go={findFiberByHostInstance:rr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ly={bundleType:go.bundleType,version:go.version,rendererPackageName:go.rendererPackageName,rendererConfig:go.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=gd(n),n===null?null:n.stateNode},findFiberByHostInstance:go.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ia=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ia.isDisabled&&ia.supportsFiber)try{el=ia.inject(Ly),On=ia}catch{}}return Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Iy,Nt.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dc(s))throw Error(t(200));return Ry(n,s,null,a)},Nt.createRoot=function(n,s){if(!Dc(n))throw Error(t(299));var a=!1,h="",f=jg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=Mc(n,1,!1,null,null,a,!1,h,f),n[Zn]=s.current,$s(n.nodeType===8?n.parentNode:n),new kc(s)},Nt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=gd(s),n=n===null?null:n.stateNode,n},Nt.flushSync=function(n){return dr(n)},Nt.hydrate=function(n,s,a){if(!ta(s))throw Error(t(200));return na(null,n,s,!0,a)},Nt.hydrateRoot=function(n,s,a){if(!Dc(n))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,f=!1,m="",E=jg;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),s=bg(s,null,n,1,a??null,f,!1,m,E),n[Zn]=s.current,$s(n),h)for(n=0;n<h.length;n++)a=h[n],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new ea(s)},Nt.render=function(n,s,a){if(!ta(s))throw Error(t(200));return na(null,n,s,!1,a)},Nt.unmountComponentAtNode=function(n){if(!ta(n))throw Error(t(40));return n._reactRootContainer?(dr(function(){na(null,null,n,!1,function(){n._reactRootContainer=null,n[Zn]=null})}),!0):!1},Nt.unstable_batchedUpdates=Cc,Nt.unstable_renderSubtreeIntoContainer=function(n,s,a,h){if(!ta(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return na(n,s,a,!1,h)},Nt.version="18.3.1-next-f1338f8080-20240426",Nt}var $g;function Ny(){if($g)return Fc.exports;$g=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Fc.exports=Fy(),Fc.exports}var qg;function zy(){if(qg)return sa;qg=1;var r=Ny();return sa.createRoot=r.createRoot,sa.hydrateRoot=r.hydrateRoot,sa}var Gy=zy();const Uy=um(Gy);var Gc={exports:{}},po={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qg;function by(){if(Qg)return po;Qg=1;var r=Ch(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(c,d,g){var p,_={},y=null,x=null;g!==void 0&&(y=""+g),d.key!==void 0&&(y=""+d.key),d.ref!==void 0&&(x=d.ref);for(p in d)i.call(d,p)&&!l.hasOwnProperty(p)&&(_[p]=d[p]);if(c&&c.defaultProps)for(p in d=c.defaultProps,d)_[p]===void 0&&(_[p]=d[p]);return{$$typeof:e,type:c,key:y,ref:x,props:_,_owner:o.current}}return po.Fragment=t,po.jsx=u,po.jsxs=u,po}var Jg;function Wy(){return Jg||(Jg=1,Gc.exports=by()),Gc.exports}var ht=Wy();function jy({show:r}){return ht.jsx("div",{children:ht.jsxs("div",{className:"text-center text-white",style:{background:"#212529"},children:[ht.jsx("div",{style:{width:"3rem",height:"3rem",borderWidth:".5rem"}}),ht.jsx("div",{children:"Loading..."})]})})}class di{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const xs={PROPERTYCHANGE:"propertychange"};class ka{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function Xy(r,e,t){let i,o;t=t||Vi;let l=0,u=r.length,c=!1;for(;l<u;)i=l+(u-l>>1),o=+t(r[i],e),o<0?l=i+1:(u=i,c=!o);return c?l:~l}function Vi(r,e){return r>e?1:r<e?-1:0}function By(r,e){return r<e?1:r>e?-1:0}function Rh(r,e,t){if(r[0]<=e)return 0;const i=r.length;if(e<=r[i-1])return i-1;if(typeof t=="function"){for(let o=1;o<i;++o){const l=r[o];if(l===e)return o;if(l<e)return t(e,r[o-1],l)>0?o-1:o}return i-1}if(t>0){for(let o=1;o<i;++o)if(r[o]<e)return o-1;return i-1}if(t<0){for(let o=1;o<i;++o)if(r[o]<=e)return o;return i-1}for(let o=1;o<i;++o){if(r[o]==e)return o;if(r[o]<e)return r[o-1]-e<e-r[o]?o-1:o}return i-1}function Yy(r,e,t){for(;e<t;){const i=r[e];r[e]=r[t],r[t]=i,++e,--t}}function Th(r,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let o=0;o<i;o++)r[r.length]=t[o]}function Qi(r,e){const t=r.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(r[i]!==e[i])return!1;return!0}function Vy(r,e,t){const i=e;return r.every(function(o,l){if(l===0)return!0;const u=i(r[l-1],o);return!(u>0||u===0)})}function Io(){return!0}function Da(){return!1}function ws(){}function cm(r){let e,t,i;return function(){const o=Array.prototype.slice.call(arguments);return(!t||this!==i||!Qi(o,t))&&(i=this,t=o,e=r.apply(this,arguments)),e}}function Ky(r){function e(){let t;try{t=r()}catch(i){return Promise.reject(i)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function bo(r){for(const e in r)delete r[e]}function Ss(r){let e;for(e in r)return!1;return!e}class Oa extends ka{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),o=i[e]||(i[e]=[]);o.includes(t)||o.push(t)}dispatchEvent(e){const t=typeof e=="string",i=t?e:e.type,o=this.listeners_&&this.listeners_[i];if(!o)return;const l=t?new di(e):e;l.target||(l.target=this.eventTarget_||this);const u=this.dispatching_||(this.dispatching_={}),c=this.pendingRemovals_||(this.pendingRemovals_={});i in u||(u[i]=0,c[i]=0),++u[i];let d;for(let g=0,p=o.length;g<p;++g)if("handleEvent"in o[g]?d=o[g].handleEvent(l):d=o[g].call(this,l),d===!1||l.propagationStopped){d=!1;break}if(--u[i]===0){let g=c[i];for(delete c[i];g--;)this.removeEventListener(i,ws);delete u[i]}return d}disposeInternal(){this.listeners_&&bo(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const i=this.listeners_[e];if(!i)return;const o=i.indexOf(t);o!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[o]=ws,++this.pendingRemovals_[e]):(i.splice(o,1),i.length===0&&delete this.listeners_[e]))}}const Ee={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Ie(r,e,t,i,o){if(o){const u=t;t=function(){r.removeEventListener(e,t),u.apply(i??this,arguments)}}else i&&i!==r&&(t=t.bind(i));const l={target:r,type:e,listener:t};return r.addEventListener(e,t),l}function _a(r,e,t,i){return Ie(r,e,t,i,!0)}function Ue(r){r&&r.target&&(r.target.removeEventListener(r.type,r.listener),bo(r))}class Wo extends Oa{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Ee.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,o=new Array(i);for(let l=0;l<i;++l)o[l]=Ie(this,e[l],t);return o}return Ie(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const o=e.length;i=new Array(o);for(let l=0;l<o;++l)i[l]=_a(this,e[l],t)}else i=_a(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)Zy(i);else if(Array.isArray(e))for(let o=0,l=e.length;o<l;++o)this.removeEventListener(e[o],t);else this.removeEventListener(e,t)}}Wo.prototype.on;Wo.prototype.once;Wo.prototype.un;function Zy(r){if(Array.isArray(r))for(let e=0,t=r.length;e<t;++e)Ue(r[e]);else Ue(r)}function ke(){throw new Error("Unimplemented abstract method.")}let Hy=0;function Le(r){return r.ol_uid||(r.ol_uid=String(++Hy))}class ep extends di{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}class Xn extends Wo{constructor(e){super(),this.on,this.once,this.un,Le(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new ep(i,e,t)),i=xs.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new ep(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const o=this.values_||(this.values_={});if(i)o[e]=t;else{const l=o[e];o[e]=t,l!==t&&this.notify(e,l)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],Ss(this.values_)&&(this.values_=null),t||this.notify(e,i)}}}const zt={ADD:"add",REMOVE:"remove"},tp={LENGTH:"length"};class oa extends di{constructor(e,t,i){super(e),this.element=t,this.index=i}}class Wn extends Xn{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let i=0,o=this.array_.length;i<o;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,o=t.length;i<o;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(tp.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new oa(zt.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,o=t.length;i<o;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new oa(zt.REMOVE,t,e)),t}setAt(e,t){const i=this.getLength();if(e>=i){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const o=this.array_[e];this.array_[e]=t,this.dispatchEvent(new oa(zt.REMOVE,o,e)),this.dispatchEvent(new oa(zt.ADD,t,e))}updateLength_(){this.set(tp.LENGTH,this.array_.length)}assertUnique_(e,t){for(let i=0,o=this.array_.length;i<o;++i)if(this.array_[i]===e&&i!==t)throw new Error("Duplicate item added to a unique collection")}}function Me(r,e){if(!r)throw new Error(e)}class Fa extends Xn{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new Fa(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Ue(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Ie(e,Ee.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?$y(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function $y(r){if(typeof r=="function")return r;let e;return Array.isArray(r)?e=r:(Me(typeof r.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[r]),function(){return e}}new Array(6);function Ln(){return[1,0,0,1,0,0]}function qy(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r}function lt(r,e){const t=e[0],i=e[1];return e[0]=r[0]*t+r[2]*i+r[4],e[1]=r[1]*t+r[3]*i+r[5],e}function ci(r,e,t,i,o,l,u,c){const d=Math.sin(l),g=Math.cos(l);return r[0]=i*g,r[1]=o*d,r[2]=-i*d,r[3]=o*g,r[4]=u*i*g-c*i*d+e,r[5]=u*o*d+c*o*g+t,r}function hm(r,e){const t=Qy(e);Me(t!==0,"Transformation matrix cannot be inverted");const i=e[0],o=e[1],l=e[2],u=e[3],c=e[4],d=e[5];return r[0]=u/t,r[1]=-o/t,r[2]=-l/t,r[3]=i/t,r[4]=(l*d-u*c)/t,r[5]=-(i*d-o*c)/t,r}function Qy(r){return r[0]*r[3]-r[1]*r[2]}const np=[1e6,1e6,1e6,1e6,2,2];function Jy(r){return"matrix("+r.map((t,i)=>Math.round(t*np[i])/np[i]).join(", ")+")"}const ot={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function ip(r){const e=Xt();for(let t=0,i=r.length;t<i;++t)To(e,r[t]);return e}function Na(r,e,t){return t?(t[0]=r[0]-e,t[1]=r[1]-e,t[2]=r[2]+e,t[3]=r[3]+e,t):[r[0]-e,r[1]-e,r[2]+e,r[3]+e]}function dm(r,e){return e?(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e):r.slice()}function fm(r,e,t){let i,o;return e<r[0]?i=r[0]-e:r[2]<e?i=e-r[2]:i=0,t<r[1]?o=r[1]-t:r[3]<t?o=t-r[3]:o=0,i*i+o*o}function Cs(r,e){return gm(r,e[0],e[1])}function hs(r,e){return r[0]<=e[0]&&e[2]<=r[2]&&r[1]<=e[1]&&e[3]<=r[3]}function gm(r,e,t){return r[0]<=e&&e<=r[2]&&r[1]<=t&&t<=r[3]}function oh(r,e){const t=r[0],i=r[1],o=r[2],l=r[3],u=e[0],c=e[1];let d=ot.UNKNOWN;return u<t?d=d|ot.LEFT:u>o&&(d=d|ot.RIGHT),c<i?d=d|ot.BELOW:c>l&&(d=d|ot.ABOVE),d===ot.UNKNOWN&&(d=ot.INTERSECTING),d}function Xt(){return[1/0,1/0,-1/0,-1/0]}function Hi(r,e,t,i,o){return o?(o[0]=r,o[1]=e,o[2]=t,o[3]=i,o):[r,e,t,i]}function za(r){return Hi(1/0,1/0,-1/0,-1/0,r)}function Ih(r,e){const t=r[0],i=r[1];return Hi(t,i,t,i,e)}function Lh(r,e,t,i,o){const l=za(o);return mm(l,r,e,t,i)}function Lo(r,e){return r[0]==e[0]&&r[2]==e[2]&&r[1]==e[1]&&r[3]==e[3]}function pm(r,e){return e[0]<r[0]&&(r[0]=e[0]),e[2]>r[2]&&(r[2]=e[2]),e[1]<r[1]&&(r[1]=e[1]),e[3]>r[3]&&(r[3]=e[3]),r}function To(r,e){e[0]<r[0]&&(r[0]=e[0]),e[0]>r[2]&&(r[2]=e[0]),e[1]<r[1]&&(r[1]=e[1]),e[1]>r[3]&&(r[3]=e[1])}function mm(r,e,t,i,o){for(;t<i;t+=o)e1(r,e[t],e[t+1]);return r}function e1(r,e,t){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}function _m(r,e){let t;return t=e(Ga(r)),t||(t=e(Ua(r)),t)||(t=e(ba(r)),t)||(t=e(hi(r)),t)?t:!1}function Ao(r){let e=0;return Wa(r)||(e=Ae(r)*at(r)),e}function Ga(r){return[r[0],r[1]]}function Ua(r){return[r[2],r[1]]}function $i(r){return[(r[0]+r[2])/2,(r[1]+r[3])/2]}function t1(r,e){let t;if(e==="bottom-left")t=Ga(r);else if(e==="bottom-right")t=Ua(r);else if(e==="top-left")t=hi(r);else if(e==="top-right")t=ba(r);else throw new Error("Invalid corner");return t}function lh(r,e,t,i,o){const[l,u,c,d,g,p,_,y]=n1(r,e,t,i);return Hi(Math.min(l,c,g,_),Math.min(u,d,p,y),Math.max(l,c,g,_),Math.max(u,d,p,y),o)}function n1(r,e,t,i){const o=e*i[0]/2,l=e*i[1]/2,u=Math.cos(t),c=Math.sin(t),d=o*u,g=o*c,p=l*u,_=l*c,y=r[0],x=r[1];return[y-d+_,x-g-p,y-d-_,x-g+p,y+d-_,x+g+p,y+d+_,x+g-p,y-d+_,x-g-p]}function at(r){return r[3]-r[1]}function In(r,e,t){const i=t||Xt();return bt(r,e)?(r[0]>e[0]?i[0]=r[0]:i[0]=e[0],r[1]>e[1]?i[1]=r[1]:i[1]=e[1],r[2]<e[2]?i[2]=r[2]:i[2]=e[2],r[3]<e[3]?i[3]=r[3]:i[3]=e[3]):za(i),i}function hi(r){return[r[0],r[3]]}function ba(r){return[r[2],r[3]]}function Ae(r){return r[2]-r[0]}function bt(r,e){return r[0]<=e[2]&&r[2]>=e[0]&&r[1]<=e[3]&&r[3]>=e[1]}function Wa(r){return r[2]<r[0]||r[3]<r[1]}function i1(r,e){return e?(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e):r}function r1(r,e,t){let i=!1;const o=oh(r,e),l=oh(r,t);if(o===ot.INTERSECTING||l===ot.INTERSECTING)i=!0;else{const u=r[0],c=r[1],d=r[2],g=r[3],p=e[0],_=e[1],y=t[0],x=t[1],v=(x-_)/(y-p);let w,S;l&ot.ABOVE&&!(o&ot.ABOVE)&&(w=y-(x-g)/v,i=w>=u&&w<=d),!i&&l&ot.RIGHT&&!(o&ot.RIGHT)&&(S=x-(y-d)*v,i=S>=c&&S<=g),!i&&l&ot.BELOW&&!(o&ot.BELOW)&&(w=y-(x-c)/v,i=w>=u&&w<=d),!i&&l&ot.LEFT&&!(o&ot.LEFT)&&(S=x-(y-u)*v,i=S>=c&&S<=g)}return i}function ym(r,e){const t=e.getExtent(),i=$i(r);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const o=Ae(t),u=Math.floor((i[0]-t[0])/o)*o;r[0]-=u,r[2]-=u}return r}function Ah(r,e,t){if(e.canWrapX()){const i=e.getExtent();if(!isFinite(r[0])||!isFinite(r[2]))return[[i[0],r[1],i[2],r[3]]];ym(r,e);const o=Ae(i);if(Ae(r)>o&&!t)return[[i[0],r[1],i[2],r[3]]];if(r[0]<i[0])return[[r[0]+o,r[1],i[2],r[3]],[i[0],r[1],r[2],r[3]]];if(r[2]>i[2])return[[r[0],r[1],i[2],r[3]],[i[0],r[1],r[2]-o,r[3]]]}return[r]}const Mh={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class Ph{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Mh[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const jo=6378137,ds=Math.PI*jo,s1=[-ds,-ds,ds,ds],o1=[-180,-85,180,85],la=jo*Math.log(Math.tan(Math.PI/2));class Jr extends Ph{constructor(e){super({code:e,units:"m",extent:s1,global:!0,worldExtent:o1,getPointResolution:function(t,i){return t/Math.cosh(i[1]/jo)}})}}const rp=[new Jr("EPSG:3857"),new Jr("EPSG:102100"),new Jr("EPSG:102113"),new Jr("EPSG:900913"),new Jr("http://www.opengis.net/def/crs/EPSG/0/3857"),new Jr("http://www.opengis.net/gml/srs/epsg.xml#3857")];function l1(r,e,t,i){const o=r.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=r.slice():e=new Array(o));for(let l=0;l<o;l+=i){e[l]=ds*r[l]/180;let u=jo*Math.log(Math.tan(Math.PI*(+r[l+1]+90)/360));u>la?u=la:u<-la&&(u=-la),e[l+1]=u}return e}function a1(r,e,t,i){const o=r.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=r.slice():e=new Array(o));for(let l=0;l<o;l+=i)e[l]=180*r[l]/ds,e[l+1]=360*Math.atan(Math.exp(r[l+1]/jo))/Math.PI-90;return e}const u1=6378137,sp=[-180,-90,180,90],c1=Math.PI*u1/180;class mr extends Ph{constructor(e,t){super({code:e,units:"degrees",extent:sp,axisOrientation:t,global:!0,metersPerUnit:c1,worldExtent:sp})}}const op=[new mr("CRS:84"),new mr("EPSG:4326","neu"),new mr("urn:ogc:def:crs:OGC:1.3:CRS84"),new mr("urn:ogc:def:crs:OGC:2:84"),new mr("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new mr("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new mr("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let ah={};function h1(r){return ah[r]||ah[r.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function d1(r,e){ah[r]=e}let ps={};function Mo(r,e,t){const i=r.getCode(),o=e.getCode();i in ps||(ps[i]={}),ps[i][o]=t}function Uc(r,e){return r in ps&&e in ps[r]?ps[r][e]:null}function Ke(r,e,t){return Math.min(Math.max(r,e),t)}function f1(r,e,t,i,o,l){const u=o-t,c=l-i;if(u!==0||c!==0){const d=((r-t)*u+(e-i)*c)/(u*u+c*c);d>1?(t=o,i=l):d>0&&(t+=u*d,i+=c*d)}return ms(r,e,t,i)}function ms(r,e,t,i){const o=t-r,l=i-e;return o*o+l*l}function g1(r){const e=r.length;for(let i=0;i<e;i++){let o=i,l=Math.abs(r[i][i]);for(let c=i+1;c<e;c++){const d=Math.abs(r[c][i]);d>l&&(l=d,o=c)}if(l===0)return null;const u=r[o];r[o]=r[i],r[i]=u;for(let c=i+1;c<e;c++){const d=-r[c][i]/r[i][i];for(let g=i;g<e+1;g++)i==g?r[c][g]=0:r[c][g]+=d*r[i][g]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=r[i][e]/r[i][i];for(let o=i-1;o>=0;o--)r[o][e]-=r[o][i]*t[i]}return t}function lp(r){return r*180/Math.PI}function Ki(r){return r*Math.PI/180}function _s(r,e){const t=r%e;return t*e<0?t+e:t}function an(r,e,t){return r+t*(e-r)}function kh(r,e){const t=Math.pow(10,e);return Math.round(r*t)/t}function aa(r,e){return Math.floor(kh(r,e))}function ua(r,e){return Math.ceil(kh(r,e))}function uh(r,e,t){if(r>=e&&r<t)return r;const i=t-e;return((r-e)%i+i)%i+e}function Em(r,e){return r[0]+=+e[0],r[1]+=+e[1],r}function ya(r,e){let t=!0;for(let i=r.length-1;i>=0;--i)if(r[i]!=e[i]){t=!1;break}return t}function Dh(r,e){const t=Math.cos(e),i=Math.sin(e),o=r[0]*t-r[1]*i,l=r[1]*t+r[0]*i;return r[0]=o,r[1]=l,r}function vm(r,e){return r[0]*=e,r[1]*=e,r}function xm(r,e){if(e.canWrapX()){const t=Ae(e.getExtent()),i=p1(r,e,t);i&&(r[0]-=i*t)}return r}function p1(r,e,t){const i=e.getExtent();let o=0;return e.canWrapX()&&(r[0]<i[0]||r[0]>i[2])&&(t=t||Ae(i),o=Math.floor((r[0]-i[0])/t)),o}const m1=63710088e-1;function ap(r,e,t){t=t||m1;const i=Ki(r[1]),o=Ki(e[1]),l=(o-i)/2,u=Ki(e[0]-r[0])/2,c=Math.sin(l)*Math.sin(l)+Math.sin(u)*Math.sin(u)*Math.cos(i)*Math.cos(o);return 2*t*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}const Ea=.9996,dn=.00669438,ja=dn*dn,Xa=ja*dn,Er=dn/(1-dn),up=Math.sqrt(1-dn),Rs=(1-up)/(1+up),wm=Rs*Rs,Oh=wm*Rs,Fh=Oh*Rs,Sm=Fh*Rs,Cm=1-dn/4-3*ja/64-5*Xa/256,_1=3*dn/8+3*ja/32+45*Xa/1024,y1=15*ja/256+45*Xa/1024,E1=35*Xa/3072,v1=3/2*Rs-27/32*Oh+269/512*Sm,x1=21/16*wm-55/32*Fh,w1=151/96*Oh-417/128*Sm,S1=1097/512*Fh,va=6378137;function C1(r,e,t){const i=r-5e5,u=(t.north?e:e-1e7)/Ea/(va*Cm),c=u+v1*Math.sin(2*u)+x1*Math.sin(4*u)+w1*Math.sin(6*u)+S1*Math.sin(8*u),d=Math.sin(c),g=d*d,p=Math.cos(c),_=d/p,y=_*_,x=y*y,v=1-dn*g,w=Math.sqrt(1-dn*g),S=va/w,I=(1-dn)/v,T=Er*p**2,O=T*T,A=i/(S*Ea),P=A*A,j=P*A,Z=j*A,U=Z*A,X=U*A,B=c-_/I*(P/2-Z/24*(5+3*y+10*T-4*O-9*Er))+X/720*(61+90*y+298*T+45*x-252*Er-3*O);let ie=(A-j/6*(1+2*y+T)+U/120*(5-2*T+28*y-3*O+8*Er+24*x))/p;return ie=uh(ie+Ki(Rm(t.number)),-Math.PI,Math.PI),[lp(ie),lp(B)]}const cp=-80,hp=84,R1=-180,T1=180;function I1(r,e,t){r=uh(r,R1,T1),e<cp?e=cp:e>hp&&(e=hp);const i=Ki(e),o=Math.sin(i),l=Math.cos(i),u=o/l,c=u*u,d=c*c,g=Ki(r),p=Rm(t.number),_=Ki(p),y=va/Math.sqrt(1-dn*o**2),x=Er*l**2,v=l*uh(g-_,-Math.PI,Math.PI),w=v*v,S=w*v,I=S*v,T=I*v,O=T*v,A=va*(Cm*i-_1*Math.sin(2*i)+y1*Math.sin(4*i)-E1*Math.sin(6*i)),P=Ea*y*(v+S/6*(1-c+x)+T/120*(5-18*c+d+72*x-58*Er))+5e5;let j=Ea*(A+y*u*(w/2+I/24*(5-c+9*x+4*x**2)+O/720*(61-58*c+d+600*x-330*Er)));return t.north||(j+=1e7),[P,j]}function Rm(r){return(r-1)*6-180+3}const L1=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function Tm(r){let e=0;for(const o of L1){const l=r.match(o);if(l){e=parseInt(l[1]);break}}if(!e)return null;let t=0,i=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(i=!0,t=e-32600),t?{number:t,north:i}:null}function dp(r,e){return function(t,i,o,l){const u=t.length;o=o>1?o:2,l=l??o,i||(o>2?i=t.slice():i=new Array(u));for(let c=0;c<u;c+=l){const d=t[c],g=t[c+1],p=r(d,g,e);i[c]=p[0],i[c+1]=p[1]}return i}}function A1(r){return Tm(r)?new Ph({code:r,units:"m"}):null}function M1(r){const e=Tm(r.getCode());return e?{forward:dp(I1,e),inverse:dp(C1,e)}:null}function Im(...r){console.warn(...r)}const P1=[M1],k1=[A1];let ch=!0;function Lm(r){ch=!1}function Nh(r,e){if(e!==void 0){for(let t=0,i=r.length;t<i;++t)e[t]=r[t];e=e}else e=r.slice();return e}function hh(r){d1(r.getCode(),r),Mo(r,r,Nh)}function D1(r){r.forEach(hh)}function Bt(r){if(typeof r!="string")return r;const e=h1(r);if(e)return e;for(const t of k1){const i=t(r);if(i)return i}return null}function fp(r,e,t,i){r=Bt(r);let o;const l=r.getPointResolutionFunc();if(l)o=l(e,t);else{const u=r.getUnits();if(u=="degrees"||i=="degrees")o=e;else{const c=Gh(r,Bt("EPSG:4326"));if(!c&&u!=="degrees")o=e*r.getMetersPerUnit();else{let g=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];g=c(g,g,2);const p=ap(g.slice(0,2),g.slice(2,4)),_=ap(g.slice(4,6),g.slice(6,8));o=(p+_)/2}const d=r.getMetersPerUnit();d!==void 0&&(o/=d)}}return o}function gp(r){D1(r),r.forEach(function(e){r.forEach(function(t){e!==t&&Mo(e,t,Nh)})})}function O1(r,e,t,i){r.forEach(function(o){e.forEach(function(l){Mo(o,l,t),Mo(l,o,i)})})}function zh(r,e){return r?typeof r=="string"?Bt(r):r:Bt(e)}function F1(r){return function(e,t,i,o){const l=e.length;i=i!==void 0?i:2,o=o??i,t=t!==void 0?t:new Array(l);for(let u=0;u<l;u+=o){const c=r(e.slice(u,u+i)),d=c.length;for(let g=0,p=o;g<p;++g)t[u+g]=g>=d?e[u+g]:c[g]}return t}}function Am(r,e){return Lm(),Uh(r,"EPSG:4326","EPSG:3857")}function bc(r,e){if(r===e)return!0;const t=r.getUnits()===e.getUnits();return(r.getCode()===e.getCode()||Gh(r,e)===Nh)&&t}function Gh(r,e){const t=r.getCode(),i=e.getCode();let o=Uc(t,i);if(o)return o;let l=null,u=null;for(const d of P1)l||(l=d(r)),u||(u=d(e));if(!l&&!u)return null;const c="EPSG:4326";if(u)if(l)o=Wc(l.inverse,u.forward);else{const d=Uc(t,c);d&&(o=Wc(d,u.forward))}else{const d=Uc(c,i);d&&(o=Wc(l.inverse,d))}return o&&(hh(r),hh(e),Mo(r,e,o)),o}function Wc(r,e){return function(t,i,o,l){return i=r(t,i,o,l),e(i,i,o,l)}}function xa(r,e){const t=Bt(r),i=Bt(e);return Gh(t,i)}function Uh(r,e,t){const i=xa(e,t);if(!i){const o=Bt(e).getCode(),l=Bt(t).getCode();throw new Error(`No transform available between ${o} and ${l}`)}return i(r,void 0,r.length)}function dh(r,e){return r}function ri(r,e){return ch&&!ya(r,[0,0])&&r[0]>=-180&&r[0]<=180&&r[1]>=-90&&r[1]<=90&&(ch=!1,Im("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),r}function Mm(r,e){return r}function Bi(r,e){return r}function N1(){gp(rp),gp(op),O1(op,rp,l1,a1)}N1();function Zi(r,e,t,i,o,l,u){l=l||[],u=u||2;let c=0;for(let d=e;d<t;d+=i){const g=r[d],p=r[d+1];l[c++]=o[0]*g+o[2]*p+o[4],l[c++]=o[1]*g+o[3]*p+o[5];for(let _=2;_<u;_++)l[c++]=r[d+_]}return l&&l.length!=c&&(l.length=c),l}function Pm(r,e,t,i,o,l,u){u=u||[];const c=Math.cos(o),d=Math.sin(o),g=l[0],p=l[1];let _=0;for(let y=e;y<t;y+=i){const x=r[y]-g,v=r[y+1]-p;u[_++]=g+x*c-v*d,u[_++]=p+x*d+v*c;for(let w=y+2;w<y+i;++w)u[_++]=r[w]}return u&&u.length!=_&&(u.length=_),u}function z1(r,e,t,i,o,l,u,c){c=c||[];const d=u[0],g=u[1];let p=0;for(let _=e;_<t;_+=i){const y=r[_]-d,x=r[_+1]-g;c[p++]=d+o*y,c[p++]=g+l*x;for(let v=_+2;v<_+i;++v)c[p++]=r[v]}return c&&c.length!=p&&(c.length=p),c}function G1(r,e,t,i,o,l,u){u=u||[];let c=0;for(let d=e;d<t;d+=i){u[c++]=r[d]+o,u[c++]=r[d+1]+l;for(let g=d+2;g<d+i;++g)u[c++]=r[g]}return u&&u.length!=c&&(u.length=c),u}const pp=Ln();class U1 extends Xn{constructor(){super(),this.extent_=Xt(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=cm((e,t,i)=>{if(!i)return this.getSimplifiedGeometry(t);const o=this.clone();return o.applyTransform(i),o.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return ke()}closestPointXY(e,t,i,o){return ke()}containsXY(e,t){const i=this.getClosestPoint([e,t]);return i[0]===e&&i[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return ke()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&za(t),this.extentRevision_=this.getRevision()}return i1(this.extent_,e)}rotate(e,t){ke()}scale(e,t,i){ke()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return ke()}getType(){return ke()}applyTransform(e){ke()}intersectsExtent(e){return ke()}translate(e,t){ke()}transform(e,t){const i=Bt(e),o=i.getUnits()=="tile-pixels"?function(l,u,c){const d=i.getExtent(),g=i.getWorldExtent(),p=at(g)/at(d);ci(pp,g[0],g[3],p,-p,0,0,0);const _=Zi(l,0,l.length,c,pp,u),y=xa(i,t);return y?y(_,_,c):_}:xa(i,t);return this.applyTransform(o),this}}class bh extends U1{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return Lh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return ke()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=mp(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){ke()}setLayout(e,t,i){let o;if(e)o=mp(e);else{for(let l=0;l<i;++l){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}o=t.length,e=b1(o)}this.layout=e,this.stride=o}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const o=this.getStride();Pm(i,0,i.length,o,e,t,i),this.changed()}}scale(e,t,i){t===void 0&&(t=e),i||(i=$i(this.getExtent()));const o=this.getFlatCoordinates();if(o){const l=this.getStride();z1(o,0,o.length,l,e,t,i,o),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const o=this.getStride();G1(i,0,i.length,o,e,t,i),this.changed()}}}function b1(r){let e;return r==2?e="XY":r==3?e="XYZ":r==4&&(e="XYZM"),e}function mp(r){let e;return r=="XY"?e=2:r=="XYZ"||r=="XYM"?e=3:r=="XYZM"&&(e=4),e}function W1(r,e,t){const i=r.getFlatCoordinates();if(!i)return null;const o=r.getStride();return Zi(i,0,i.length,o,e,t)}function _p(r,e,t,i,o,l,u){const c=r[e],d=r[e+1],g=r[t]-c,p=r[t+1]-d;let _;if(g===0&&p===0)_=e;else{const y=((o-c)*g+(l-d)*p)/(g*g+p*p);if(y>1)_=t;else if(y>0){for(let x=0;x<i;++x)u[x]=an(r[e+x],r[t+x],y);u.length=i;return}else _=e}for(let y=0;y<i;++y)u[y]=r[_+y];u.length=i}function km(r,e,t,i,o){let l=r[e],u=r[e+1];for(e+=i;e<t;e+=i){const c=r[e],d=r[e+1],g=ms(l,u,c,d);g>o&&(o=g),l=c,u=d}return o}function j1(r,e,t,i,o){for(let l=0,u=t.length;l<u;++l){const c=t[l];o=km(r,e,c,i,o),e=c}return o}function Dm(r,e,t,i,o,l,u,c,d,g,p){if(e==t)return g;let _,y;if(o===0){if(y=ms(u,c,r[e],r[e+1]),y<g){for(_=0;_<i;++_)d[_]=r[e+_];return d.length=i,y}return g}p=p||[NaN,NaN];let x=e+i;for(;x<t;)if(_p(r,x-i,x,i,u,c,p),y=ms(u,c,p[0],p[1]),y<g){for(g=y,_=0;_<i;++_)d[_]=p[_];d.length=i,x+=i}else x+=i*Math.max((Math.sqrt(y)-Math.sqrt(g))/o|0,1);if(_p(r,t-i,e,i,u,c,p),y=ms(u,c,p[0],p[1]),y<g){for(g=y,_=0;_<i;++_)d[_]=p[_];d.length=i}return g}function X1(r,e,t,i,o,l,u,c,d,g,p){p=p||[NaN,NaN];for(let _=0,y=t.length;_<y;++_){const x=t[_];g=Dm(r,e,x,i,o,l,u,c,d,g,p),e=x}return g}function B1(r,e,t,i){for(let o=0,l=t.length;o<l;++o)r[e++]=t[o];return e}function Om(r,e,t,i){for(let o=0,l=t.length;o<l;++o){const u=t[o];for(let c=0;c<i;++c)r[e++]=u[c]}return e}function Y1(r,e,t,i,o){o=o||[];let l=0;for(let u=0,c=t.length;u<c;++u){const d=Om(r,e,t[u],i);o[l++]=d,e=d}return o.length=l,o}function Wh(r,e,t,i,o,l,u){const c=(t-e)/i;if(c<3){for(;e<t;e+=i)l[u++]=r[e],l[u++]=r[e+1];return u}const d=new Array(c);d[0]=1,d[c-1]=1;const g=[e,t-i];let p=0;for(;g.length>0;){const _=g.pop(),y=g.pop();let x=0;const v=r[y],w=r[y+1],S=r[_],I=r[_+1];for(let T=y+i;T<_;T+=i){const O=r[T],A=r[T+1],P=f1(O,A,v,w,S,I);P>x&&(p=T,x=P)}x>o&&(d[(p-e)/i]=1,y+i<p&&g.push(y,p),p+i<_&&g.push(p,_))}for(let _=0;_<c;++_)d[_]&&(l[u++]=r[e+_*i],l[u++]=r[e+_*i+1]);return u}function V1(r,e,t,i,o,l,u,c){for(let d=0,g=t.length;d<g;++d){const p=t[d];u=Wh(r,e,p,i,o,l,u),c.push(u),e=p}return u}function yr(r,e){return e*Math.round(r/e)}function K1(r,e,t,i,o,l,u){if(e==t)return u;let c=yr(r[e],o),d=yr(r[e+1],o);e+=i,l[u++]=c,l[u++]=d;let g,p;do if(g=yr(r[e],o),p=yr(r[e+1],o),e+=i,e==t)return l[u++]=g,l[u++]=p,u;while(g==c&&p==d);for(;e<t;){const _=yr(r[e],o),y=yr(r[e+1],o);if(e+=i,_==g&&y==p)continue;const x=g-c,v=p-d,w=_-c,S=y-d;if(x*S==v*w&&(x<0&&w<x||x==w||x>0&&w>x)&&(v<0&&S<v||v==S||v>0&&S>v)){g=_,p=y;continue}l[u++]=g,l[u++]=p,c=g,d=p,g=_,p=y}return l[u++]=g,l[u++]=p,u}function Fm(r,e,t,i,o,l,u,c){for(let d=0,g=t.length;d<g;++d){const p=t[d];u=K1(r,e,p,i,o,l,u),c.push(u),e=p}return u}function fs(r,e,t,i,o){o=o!==void 0?o:[];let l=0;for(let u=e;u<t;u+=i)o[l++]=r.slice(u,u+i);return o.length=l,o}function wa(r,e,t,i,o){o=o!==void 0?o:[];let l=0;for(let u=0,c=t.length;u<c;++u){const d=t[u];o[l++]=fs(r,e,d,i,o[l]),e=d}return o.length=l,o}function yp(r,e,t,i,o){o=o!==void 0?o:[];let l=0;for(let u=0,c=t.length;u<c;++u){const d=t[u];o[l++]=d.length===1&&d[0]===e?[]:wa(r,e,d,i,o[l]),e=d[d.length-1]}return o.length=l,o}function Nm(r,e,t,i){let o=0;const l=r[t-i],u=r[t-i+1];let c=0,d=0;for(;e<t;e+=i){const g=r[e]-l,p=r[e+1]-u;o+=d*g-c*p,c=g,d=p}return o/2}function Z1(r,e,t,i){let o=0;for(let l=0,u=t.length;l<u;++l){const c=t[l];o+=Nm(r,e,c,i),e=c}return o}class Po extends bh{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new Po(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,o){return o<fm(this.getExtent(),e,t)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(km(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Dm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,o))}getArea(){return Nm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return fs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=Wh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Po(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Om(this.flatCoordinates,0,e,this.stride),this.changed()}}class Xo extends bh{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Xo(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,o){const l=this.flatCoordinates,u=ms(e,t,l[0],l[1]);if(u<o){const c=this.stride;for(let d=0;d<c;++d)i[d]=l[d];return i.length=c,u}return o}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return Ih(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return gm(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=B1(this.flatCoordinates,0,e,this.stride),this.changed()}}function H1(r,e,t,i,o){return!_m(o,function(u){return!vr(r,e,t,i,u[0],u[1])})}function vr(r,e,t,i,o,l){let u=0,c=r[t-i],d=r[t-i+1];for(;e<t;e+=i){const g=r[e],p=r[e+1];d<=l?p>l&&(g-c)*(l-d)-(o-c)*(p-d)>0&&u++:p<=l&&(g-c)*(l-d)-(o-c)*(p-d)<0&&u--,c=g,d=p}return u!==0}function zm(r,e,t,i,o,l){if(t.length===0||!vr(r,e,t[0],i,o,l))return!1;for(let u=1,c=t.length;u<c;++u)if(vr(r,t[u-1],t[u],i,o,l))return!1;return!0}function jh(r,e,t,i,o,l,u){let c,d,g,p,_,y,x;const v=o[l+1],w=[];for(let T=0,O=t.length;T<O;++T){const A=t[T];for(p=r[A-i],y=r[A-i+1],c=e;c<A;c+=i)_=r[c],x=r[c+1],(v<=y&&x<=v||y<=v&&v<=x)&&(g=(v-y)/(x-y)*(_-p)+p,w.push(g)),p=_,y=x}let S=NaN,I=-1/0;for(w.sort(Vi),p=w[0],c=1,d=w.length;c<d;++c){_=w[c];const T=Math.abs(_-p);T>I&&(g=(p+_)/2,zm(r,e,t,i,g,v)&&(S=g,I=T)),p=_}return isNaN(S)&&(S=o[l]),u?(u.push(S,v,I),u):[S,v,I]}function $1(r,e,t,i,o){let l=[];for(let u=0,c=t.length;u<c;++u){const d=t[u];l=jh(r,e,d,i,o,2*u,l),e=d[d.length-1]}return l}function q1(r,e,t,i,o){let l;for(e+=i;e<t;e+=i)if(l=o(r.slice(e-i,e),r.slice(e,e+i)),l)return l;return!1}function Gm(r,e,t,i,o){const l=mm(Xt(),r,e,t,i);return bt(o,l)?hs(o,l)||l[0]>=o[0]&&l[2]<=o[2]||l[1]>=o[1]&&l[3]<=o[3]?!0:q1(r,e,t,i,function(u,c){return r1(o,u,c)}):!1}function Um(r,e,t,i,o){return!!(Gm(r,e,t,i,o)||vr(r,e,t,i,o[0],o[1])||vr(r,e,t,i,o[0],o[3])||vr(r,e,t,i,o[2],o[1])||vr(r,e,t,i,o[2],o[3]))}function Q1(r,e,t,i,o){if(!Um(r,e,t[0],i,o))return!1;if(t.length===1)return!0;for(let l=1,u=t.length;l<u;++l)if(H1(r,t[l-1],t[l],i,o)&&!Gm(r,t[l-1],t[l],i,o))return!1;return!0}function J1(r,e,t,i){for(;e<t-i;){for(let o=0;o<i;++o){const l=r[e+o];r[e+o]=r[t-i+o],r[t-i+o]=l}e+=i,t-=i}}function Xh(r,e,t,i){let o=0,l=r[t-i],u=r[t-i+1];for(;e<t;e+=i){const c=r[e],d=r[e+1];o+=(c-l)*(d+u),l=c,u=d}return o===0?void 0:o>0}function eE(r,e,t,i,o){o=o!==void 0?o:!1;for(let l=0,u=t.length;l<u;++l){const c=t[l],d=Xh(r,e,c,i);if(l===0){if(o&&d||!o&&!d)return!1}else if(o&&!d||!o&&d)return!1;e=c}return!0}function Ep(r,e,t,i,o){o=o!==void 0?o:!1;for(let l=0,u=t.length;l<u;++l){const c=t[l],d=Xh(r,e,c,i);(l===0?o&&d||!o&&!d:o&&!d||!o&&d)&&J1(r,e,c,i),e=c}return e}function tE(r,e){const t=[];let i=0,o=0,l;for(let u=0,c=e.length;u<c;++u){const d=e[u],g=Xh(r,i,d,2);if(l===void 0&&(l=g),g===l)t.push(e.slice(o,u+1));else{if(t.length===0)continue;t[t.length-1].push(e[o])}o=u+1,i=d}return t}class ko extends bh{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Th(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new ko(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,o){return o<fm(this.getExtent(),e,t)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(j1(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),X1(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,o))}containsXY(e,t){return zm(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return Z1(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),Ep(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,wa(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=$i(this.getExtent());this.flatInteriorPoint_=jh(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Xo(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Po(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,o=[];let l=0;for(let u=0,c=i.length;u<c;++u){const d=i[u],g=new Po(t.slice(l,d),e);o.push(g),l=d}return o}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;eE(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Ep(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=Fm(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new ko(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return Q1(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Y1(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function vp(r){if(Wa(r))throw new Error("Cannot create polygon from empty extent");const e=r[0],t=r[1],i=r[2],o=r[3],l=[e,t,e,o,i,o,i,t,e,t];return new ko(l,"XY",[l.length])}const cn={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},we={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},Do={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var dt={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};dt.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};dt.max=dt.whitepoint[2].D65;dt.rgb=function(r,e){e=e||dt.whitepoint[2].E;var t=r[0]/e[0],i=r[1]/e[1],o=r[2]/e[2],l,u,c;return l=t*3.240969941904521+i*-1.537383177570093+o*-.498610760293,u=t*-.96924363628087+i*1.87596750150772+o*.041555057407175,c=t*.055630079696993+i*-.20397695888897+o*1.056971514242878,l=l>.0031308?1.055*Math.pow(l,1/2.4)-.055:l=l*12.92,u=u>.0031308?1.055*Math.pow(u,1/2.4)-.055:u=u*12.92,c=c>.0031308?1.055*Math.pow(c,1/2.4)-.055:c=c*12.92,l=Math.min(Math.max(0,l),1),u=Math.min(Math.max(0,u),1),c=Math.min(Math.max(0,c),1),[l*255,u*255,c*255]};Do.xyz=function(r,e){var t=r[0]/255,i=r[1]/255,o=r[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92;var l=t*.41239079926595+i*.35758433938387+o*.18048078840183,u=t*.21263900587151+i*.71516867876775+o*.072192315360733,c=t*.019330818715591+i*.11919477979462+o*.95053215224966;return e=e||dt.whitepoint[2].E,[l*e[0],u*e[1],c*e[2]]};const Bh={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(r,e,t){var i,o,l,u,c,d,g,p,_,y,x,v,w;if(l=r[0],u=r[1],c=r[2],l===0)return[0,0,0];var S=.0011070564598794539;return e=e||"D65",t=t||2,_=dt.whitepoint[t][e][0],y=dt.whitepoint[t][e][1],x=dt.whitepoint[t][e][2],v=4*_/(_+15*y+3*x),w=9*y/(_+15*y+3*x),i=u/(13*l)+v||0,o=c/(13*l)+w||0,g=l>8?y*Math.pow((l+16)/116,3):y*l*S,d=g*9*i/(4*o)||0,p=g*(12-3*i-20*o)/(4*o)||0,[d,g,p]}};dt.luv=function(r,e,t){var i,o,l,u,c,d,g,p,_,y,x,v,w,S=.008856451679035631,I=903.2962962962961;e=e||"D65",t=t||2,_=dt.whitepoint[t][e][0],y=dt.whitepoint[t][e][1],x=dt.whitepoint[t][e][2],v=4*_/(_+15*y+3*x),w=9*y/(_+15*y+3*x),d=r[0],g=r[1],p=r[2],i=4*d/(d+15*g+3*p)||0,o=9*g/(d+15*g+3*p)||0;var T=g/y;return l=T<=S?I*T:116*Math.pow(T,1/3)-16,u=13*l*(i-v),c=13*l*(o-w),[l,u,c]};var bm={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(r){var e=r[0],t=r[1],i=r[2],o,l,u;return u=i/360*2*Math.PI,o=t*Math.cos(u),l=t*Math.sin(u),[e,o,l]},xyz:function(r){return Bh.xyz(bm.luv(r))}};Bh.lchuv=function(r){var e=r[0],t=r[1],i=r[2],o=Math.sqrt(t*t+i*i),l=Math.atan2(i,t),u=l*360/2/Math.PI;return u<0&&(u+=360),[e,o,u]};dt.lchuv=function(r){return Bh.lchuv(dt.luv(r))};const xp={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var wp={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function nE(r){var p,_;var e,t=[],i=1,o;if(typeof r=="number")return{space:"rgb",values:[r>>>16,(r&65280)>>>8,r&255],alpha:1};if(typeof r=="number")return{space:"rgb",values:[r>>>16,(r&65280)>>>8,r&255],alpha:1};if(r=String(r).toLowerCase(),xp[r])t=xp[r].slice(),o="rgb";else if(r==="transparent")i=0,o="rgb",t=[0,0,0];else if(r[0]==="#"){var l=r.slice(1),u=l.length,c=u<=4;i=1,c?(t=[parseInt(l[0]+l[0],16),parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16)],u===4&&(i=parseInt(l[3]+l[3],16)/255)):(t=[parseInt(l[0]+l[1],16),parseInt(l[2]+l[3],16),parseInt(l[4]+l[5],16)],u===8&&(i=parseInt(l[6]+l[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),o="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(r)){var d=e[1];o=d.replace(/a$/,"");var g=o==="cmyk"?4:o==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),o==="color"&&(o=t.shift()),t=t.map(function(y,x){if(y[y.length-1]==="%")return y=parseFloat(y)/100,x===3?y:o==="rgb"?y*255:o[0]==="h"||o[0]==="l"&&!x?y*100:o==="lab"?y*125:o==="lch"?x<2?y*150:y*360:o[0]==="o"&&!x?y:o==="oklab"?y*.4:o==="oklch"?x<2?y*.4:y*360:y;if(o[x]==="h"||x===2&&o[o.length-1]==="h"){if(wp[y]!==void 0)return wp[y];if(y.endsWith("deg"))return parseFloat(y);if(y.endsWith("turn"))return parseFloat(y)*360;if(y.endsWith("grad"))return parseFloat(y)*360/400;if(y.endsWith("rad"))return parseFloat(y)*180/Math.PI}return y==="none"?0:parseFloat(y)}),i=t.length>g?t.pop():1}else/[0-9](?:\s|\/|,)/.test(r)&&(t=r.match(/([0-9]+)/g).map(function(y){return parseFloat(y)}),o=((_=(p=r.match(/([a-z])/ig))==null?void 0:p.join(""))==null?void 0:_.toLowerCase())||"rgb");return{space:o,values:t,alpha:i}}const jc={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(r){var e=r[0]/360,t=r[1]/100,i=r[2]/100,o,l,u,c,d,g=0;if(t===0)return d=i*255,[d,d,d];for(l=i<.5?i*(1+t):i+t-i*t,o=2*i-l,c=[0,0,0];g<3;)u=e+1/3*-(g-1),u<0?u++:u>1&&u--,d=6*u<1?o+(l-o)*6*u:2*u<1?l:3*u<2?o+(l-o)*(2/3-u)*6:o,c[g++]=d*255;return c}};Do.hsl=function(r){var e=r[0]/255,t=r[1]/255,i=r[2]/255,o=Math.min(e,t,i),l=Math.max(e,t,i),u=l-o,c,d,g;return l===o?c=0:e===l?c=(t-i)/u:t===l?c=2+(i-e)/u:i===l&&(c=4+(e-t)/u),c=Math.min(c*60,360),c<0&&(c+=360),g=(o+l)/2,l===o?d=0:g<=.5?d=u/(l+o):d=u/(2-l-o),[c,d*100,g*100]};function iE(r){Array.isArray(r)&&r.raw&&(r=String.raw(...arguments)),r instanceof Number&&(r=+r);var e,t=nE(r);if(!t.space)return[];const i=t.space[0]==="h"?jc.min:Do.min,o=t.space[0]==="h"?jc.max:Do.max;return e=Array(3),e[0]=Math.min(Math.max(t.values[0],i[0]),o[0]),e[1]=Math.min(Math.max(t.values[1],i[1]),o[1]),e[2]=Math.min(Math.max(t.values[2],i[2]),o[2]),t.space[0]==="h"&&(e=jc.rgb(e)),e.push(Math.min(Math.max(t.alpha,0),1)),e}const Yh=[NaN,NaN,NaN,0];function rE(r){return typeof r=="string"?r:Kh(r)}const sE=1024,mo={};let Xc=0;function oE(r){if(r.length===4)return r;const e=r.slice();return e[3]=1,e}function Sp(r){const e=dt.lchuv(Do.xyz(r));return e[3]=r[3],e}function lE(r){const e=dt.rgb(bm.xyz(r));return e[3]=r[3],e}function Vh(r){if(r==="none")return Yh;if(mo.hasOwnProperty(r))return mo[r];if(Xc>=sE){let t=0;for(const i in mo)t++&3||(delete mo[i],--Xc)}const e=iE(r);if(e.length!==4)throw new Error('failed to parse "'+r+'" as color');for(const t of e)if(isNaN(t))throw new Error('failed to parse "'+r+'" as color');return Wm(e),mo[r]=e,++Xc,e}function Ts(r){return Array.isArray(r)?r:Vh(r)}function Wm(r){return r[0]=Ke(r[0]+.5|0,0,255),r[1]=Ke(r[1]+.5|0,0,255),r[2]=Ke(r[2]+.5|0,0,255),r[3]=Ke(r[3],0,1),r}function Kh(r){let e=r[0];e!=(e|0)&&(e=e+.5|0);let t=r[1];t!=(t|0)&&(t=t+.5|0);let i=r[2];i!=(i|0)&&(i=i+.5|0);const o=r[3]===void 0?1:Math.round(r[3]*1e3)/1e3;return"rgba("+e+","+t+","+i+","+o+")"}const qi=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",aE=qi.includes("firefox"),uE=qi.includes("safari")&&!qi.includes("chrom");uE&&(qi.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(qi));const cE=qi.includes("webkit")&&!qi.includes("edge"),jm=qi.includes("macintosh"),Xm=typeof devicePixelRatio<"u"?devicePixelRatio:1,Zh=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Bm=typeof Image<"u"&&Image.prototype.decode,Ym=function(){let r=!1;try{const e=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return r}();function Je(r,e,t,i){let o;return t&&t.length?o=t.shift():Zh?o=new OffscreenCanvas(r||300,e||300):o=document.createElement("canvas"),r&&(o.width=r),e&&(o.height=e),o.getContext("2d",i)}let Bc;function Sa(){return Bc||(Bc=Je(1,1)),Bc}function Ba(r){const e=r.canvas;e.width=1,e.height=1,r.clearRect(0,0,1,1)}function Cp(r,e){const t=e.parentNode;t&&t.replaceChild(r,e)}function hE(r){for(;r.lastChild;)r.lastChild.remove()}function dE(r,e){const t=r.childNodes;for(let i=0;;++i){const o=t[i],l=e[i];if(!o&&!l)break;if(o!==l){if(!o){r.appendChild(l);continue}if(!l){r.removeChild(o),--i;continue}r.insertBefore(l,o)}}}function fE(r,e,t){const i=r;let o=!0,l=!1,u=!1;const c=[_a(i,Ee.LOAD,function(){u=!0,l||e()})];return i.src&&Bm?(l=!0,i.decode().then(function(){o&&e()}).catch(function(d){o&&(u?e():t())})):c.push(_a(i,Ee.ERROR,t)),function(){o=!1,c.forEach(Ue)}}function gE(r,e){return new Promise((t,i)=>{function o(){u(),t(r)}function l(){u(),i(new Error("Image load error"))}function u(){r.removeEventListener("load",o),r.removeEventListener("error",l)}r.addEventListener("load",o),r.addEventListener("error",l)})}function pE(r,e){return e&&(r.src=e),r.src&&Bm?new Promise((t,i)=>r.decode().then(()=>t(r)).catch(o=>r.complete&&r.width?t(r):i(o))):gE(r)}class mE{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];!(e++&3)&&!i.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,i){const o=Yc(e,t,i);return o in this.cache_?this.cache_[o]:null}getPattern(e,t,i){const o=Yc(e,t,i);return o in this.patternCache_?this.patternCache_[o]:null}set(e,t,i,o,l){const u=Yc(e,t,i),c=u in this.cache_;this.cache_[u]=o,l&&(o.getImageState()===we.IDLE&&o.load(),o.getImageState()===we.LOADING?o.ready().then(()=>{this.patternCache_[u]=Sa().createPattern(o.getImage(1),"repeat")}):this.patternCache_[u]=Sa().createPattern(o.getImage(1),"repeat")),c||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function Yc(r,e,t){const i=t?Ts(t):"null";return e+":"+r+":"+i}const hn=new mE;let _o=null;class Vm extends Oa{constructor(e,t,i,o,l){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=l,this.imageState_=o===void 0?we.IDLE:o,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===we.LOADED){_o||(_o=Je(1,1,void 0,{willReadFrequently:!0})),_o.drawImage(this.image_,0,0);try{_o.getImageData(0,0,1,1),this.tainted_=!1}catch{_o=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Ee.CHANGE)}handleImageError_(){this.imageState_=we.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=we.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=Je(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===we.IDLE){this.image_||this.initializeImage_(),this.imageState_=we.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&pE(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==we.LOADED)return;const t=this.image_,i=Je(Math.ceil(t.width*e),Math.ceil(t.height*e)),o=i.canvas;i.scale(e,e),i.drawImage(t,0,0),i.globalCompositeOperation="multiply",i.fillStyle=rE(this.color_),i.fillRect(0,0,o.width/e,o.height/e),i.globalCompositeOperation="destination-in",i.drawImage(t,0,0),this.canvas_[e]=o}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===we.LOADED||this.imageState_===we.ERROR)e();else{const t=()=>{(this.imageState_===we.LOADED||this.imageState_===we.ERROR)&&(this.removeEventListener(Ee.CHANGE,t),e())};this.addEventListener(Ee.CHANGE,t)}})),this.ready_}}function Hh(r,e,t,i,o,l){let u=e===void 0?void 0:hn.get(e,t,o);return u||(u=new Vm(r,r&&"src"in r?r.src||void 0:e,t,i,o),hn.set(e,t,o,u,l)),l&&u&&!hn.getPattern(e,t,o)&&hn.set(e,t,o,u,l),u}class Sr{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Sr({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=Hh(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===we.IDLE&&t.load(),t.getImageState()===we.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Le(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:Ts(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function Rp(r,e,t,i,o,l,u){let c,d;const g=(t-e)/i;if(g===1)c=e;else if(g===2)c=e,d=o;else if(g!==0){let p=r[e],_=r[e+1],y=0;const x=[0];for(let S=e+i;S<t;S+=i){const I=r[S],T=r[S+1];y+=Math.sqrt((I-p)*(I-p)+(T-_)*(T-_)),x.push(y),p=I,_=T}const v=o*y,w=Xy(x,v);w<0?(d=(v-x[-w-2])/(x[-w-1]-x[-w-2]),c=e+(-w-2)*i):c=e+w*i}u=u>1?u:2,l=l||new Array(u);for(let p=0;p<u;++p)l[p]=c===void 0?NaN:d===void 0?r[c+p]:an(r[c+p],r[c+i+p],d);return l}function _E(r,e,t,i){let o=r[e],l=r[e+1],u=0;for(let c=e+i;c<t;c+=i){const d=r[c],g=r[c+1];u+=Math.sqrt((d-o)*(d-o)+(g-l)*(g-l)),o=d,l=g}return u}class Bo{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Bo({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}function Tp(r){return r[0]>0&&r[1]>0}function yE(r,e,t){return t===void 0&&(t=[0,0]),t[0]=r[0]*e+.5|0,t[1]=r[1]*e+.5|0,t}function jt(r,e){return Array.isArray(r)?r:(e===void 0?e=[r,r]:(e[0]=r,e[1]=r),e)}class Ya{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=jt(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Ya({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return ke()}getImage(e){return ke()}getHitDetectionImage(){return ke()}getPixelRatio(e){return 1}getImageState(){return ke()}getImageSize(){return ke()}getOrigin(){return ke()}getSize(){return ke()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=jt(e)}listenImageChange(e){ke()}load(){ke()}unlistenImageChange(e){ke()}ready(){return Promise.resolve()}}function jn(r){return r?Array.isArray(r)?Kh(r):typeof r=="object"&&"src"in r?EE(r):r:null}function EE(r){if(!r.offset||!r.size)return hn.getPattern(r.src,"anonymous",r.color);const e=r.src+":"+r.offset,t=hn.getPattern(e,void 0,r.color);if(t)return t;const i=hn.get(r.src,"anonymous",null);if(i.getImageState()!==we.LOADED)return null;const o=Je(r.size[0],r.size[1]);return o.drawImage(i.getImage(1),r.offset[0],r.offset[1],r.size[0],r.size[1],0,0,r.size[0],r.size[1]),Hh(o.canvas,e,void 0,we.LOADED,r.color,!0),hn.getPattern(e,void 0,r.color)}const ca="ol-hidden",Va="ol-unselectable",$h="ol-control",Ip="ol-collapsed",vE=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Lp=["style","variant","weight","size","lineHeight","family"],Km=function(r){const e=r.match(vE);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,o=Lp.length;i<o;++i){const l=e[i+1];l!==void 0&&(t[Lp[i]]=l)}return t.families=t.family.split(/,\s?/),t},Zm="10px sans-serif",Gt="#000",Is="round",li=[],ai=0,Ls="round",Oo=10,Fo="#000",No="center",Ca="middle",xr=[0,0,0,0],zo=1,si=new Xn;let ls=null,fh;const gh={},xE=function(){const e="32px ",t=["monospace","serif"],i=t.length,o="wmytzilWMYTZIL@#/&?$%10";let l,u;function c(g,p,_){let y=!0;for(let x=0;x<i;++x){const v=t[x];if(u=Ra(g+" "+p+" "+e+v,o),_!=v){const w=Ra(g+" "+p+" "+e+_+","+v,o);y=y&&w!=u}}return!!y}function d(){let g=!0;const p=si.getKeys();for(let _=0,y=p.length;_<y;++_){const x=p[_];if(si.get(x)<100){const[v,w,S]=x.split(`
`);c(v,w,S)?(bo(gh),ls=null,fh=void 0,si.set(x,100)):(si.set(x,si.get(x)+1,!0),g=!1)}}g&&(clearInterval(l),l=void 0)}return function(g){const p=Km(g);if(!p)return;const _=p.families;for(let y=0,x=_.length;y<x;++y){const v=_[y],w=p.style+`
`+p.weight+`
`+v;si.get(w)===void 0&&(si.set(w,100,!0),c(p.style,p.weight,v)||(si.set(w,0,!0),l===void 0&&(l=setInterval(d,32))))}}}(),wE=function(){let r;return function(e){let t=gh[e];if(t==null){if(Zh){const i=Km(e),o=Hm(e,"Žg");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(o.actualBoundingBoxAscent+o.actualBoundingBoxDescent)}else r||(r=document.createElement("div"),r.innerHTML="M",r.style.minHeight="0",r.style.maxHeight="none",r.style.height="auto",r.style.padding="0",r.style.border="none",r.style.position="absolute",r.style.display="block",r.style.left="-99999px"),r.style.font=e,document.body.appendChild(r),t=r.offsetHeight,document.body.removeChild(r);gh[e]=t}return t}}();function Hm(r,e){return ls||(ls=Je(1,1)),r!=fh&&(ls.font=r,fh=ls.font),ls.measureText(e)}function Ra(r,e){return Hm(r,e).width}function Ap(r,e,t){if(e in t)return t[e];const i=e.split(`
`).reduce((o,l)=>Math.max(o,Ra(r,l)),0);return t[e]=i,i}function SE(r,e){const t=[],i=[],o=[];let l=0,u=0,c=0,d=0;for(let g=0,p=e.length;g<=p;g+=2){const _=e[g];if(_===`
`||g===p){l=Math.max(l,u),o.push(u),u=0,c+=d,d=0;continue}const y=e[g+1]||r.font,x=Ra(y,_);t.push(x),u+=x;const v=wE(y);i.push(v),d=Math.max(d,v)}return{width:l,height:c,widths:t,heights:i,lineWidths:o}}function CE(r,e,t,i,o,l,u,c,d,g,p){r.save(),t!==1&&(r.globalAlpha===void 0?r.globalAlpha=_=>_.globalAlpha*=t:r.globalAlpha*=t),e&&r.transform.apply(r,e),i.contextInstructions?(r.translate(d,g),r.scale(p[0],p[1]),RE(i,r)):p[0]<0||p[1]<0?(r.translate(d,g),r.scale(p[0],p[1]),r.drawImage(i,o,l,u,c,0,0,u,c)):r.drawImage(i,o,l,u,c,d,g,u*p[0],c*p[1]),r.restore()}function RE(r,e){const t=r.contextInstructions;for(let i=0,o=t.length;i<o;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}class Ka extends Ya{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?we.LOADING:we.LOADED,this.imageState_===we.LOADING&&this.ready().then(()=>this.imageState_=we.LOADED),this.render()}clone(){const e=this.getScale(),t=new Ka({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var l,u;const t=(l=this.fill_)==null?void 0:l.getKey(),i=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let o=(u=hn.get(i,null,null))==null?void 0:u.getImage(1);if(!o){const c=this.renderOptions_,d=Math.ceil(c.size*e),g=Je(d,d);this.draw_(c,g,e),o=g.canvas,hn.set(i,null,null,new Vm(o,void 0,null,we.LOADED,null))}return o}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let o=this.radius,l=this.radius2_===void 0?o:this.radius2_;if(o<l){const j=o;o=l,l=j}const u=this.radius2_===void 0?this.points_:this.points_*2,c=2*Math.PI/u,d=l*Math.sin(c),g=Math.sqrt(l*l-d*d),p=o-g,_=Math.sqrt(d*d+p*p),y=_/d;if(e==="miter"&&y<=i)return y*t;const x=t/2/y,v=t/2*(p/_),S=Math.sqrt((o+x)*(o+x)+v*v)-o;if(this.radius2_===void 0||e==="bevel")return S*2;const I=o*Math.sin(c),T=Math.sqrt(o*o-I*I),O=l-T,P=Math.sqrt(I*I+O*O)/I;if(P<=i){const j=P*t/2-l-o;return 2*Math.max(S,j)}return S*2}createRenderOptions(){let e=Is,t=Ls,i=0,o=null,l=0,u,c=0;this.stroke_&&(u=jn(this.stroke_.getColor()??Fo),c=this.stroke_.getWidth()??zo,o=this.stroke_.getLineDash(),l=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Ls,e=this.stroke_.getLineCap()??Is,i=this.stroke_.getMiterLimit()??Oo);const d=this.calculateLineJoinSize_(t,c,i),g=Math.max(this.radius,this.radius2_||0),p=Math.ceil(2*g+d);return{strokeStyle:u,strokeWidth:c,size:p,lineCap:e,lineDash:o,lineDashOffset:l,lineJoin:t,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let o=this.fill_.getColor();o===null&&(o=Gt),t.fillStyle=jn(o),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let i=this.fill_.getColor(),o=0;typeof i=="string"&&(i=Ts(i)),i===null?o=1:Array.isArray(i)&&(o=i.length===4?i[3]:1),o===0&&(t=Je(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const i=this.radius;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const o=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(t*=2);const l=this.angle_-Math.PI/2,u=2*Math.PI/t;for(let c=0;c<t;c++){const d=l+c*u,g=c%2===0?i:o;e.lineTo(g*Math.cos(d),g*Math.sin(d))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Gt,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class Yo extends Ka{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new Yo({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class ui{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=Mp,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new ui({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=Mp,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function TE(r){let e;if(typeof r=="function")e=r;else{let t;Array.isArray(r)?t=r:(Me(typeof r.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[r]),e=function(){return t}}return e}let Vc=null;function $m(r,e){if(!Vc){const t=new Sr({color:"rgba(255,255,255,0.4)"}),i=new Bo({color:"#3399CC",width:1.25});Vc=[new ui({image:new Yo({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return Vc}function Mp(r){return r.getGeometry()}const IE="#333";class Za{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=jt(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Sr({color:IE}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Za({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=jt(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const Fe={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class qm extends Xn{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Fe.OPACITY]=e.opacity!==void 0?e.opacity:1,Me(typeof t[Fe.OPACITY]=="number","Layer opacity must be a number"),t[Fe.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Fe.Z_INDEX]=e.zIndex,t[Fe.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Fe.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Fe.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Fe.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return t.opacity=Ke(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=i===void 0&&!t.managed?1/0:i,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return ke()}getLayerStatesArray(e){return ke()}getExtent(){return this.get(Fe.EXTENT)}getMaxResolution(){return this.get(Fe.MAX_RESOLUTION)}getMinResolution(){return this.get(Fe.MIN_RESOLUTION)}getMinZoom(){return this.get(Fe.MIN_ZOOM)}getMaxZoom(){return this.get(Fe.MAX_ZOOM)}getOpacity(){return this.get(Fe.OPACITY)}getSourceState(){return ke()}getVisible(){return this.get(Fe.VISIBLE)}getZIndex(){return this.get(Fe.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Fe.EXTENT,e)}setMaxResolution(e){this.set(Fe.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Fe.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Fe.MAX_ZOOM,e)}setMinZoom(e){this.set(Fe.MIN_ZOOM,e)}setOpacity(e){Me(typeof e=="number","Layer opacity must be a number"),this.set(Fe.OPACITY,e)}setVisible(e){this.set(Fe.VISIBLE,e)}setZIndex(e){this.set(Fe.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const wt={ANIMATING:0,INTERACTING:1},Cn={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},LE=42,qh=256;function Pp(r,e,t){return function(i,o,l,u,c){if(!i)return;if(!o&&!e)return i;const d=e?0:l[0]*o,g=e?0:l[1]*o,p=c?c[0]:0,_=c?c[1]:0;let y=r[0]+d/2+p,x=r[2]-d/2+p,v=r[1]+g/2+_,w=r[3]-g/2+_;y>x&&(y=(x+y)/2,x=y),v>w&&(v=(w+v)/2,w=v);let S=Ke(i[0],y,x),I=Ke(i[1],v,w);if(u&&t&&o){const T=30*o;S+=-T*Math.log(1+Math.max(0,y-i[0])/T)+T*Math.log(1+Math.max(0,i[0]-x)/T),I+=-T*Math.log(1+Math.max(0,v-i[1])/T)+T*Math.log(1+Math.max(0,i[1]-w)/T)}return[S,I]}}function AE(r){return r}function Qh(r,e,t,i){const o=Ae(e)/t[0],l=at(e)/t[1];return i?Math.min(r,Math.max(o,l)):Math.min(r,Math.min(o,l))}function Jh(r,e,t){let i=Math.min(r,e);const o=50;return i*=Math.log(1+o*Math.max(0,r/e-1))/o+1,t&&(i=Math.max(i,t),i/=Math.log(1+o*Math.max(0,t/r-1))/o+1),Ke(i,t/2,e*2)}function ME(r,e,t,i){return e=e!==void 0?e:!0,function(o,l,u,c){if(o!==void 0){const d=r[0],g=r[r.length-1],p=t?Qh(d,t,u,i):d;if(c)return e?Jh(o,p,g):Ke(o,g,p);const _=Math.min(p,o),y=Math.floor(Rh(r,_,l));return r[y]>p&&y<r.length-1?r[y+1]:r[y]}}}function PE(r,e,t,i,o,l){return i=i!==void 0?i:!0,t=t!==void 0?t:0,function(u,c,d,g){if(u!==void 0){const p=o?Qh(e,o,d,l):e;if(g)return i?Jh(u,p,t):Ke(u,t,p);const _=1e-9,y=Math.ceil(Math.log(e/p)/Math.log(r)-_),x=-c*(.5-_)+.5,v=Math.min(p,u),w=Math.floor(Math.log(e/v)/Math.log(r)+x),S=Math.max(y,w),I=e/Math.pow(r,S);return Ke(I,t,p)}}}function kp(r,e,t,i,o){return t=t!==void 0?t:!0,function(l,u,c,d){if(l!==void 0){const g=i?Qh(r,i,c,o):r;return!t||!d?Ke(l,e,g):Jh(l,g,e)}}}function ed(r){if(r!==void 0)return 0}function Dp(r){if(r!==void 0)return r}function kE(r){const e=2*Math.PI/r;return function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function DE(r){const e=Ki(5);return function(t,i){return i||t===void 0?t:Math.abs(t)<=e?0:t}}function Qm(r){return Math.pow(r,3)}function As(r){return 1-Qm(1-r)}function OE(r){return 3*r*r-2*r*r*r}function FE(r){return r}const Kc=0;class Un extends Xn{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=zh(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&Lm(),e.center&&(e.center=ri(e.center,this.projection_)),e.extent&&(e.extent=Bi(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const c in Cn)delete t[c];this.setProperties(t,!0);const i=zE(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const o=NE(e),l=i.constraint,u=GE(e);this.constraints_={center:o,resolution:l,rotation:u},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const o=e||[0,0,0,0];t=t||[0,0,0,0];const l=this.getResolution(),u=l/2*(o[3]-t[3]+t[1]-o[1]),c=l/2*(o[0]-t[0]+t[2]-o[2]);this.setCenterInternal([i[0]+u,i[1]-c])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let o=arguments[i];o.center&&(o=Object.assign({},o),o.center=ri(o.center,this.getProjection())),o.anchor&&(o=Object.assign({},o),o.anchor=ri(o.anchor,this.getProjection())),t[i]=o}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,i;t>1&&typeof arguments[t-1]=="function"&&(i=arguments[t-1],--t);let o=0;for(;o<t&&!this.isDef();++o){const p=arguments[o];p.center&&this.setCenterInternal(p.center),p.zoom!==void 0?this.setZoom(p.zoom):p.resolution&&this.setResolution(p.resolution),p.rotation!==void 0&&this.setRotation(p.rotation)}if(o===t){i&&ha(i,!0);return}let l=Date.now(),u=this.targetCenter_.slice(),c=this.targetResolution_,d=this.targetRotation_;const g=[];for(;o<t;++o){const p=arguments[o],_={start:l,complete:!1,anchor:p.anchor,duration:p.duration!==void 0?p.duration:1e3,easing:p.easing||OE,callback:i};if(p.center&&(_.sourceCenter=u,_.targetCenter=p.center.slice(),u=_.targetCenter),p.zoom!==void 0?(_.sourceResolution=c,_.targetResolution=this.getResolutionForZoom(p.zoom),c=_.targetResolution):p.resolution&&(_.sourceResolution=c,_.targetResolution=p.resolution,c=_.targetResolution),p.rotation!==void 0){_.sourceRotation=d;const y=_s(p.rotation-d+Math.PI,2*Math.PI)-Math.PI;_.targetRotation=d+y,d=_.targetRotation}UE(_)?_.complete=!0:l+=_.duration,g.push(_)}this.animations_.push(g),this.setHint(wt.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[wt.ANIMATING]>0}getInteracting(){return this.hints_[wt.INTERACTING]>0}cancelAnimations(){this.setHint(wt.ANIMATING,-this.hints_[wt.ANIMATING]);let e;for(let t=0,i=this.animations_.length;t<i;++t){const o=this.animations_[t];if(o[0].callback&&ha(o[0].callback,!1),!e)for(let l=0,u=o.length;l<u;++l){const c=o[l];if(!c.complete){e=c.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const o=this.animations_[i];let l=!0;for(let u=0,c=o.length;u<c;++u){const d=o[u];if(d.complete)continue;const g=e-d.start;let p=d.duration>0?g/d.duration:1;p>=1?(d.complete=!0,p=1):l=!1;const _=d.easing(p);if(d.sourceCenter){const y=d.sourceCenter[0],x=d.sourceCenter[1],v=d.targetCenter[0],w=d.targetCenter[1];this.nextCenter_=d.targetCenter;const S=y+_*(v-y),I=x+_*(w-x);this.targetCenter_=[S,I]}if(d.sourceResolution&&d.targetResolution){const y=_===1?d.targetResolution:d.sourceResolution+_*(d.targetResolution-d.sourceResolution);if(d.anchor){const x=this.getViewportSize_(this.getRotation()),v=this.constraints_.resolution(y,0,x,!0);this.targetCenter_=this.calculateCenterZoom(v,d.anchor)}this.nextResolution_=d.targetResolution,this.targetResolution_=y,this.applyTargetState_(!0)}if(d.sourceRotation!==void 0&&d.targetRotation!==void 0){const y=_===1?_s(d.targetRotation+Math.PI,2*Math.PI)-Math.PI:d.sourceRotation+_*(d.targetRotation-d.sourceRotation);if(d.anchor){const x=this.constraints_.rotation(y,!0);this.targetCenter_=this.calculateCenterRotate(x,d.anchor)}this.nextRotation_=d.targetRotation,this.targetRotation_=y}if(this.applyTargetState_(!0),t=!0,!d.complete)break}if(l){this.animations_[i]=null,this.setHint(wt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const u=o[0].callback;u&&ha(u,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const o=this.getCenterInternal();return o!==void 0&&(i=[o[0]-t[0],o[1]-t[1]],Dh(i,e-this.getRotation()),Em(i,t)),i}calculateCenterZoom(e,t){let i;const o=this.getCenterInternal(),l=this.getResolution();if(o!==void 0&&l!==void 0){const u=t[0]-e*(t[0]-o[0])/l,c=t[1]-e*(t[1]-o[1])/l;i=[u,c]}return i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],o=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(o*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(o*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&dh(e,this.getProjection())}getCenterInternal(){return this.get(Cn.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return Mm(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();Me(t,"The view center is not defined");const i=this.getResolution();Me(i!==void 0,"The view resolution is not defined");const o=this.getRotation();return Me(o!==void 0,"The view rotation is not defined"),lh(t,i,o,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Cn.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Bi(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=Ae(e)/t[0],o=at(e)/t[1];return Math.max(i,o)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,o=Math.log(t/i)/Math.log(e);return function(l){return t/Math.pow(e,l*o)}}getRotation(){return this.get(Cn.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,l=Math.log(i/o)/t;return function(u){return Math.log(i/u)/t/l}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let o=this.getCenterInternal();const l=this.padding_;if(l){const u=this.getViewportSizeMinusPadding_();o=Zc(o,this.getViewportSize_(),[u[0]/2+l[3],u[1]/2+l[0]],t,i)}return{center:o.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,i,o;if(this.resolutions_){const l=Rh(this.resolutions_,e,1);t=l,i=this.resolutions_[l],l==this.resolutions_.length-1?o=2:o=i/this.resolutions_[l+1]}else i=this.maxResolution_,o=this.zoomFactor_;return t+Math.log(i/e)/Math.log(o)}getResolutionForZoom(e){var t;if((t=this.resolutions_)!=null&&t.length){if(this.resolutions_.length===1)return this.resolutions_[0];const i=Ke(Math.floor(e),0,this.resolutions_.length-2),o=this.resolutions_[i]/this.resolutions_[i+1];return this.resolutions_[i]/Math.pow(o,Ke(e-i,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(Me(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){Me(!Wa(e),"Cannot fit empty extent provided as `geometry`");const o=Bi(e,this.getProjection());i=vp(o)}else if(e.getType()==="Circle"){const o=Bi(e.getExtent(),this.getProjection());i=vp(o),i.rotate(this.getRotation(),$i(o))}else i=e;this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),o=Math.sin(-t),l=e.getFlatCoordinates(),u=e.getStride();let c=1/0,d=1/0,g=-1/0,p=-1/0;for(let _=0,y=l.length;_<y;_+=u){const x=l[_]*i-l[_+1]*o,v=l[_]*o+l[_+1]*i;c=Math.min(c,x),d=Math.min(d,v),g=Math.max(g,x),p=Math.max(p,v)}return[c,d,g,p]}fitInternal(e,t){t=t||{};let i=t.size;i||(i=this.getViewportSizeMinusPadding_());const o=t.padding!==void 0?t.padding:[0,0,0,0],l=t.nearest!==void 0?t.nearest:!1;let u;t.minResolution!==void 0?u=t.minResolution:t.maxZoom!==void 0?u=this.getResolutionForZoom(t.maxZoom):u=0;const c=this.rotatedExtentForGeometry(e);let d=this.getResolutionForExtentInternal(c,[i[0]-o[1]-o[3],i[1]-o[0]-o[2]]);d=isNaN(d)?u:Math.max(d,u),d=this.getConstrainedResolution(d,l?0:1);const g=this.getRotation(),p=Math.sin(g),_=Math.cos(g),y=$i(c);y[0]+=(o[1]-o[3])/2*d,y[1]+=(o[0]-o[2])/2*d;const x=y[0]*_-y[1]*p,v=y[1]*_+y[0]*p,w=this.getConstrainedCenter([x,v],d),S=t.callback?t.callback:ws;t.duration!==void 0?this.animateInternal({resolution:d,center:w,duration:t.duration,easing:t.easing},S):(this.targetResolution_=d,this.targetCenter_=w,this.applyTargetState_(!1,!0),ha(S,!0))}centerOn(e,t,i){this.centerOnInternal(ri(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(Zc(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,o){let l;const u=this.padding_;if(u&&e){const c=this.getViewportSizeMinusPadding_(-i),d=Zc(e,o,[c[0]/2+u[3],c[1]/2+u[0]],t,i);l=[e[0]-d[0],e[1]-d[1]]}return l}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=dh(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&ri(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),o=this.getViewportSize_(this.getRotation()),l=this.constraints_.resolution(this.targetResolution_*e,0,o,i);t&&(this.targetCenter_=this.calculateCenterZoom(l,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=ri(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),o=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(o,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&ri(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,o=this.constraints_.rotation(this.targetRotation_,i),l=this.getViewportSize_(o),u=this.constraints_.resolution(this.targetResolution_,0,l,i),c=this.constraints_.center(this.targetCenter_,u,l,i,this.calculateCenterShift(this.targetCenter_,u,o,l));this.get(Cn.ROTATION)!==o&&this.set(Cn.ROTATION,o),this.get(Cn.RESOLUTION)!==u&&(this.set(Cn.RESOLUTION,u),this.set("zoom",this.getZoom(),!0)),(!c||!this.get(Cn.CENTER)||!ya(this.get(Cn.CENTER),c))&&this.set(Cn.CENTER,c),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=e!==void 0?e:200;const o=t||0,l=this.constraints_.rotation(this.targetRotation_),u=this.getViewportSize_(l),c=this.constraints_.resolution(this.targetResolution_,o,u),d=this.constraints_.center(this.targetCenter_,c,u,!1,this.calculateCenterShift(this.targetCenter_,c,l,u));if(e===0&&!this.cancelAnchor_){this.targetResolution_=c,this.targetRotation_=l,this.targetCenter_=d,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==c||this.getRotation()!==l||!this.getCenterInternal()||!ya(this.getCenterInternal(),d))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:l,center:d,resolution:c,duration:e,easing:As,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(wt.INTERACTING,1)}endInteraction(e,t,i){i=i&&ri(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.getInteracting()&&(this.setHint(wt.INTERACTING,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}}function ha(r,e){setTimeout(function(){r(e)},0)}function NE(r){if(r.extent!==void 0){const t=r.smoothExtentConstraint!==void 0?r.smoothExtentConstraint:!0;return Pp(r.extent,r.constrainOnlyCenter,t)}const e=zh(r.projection,"EPSG:3857");if(r.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,Pp(t,!1,!1)}return AE}function zE(r){let e,t,i,u=r.minZoom!==void 0?r.minZoom:Kc,c=r.maxZoom!==void 0?r.maxZoom:28;const d=r.zoomFactor!==void 0?r.zoomFactor:2,g=r.multiWorld!==void 0?r.multiWorld:!1,p=r.smoothResolutionConstraint!==void 0?r.smoothResolutionConstraint:!0,_=r.showFullExtent!==void 0?r.showFullExtent:!1,y=zh(r.projection,"EPSG:3857"),x=y.getExtent();let v=r.constrainOnlyCenter,w=r.extent;if(!g&&!w&&y.isGlobal()&&(v=!1,w=x),r.resolutions!==void 0){const S=r.resolutions;t=S[u],i=S[c]!==void 0?S[c]:S[S.length-1],r.constrainResolution?e=ME(S,p,!v&&w,_):e=kp(t,i,p,!v&&w,_)}else{const I=(x?Math.max(Ae(x),at(x)):360*Mh.degrees/y.getMetersPerUnit())/qh/Math.pow(2,Kc),T=I/Math.pow(2,28-Kc);t=r.maxResolution,t!==void 0?u=0:t=I/Math.pow(d,u),i=r.minResolution,i===void 0&&(r.maxZoom!==void 0?r.maxResolution!==void 0?i=t/Math.pow(d,c):i=I/Math.pow(d,c):i=T),c=u+Math.floor(Math.log(t/i)/Math.log(d)),i=t/Math.pow(d,c-u),r.constrainResolution?e=PE(d,t,i,p,!v&&w,_):e=kp(t,i,p,!v&&w,_)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:u,zoomFactor:d}}function GE(r){if(r.enableRotation!==void 0?r.enableRotation:!0){const t=r.constrainRotation;return t===void 0||t===!0?DE():t===!1?Dp:typeof t=="number"?kE(t):Dp}return ed}function UE(r){return!(r.sourceCenter&&r.targetCenter&&!ya(r.sourceCenter,r.targetCenter)||r.sourceResolution!==r.targetResolution||r.sourceRotation!==r.targetRotation)}function Zc(r,e,t,i,o){const l=Math.cos(-o);let u=Math.sin(-o),c=r[0]*l-r[1]*u,d=r[1]*l+r[0]*u;c+=(e[0]/2-t[0])*i,d+=(t[1]-e[1]/2)*i,u=-u;const g=c*l-d*u,p=d*l+c*u;return[g,p]}class Ha extends qm{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Fe.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Fe.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Ue(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Ie(e,Ee.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof Un?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&i&&(t.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let o;if(t.layerStatesArray){if(o=t.layerStatesArray.find(u=>u.layer===this),!o)return!1}else o=this.getLayerState();const l=this.getExtent();return td(o,t.viewState)&&(!l||bt(l,t.extent))}getAttributions(e){var l;if(!this.isVisible(e))return[];const t=(l=this.getSource())==null?void 0:l.getAttributions();if(!t)return[];const i=e instanceof Un?e.getViewStateAndExtent():e;let o=t(i);return Array.isArray(o)||(o=[o]),o}render(e,t){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Fe.MAP,e)}getMapInternal(){return this.get(Fe.MAP)}setMap(e){this.mapPrecomposeKey_&&(Ue(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Ue(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Ie(e,cn.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Ie(this,Ee.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,i=this.getLayerState(!1);Me(!t.some(o=>o.layer===i.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(i)}setSource(e){this.set(Fe.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function td(r,e){if(!r.visible)return!1;const t=e.resolution;if(t<r.minResolution||t>=r.maxResolution)return!1;const i=e.zoom;return i>r.minZoom&&i<=r.maxZoom}function Jm(r,e,t=0,i=r.length-1,o=bE){for(;i>t;){if(i-t>600){const d=i-t+1,g=e-t+1,p=Math.log(d),_=.5*Math.exp(2*p/3),y=.5*Math.sqrt(p*_*(d-_)/d)*(g-d/2<0?-1:1),x=Math.max(t,Math.floor(e-g*_/d+y)),v=Math.min(i,Math.floor(e+(d-g)*_/d+y));Jm(r,e,x,v,o)}const l=r[e];let u=t,c=i;for(yo(r,t,e),o(r[i],l)>0&&yo(r,t,i);u<c;){for(yo(r,u,c),u++,c--;o(r[u],l)<0;)u++;for(;o(r[c],l)>0;)c--}o(r[t],l)===0?yo(r,t,c):(c++,yo(r,c,i)),c<=e&&(t=c+1),e<=c&&(i=c-1)}}function yo(r,e,t){const i=r[e];r[e]=r[t],r[t]=i}function bE(r,e){return r<e?-1:r>e?1:0}let e_=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!fa(e,t))return i;const o=this.toBBox,l=[];for(;t;){for(let u=0;u<t.children.length;u++){const c=t.children[u],d=t.leaf?o(c):c;fa(e,d)&&(t.leaf?i.push(c):$c(e,d)?this._all(c,i):l.push(c))}t=l.pop()}return i}collides(e){let t=this.data;if(!fa(e,t))return!1;const i=[];for(;t;){for(let o=0;o<t.children.length;o++){const l=t.children[o],u=t.leaf?this.toBBox(l):l;if(fa(e,u)){if(t.leaf||$c(e,u))return!0;i.push(l)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=as([]),this}remove(e,t){if(!e)return this;let i=this.data;const o=this.toBBox(e),l=[],u=[];let c,d,g;for(;i||l.length;){if(i||(i=l.pop(),d=l[l.length-1],c=u.pop(),g=!0),i.leaf){const p=WE(e,i.children,t);if(p!==-1)return i.children.splice(p,1),l.push(i),this._condense(l),this}!g&&!i.leaf&&$c(i,o)?(l.push(i),u.push(c),c=0,d=i,i=i.children[0]):d?(c++,i=d.children[c],g=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,o){const l=i-t+1;let u=this._maxEntries,c;if(l<=u)return c=as(e.slice(t,i+1)),es(c,this.toBBox),c;o||(o=Math.ceil(Math.log(l)/Math.log(u)),u=Math.ceil(l/Math.pow(u,o-1))),c=as([]),c.leaf=!1,c.height=o;const d=Math.ceil(l/u),g=d*Math.ceil(Math.sqrt(u));Op(e,t,i,g,this.compareMinX);for(let p=t;p<=i;p+=g){const _=Math.min(p+g-1,i);Op(e,p,_,d,this.compareMinY);for(let y=p;y<=_;y+=d){const x=Math.min(y+d-1,_);c.children.push(this._build(e,y,x,o-1))}}return es(c,this.toBBox),c}_chooseSubtree(e,t,i,o){for(;o.push(t),!(t.leaf||o.length-1===i);){let l=1/0,u=1/0,c;for(let d=0;d<t.children.length;d++){const g=t.children[d],p=Hc(g),_=BE(e,g)-p;_<u?(u=_,l=p<l?p:l,c=g):_===u&&p<l&&(l=p,c=g)}t=c||t.children[0]}return t}_insert(e,t,i){const o=i?e:this.toBBox(e),l=[],u=this._chooseSubtree(o,this.data,t,l);for(u.children.push(e),xo(u,o);t>=0&&l[t].children.length>this._maxEntries;)this._split(l,t),t--;this._adjustParentBBoxes(o,l,t)}_split(e,t){const i=e[t],o=i.children.length,l=this._minEntries;this._chooseSplitAxis(i,l,o);const u=this._chooseSplitIndex(i,l,o),c=as(i.children.splice(u,i.children.length-u));c.height=i.height,c.leaf=i.leaf,es(i,this.toBBox),es(c,this.toBBox),t?e[t-1].children.push(c):this._splitRoot(i,c)}_splitRoot(e,t){this.data=as([e,t]),this.data.height=e.height+1,this.data.leaf=!1,es(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let o,l=1/0,u=1/0;for(let c=t;c<=i-t;c++){const d=vo(e,0,c,this.toBBox),g=vo(e,c,i,this.toBBox),p=YE(d,g),_=Hc(d)+Hc(g);p<l?(l=p,o=c,u=_<u?_:u):p===l&&_<u&&(u=_,o=c)}return o||i-t}_chooseSplitAxis(e,t,i){const o=e.leaf?this.compareMinX:jE,l=e.leaf?this.compareMinY:XE,u=this._allDistMargin(e,t,i,o),c=this._allDistMargin(e,t,i,l);u<c&&e.children.sort(o)}_allDistMargin(e,t,i,o){e.children.sort(o);const l=this.toBBox,u=vo(e,0,t,l),c=vo(e,i-t,i,l);let d=da(u)+da(c);for(let g=t;g<i-t;g++){const p=e.children[g];xo(u,e.leaf?l(p):p),d+=da(u)}for(let g=i-t-1;g>=t;g--){const p=e.children[g];xo(c,e.leaf?l(p):p),d+=da(c)}return d}_adjustParentBBoxes(e,t,i){for(let o=i;o>=0;o--)xo(t[o],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():es(e[t],this.toBBox)}};function WE(r,e,t){if(!t)return e.indexOf(r);for(let i=0;i<e.length;i++)if(t(r,e[i]))return i;return-1}function es(r,e){vo(r,0,r.children.length,e,r)}function vo(r,e,t,i,o){o||(o=as(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(let l=e;l<t;l++){const u=r.children[l];xo(o,r.leaf?i(u):u)}return o}function xo(r,e){return r.minX=Math.min(r.minX,e.minX),r.minY=Math.min(r.minY,e.minY),r.maxX=Math.max(r.maxX,e.maxX),r.maxY=Math.max(r.maxY,e.maxY),r}function jE(r,e){return r.minX-e.minX}function XE(r,e){return r.minY-e.minY}function Hc(r){return(r.maxX-r.minX)*(r.maxY-r.minY)}function da(r){return r.maxX-r.minX+(r.maxY-r.minY)}function BE(r,e){return(Math.max(e.maxX,r.maxX)-Math.min(e.minX,r.minX))*(Math.max(e.maxY,r.maxY)-Math.min(e.minY,r.minY))}function YE(r,e){const t=Math.max(r.minX,e.minX),i=Math.max(r.minY,e.minY),o=Math.min(r.maxX,e.maxX),l=Math.min(r.maxY,e.maxY);return Math.max(0,o-t)*Math.max(0,l-i)}function $c(r,e){return r.minX<=e.minX&&r.minY<=e.minY&&e.maxX<=r.maxX&&e.maxY<=r.maxY}function fa(r,e){return e.minX<=r.maxX&&e.minY<=r.maxY&&e.maxX>=r.minX&&e.maxY>=r.minY}function as(r){return{children:r,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Op(r,e,t,i,o){const l=[e,t];for(;l.length;){if(t=l.pop(),e=l.pop(),t-e<=i)continue;const u=e+Math.ceil((t-e)/i/2)*i;Jm(r,u,e,t,o),l.push(e,u,u,t)}}function Fp(r,e,t,i){return t!==void 0&&i!==void 0?[t/r,i/e]:t!==void 0?t/r:i!==void 0?i/e:1}class Vo extends Ya{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,o=e.scale!==void 0?e.scale:1,l=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:i,scale:o,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:l,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const u=e.img!==void 0?e.img:null;let c=e.src;Me(!(c!==void 0&&u),"`image` and `src` cannot be provided at the same time"),(c===void 0||c.length===0)&&u&&(c=u.src||Le(u)),Me(c!==void 0&&c.length>0,"A defined and non-empty `src` or `image` must be provided"),Me(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let d;if(e.src!==void 0?d=we.IDLE:u!==void 0&&("complete"in u?u.complete?d=u.src?we.LOADED:we.IDLE:d=we.LOADING:d=we.LOADED),this.color_=e.color!==void 0?Ts(e.color):null,this.iconImage_=Hh(u,c,this.crossOrigin_,d,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let g,p;if(e.size)[g,p]=e.size;else{const _=this.getImage(1);if(_.width&&_.height)g=_.width,p=_.height;else if(_ instanceof HTMLImageElement){this.initialOptions_=e;const y=()=>{if(this.unlistenImageChange(y),!this.initialOptions_)return;const x=this.iconImage_.getSize();this.setScale(Fp(x[0],x[1],e.width,e.height))};this.listenImageChange(y);return}}g!==void 0&&this.setScale(Fp(g,p,e.width,e.height))}}clone(){let e,t,i;return this.initialOptions_?(t=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Vo({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const o=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!o)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=o[0]),this.anchorYUnits_=="fraction"&&(e[1]*=o[1])}if(this.anchorOrigin_!="top-left"){if(!o)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+o[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+o[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==we.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==we.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(Ee.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(Ee.CHANGE,e)}ready(){return this.iconImage_.ready()}}let Rr=0;const At=1<<Rr++,Re=1<<Rr++,Ut=1<<Rr++,Tn=1<<Rr++,Cr=1<<Rr++,wo=1<<Rr++,ga=Math.pow(2,Rr)-1,nd={[At]:"boolean",[Re]:"number",[Ut]:"string",[Tn]:"color",[Cr]:"number[]",[wo]:"size"},VE=Object.keys(nd).map(Number).sort(Vi);function KE(r){return r in nd}function So(r){const e=[];for(const t of VE)Co(r,t)&&e.push(nd[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Co(r,e){return(r&e)===e}function Ni(r,e){return r===e}class nt{constructor(e,t){if(!KE(e))throw new Error(`literal expressions must have a specific type, got ${So(e)}`);this.type=e,this.value=t}}class ZE{constructor(e,t,...i){this.type=e,this.operator=t,this.args=i}}function t_(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1}}function ft(r,e,t){switch(typeof r){case"boolean":{if(Ni(e,Ut))return new nt(Ut,r?"true":"false");if(!Co(e,At))throw new Error(`got a boolean, but expected ${So(e)}`);return new nt(At,r)}case"number":{if(Ni(e,wo))return new nt(wo,jt(r));if(Ni(e,At))return new nt(At,!!r);if(Ni(e,Ut))return new nt(Ut,r.toString());if(!Co(e,Re))throw new Error(`got a number, but expected ${So(e)}`);return new nt(Re,r)}case"string":{if(Ni(e,Tn))return new nt(Tn,Vh(r));if(Ni(e,At))return new nt(At,!!r);if(!Co(e,Ut))throw new Error(`got a string, but expected ${So(e)}`);return new nt(Ut,r)}}if(!Array.isArray(r))throw new Error("expression must be an array or a primitive value");if(r.length===0)throw new Error("empty expression");if(typeof r[0]=="string")return sv(r,e,t);for(const i of r)if(typeof i!="number")throw new Error("expected an array of numbers");if(Ni(e,wo)){if(r.length!==2)throw new Error(`expected an array of two values for a size, got ${r.length}`);return new nt(wo,r)}if(Ni(e,Tn)){if(r.length===3)return new nt(Tn,[...r,1]);if(r.length===4)return new nt(Tn,r);throw new Error(`expected an array of 3 or 4 values for a color, got ${r.length}`)}if(!Co(e,Cr))throw new Error(`got an array of numbers, but expected ${So(e)}`);return new nt(Cr,r)}const W={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},HE={[W.Get]:ye(xe(1,1/0),Np),[W.Var]:ye(xe(1,1),$E),[W.Has]:ye(xe(1,1/0),Np),[W.Id]:ye(qE,ts),[W.Concat]:ye(xe(2,1/0),De(Ut)),[W.GeometryType]:ye(QE,ts),[W.LineMetric]:ye(ts),[W.Resolution]:ye(ts),[W.Zoom]:ye(ts),[W.Time]:ye(ts),[W.Any]:ye(xe(2,1/0),De(At)),[W.All]:ye(xe(2,1/0),De(At)),[W.Not]:ye(xe(1,1),De(At)),[W.Equal]:ye(xe(2,2),De(ga)),[W.NotEqual]:ye(xe(2,2),De(ga)),[W.GreaterThan]:ye(xe(2,2),De(Re)),[W.GreaterThanOrEqualTo]:ye(xe(2,2),De(Re)),[W.LessThan]:ye(xe(2,2),De(Re)),[W.LessThanOrEqualTo]:ye(xe(2,2),De(Re)),[W.Multiply]:ye(xe(2,1/0),zp),[W.Coalesce]:ye(xe(2,1/0),zp),[W.Divide]:ye(xe(2,2),De(Re)),[W.Add]:ye(xe(2,1/0),De(Re)),[W.Subtract]:ye(xe(2,2),De(Re)),[W.Clamp]:ye(xe(3,3),De(Re)),[W.Mod]:ye(xe(2,2),De(Re)),[W.Pow]:ye(xe(2,2),De(Re)),[W.Abs]:ye(xe(1,1),De(Re)),[W.Floor]:ye(xe(1,1),De(Re)),[W.Ceil]:ye(xe(1,1),De(Re)),[W.Round]:ye(xe(1,1),De(Re)),[W.Sin]:ye(xe(1,1),De(Re)),[W.Cos]:ye(xe(1,1),De(Re)),[W.Atan]:ye(xe(1,2),De(Re)),[W.Sqrt]:ye(xe(1,1),De(Re)),[W.Match]:ye(xe(4,1/0),Gp,ev),[W.Between]:ye(xe(3,3),De(Re)),[W.Interpolate]:ye(xe(6,1/0),Gp,tv),[W.Case]:ye(xe(3,1/0),JE,nv),[W.In]:ye(xe(2,2),iv),[W.Number]:ye(xe(1,1/0),De(ga)),[W.String]:ye(xe(1,1/0),De(ga)),[W.Array]:ye(xe(1,1/0),De(Re)),[W.Color]:ye(xe(1,4),De(Re)),[W.Band]:ye(xe(1,3),De(Re)),[W.Palette]:ye(xe(2,2),rv),[W.ToString]:ye(xe(1,1),De(At|Re|Ut|Tn))};function Np(r,e,t){const i=r.length-1,o=new Array(i);for(let l=0;l<i;++l){const u=r[l+1];switch(typeof u){case"number":{o[l]=new nt(Re,u);break}case"string":{o[l]=new nt(Ut,u);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${u}`)}l===0&&t.properties.add(String(u))}return o}function $E(r,e,t){const i=r[1];if(typeof i!="string")throw new Error("expected a string argument for var operation");return t.variables.add(i),[new nt(Ut,i)]}function qE(r,e,t){t.featureId=!0}function QE(r,e,t){t.geometryType=!0}function ts(r,e,t){const i=r[0];if(r.length!==1)throw new Error(`expected no arguments for ${i} operation`);return[]}function xe(r,e){return function(t,i,o){const l=t[0],u=t.length-1;if(r===e){if(u!==r){const c=r===1?"":"s";throw new Error(`expected ${r} argument${c} for ${l}, got ${u}`)}}else if(u<r||u>e){const c=e===1/0?`${r} or more`:`${r} to ${e}`;throw new Error(`expected ${c} arguments for ${l}, got ${u}`)}}}function zp(r,e,t){const i=r.length-1,o=new Array(i);for(let l=0;l<i;++l){const u=ft(r[l+1],e,t);o[l]=u}return o}function De(r){return function(e,t,i){const o=e.length-1,l=new Array(o);for(let u=0;u<o;++u){const c=ft(e[u+1],r,i);l[u]=c}return l}}function JE(r,e,t){const i=r[0],o=r.length-1;if(o%2===0)throw new Error(`expected an odd number of arguments for ${i}, got ${o} instead`)}function Gp(r,e,t){const i=r[0],o=r.length-1;if(o%2===1)throw new Error(`expected an even number of arguments for operation ${i}, got ${o} instead`)}function ev(r,e,t){const i=r.length-1,o=Ut|Re|At,l=ft(r[1],o,t),u=ft(r[r.length-1],e,t),c=new Array(i-2);for(let d=0;d<i-2;d+=2){try{const g=ft(r[d+2],l.type,t);c[d]=g}catch(g){throw new Error(`failed to parse argument ${d+1} of match expression: ${g.message}`)}try{const g=ft(r[d+3],u.type,t);c[d+1]=g}catch(g){throw new Error(`failed to parse argument ${d+2} of match expression: ${g.message}`)}}return[l,...c,u]}function tv(r,e,t){const i=r[1];let o;switch(i[0]){case"linear":o=1;break;case"exponential":const d=i[1];if(typeof d!="number"||d<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(d)} instead`);o=d;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(i)}`)}const l=new nt(Re,o);let u;try{u=ft(r[2],Re,t)}catch(d){throw new Error(`failed to parse argument 1 in interpolate expression: ${d.message}`)}const c=new Array(r.length-3);for(let d=0;d<c.length;d+=2){try{const g=ft(r[d+3],Re,t);c[d]=g}catch(g){throw new Error(`failed to parse argument ${d+2} for interpolate expression: ${g.message}`)}try{const g=ft(r[d+4],e,t);c[d+1]=g}catch(g){throw new Error(`failed to parse argument ${d+3} for interpolate expression: ${g.message}`)}}return[l,u,...c]}function nv(r,e,t){const i=ft(r[r.length-1],e,t),o=new Array(r.length-1);for(let l=0;l<o.length-1;l+=2){try{const u=ft(r[l+1],At,t);o[l]=u}catch(u){throw new Error(`failed to parse argument ${l} of case expression: ${u.message}`)}try{const u=ft(r[l+2],i.type,t);o[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+1} of case expression: ${u.message}`)}}return o[o.length-1]=i,o}function iv(r,e,t){let i=r[2];if(!Array.isArray(i))throw new Error('the second argument for the "in" operator must be an array');let o;if(typeof i[0]=="string"){if(i[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(i[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');i=i[1],o=Ut}else o=Re;const l=new Array(i.length);for(let c=0;c<l.length;c++)try{const d=ft(i[c],o,t);l[c]=d}catch(d){throw new Error(`failed to parse haystack item ${c} for "in" expression: ${d.message}`)}return[ft(r[1],o,t),...l]}function rv(r,e,t){let i;try{i=ft(r[1],Re,t)}catch(u){throw new Error(`failed to parse first argument in palette expression: ${u.message}`)}const o=r[2];if(!Array.isArray(o))throw new Error("the second argument of palette must be an array");const l=new Array(o.length);for(let u=0;u<l.length;u++){let c;try{c=ft(o[u],Tn,t)}catch(d){throw new Error(`failed to parse color at index ${u} in palette expression: ${d.message}`)}if(!(c instanceof nt))throw new Error(`the palette color at index ${u} must be a literal value`);l[u]=c}return[i,...l]}function ye(...r){return function(e,t,i){const o=e[0];let l;for(let u=0;u<r.length;u++){const c=r[u](e,t,i);if(u==r.length-1){if(!c)throw new Error("expected last argument validator to return the parsed args");l=c}}return new ZE(t,o,...l)}}function sv(r,e,t){const i=r[0],o=HE[i];if(!o)throw new Error(`unknown operator: ${i}`);return o(r,e,t)}function n_(r){if(!r)return"";const e=r.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return n_(r.getGeometries()[0]);default:return""}}function i_(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function fi(r,e,t){const i=ft(r,e,t);return An(i)}function An(r,e){if(r instanceof nt){if(r.type===Tn&&typeof r.value=="string"){const i=Vh(r.value);return function(){return i}}return function(){return r.value}}const t=r.operator;switch(t){case W.Number:case W.String:case W.Coalesce:return ov(r);case W.Get:case W.Var:case W.Has:return lv(r);case W.Id:return i=>i.featureId;case W.GeometryType:return i=>i.geometryType;case W.Concat:{const i=r.args.map(o=>An(o));return o=>"".concat(...i.map(l=>l(o).toString()))}case W.Resolution:return i=>i.resolution;case W.Any:case W.All:case W.Between:case W.In:case W.Not:return uv(r);case W.Equal:case W.NotEqual:case W.LessThan:case W.LessThanOrEqualTo:case W.GreaterThan:case W.GreaterThanOrEqualTo:return av(r);case W.Multiply:case W.Divide:case W.Add:case W.Subtract:case W.Clamp:case W.Mod:case W.Pow:case W.Abs:case W.Floor:case W.Ceil:case W.Round:case W.Sin:case W.Cos:case W.Atan:case W.Sqrt:return cv(r);case W.Case:return hv(r);case W.Match:return dv(r);case W.Interpolate:return fv(r);case W.ToString:return gv(r);default:throw new Error(`Unsupported operator ${t}`)}}function ov(r,e){const t=r.operator,i=r.args.length,o=new Array(i);for(let l=0;l<i;++l)o[l]=An(r.args[l]);switch(t){case W.Coalesce:return l=>{for(let u=0;u<i;++u){const c=o[u](l);if(typeof c<"u"&&c!==null)return c}throw new Error("Expected one of the values to be non-null")};case W.Number:case W.String:return l=>{for(let u=0;u<i;++u){const c=o[u](l);if(typeof c===t)return c}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function lv(r,e){const i=r.args[0].value;switch(r.operator){case W.Get:return o=>{const l=r.args;let u=o.properties[i];for(let c=1,d=l.length;c<d;++c){const p=l[c].value;u=u[p]}return u};case W.Var:return o=>o.variables[i];case W.Has:return o=>{const l=r.args;if(!(i in o.properties))return!1;let u=o.properties[i];for(let c=1,d=l.length;c<d;++c){const p=l[c].value;if(!u||!Object.hasOwn(u,p))return!1;u=u[p]}return!0};default:throw new Error(`Unsupported accessor operator ${r.operator}`)}}function av(r,e){const t=r.operator,i=An(r.args[0]),o=An(r.args[1]);switch(t){case W.Equal:return l=>i(l)===o(l);case W.NotEqual:return l=>i(l)!==o(l);case W.LessThan:return l=>i(l)<o(l);case W.LessThanOrEqualTo:return l=>i(l)<=o(l);case W.GreaterThan:return l=>i(l)>o(l);case W.GreaterThanOrEqualTo:return l=>i(l)>=o(l);default:throw new Error(`Unsupported comparison operator ${t}`)}}function uv(r,e){const t=r.operator,i=r.args.length,o=new Array(i);for(let l=0;l<i;++l)o[l]=An(r.args[l]);switch(t){case W.Any:return l=>{for(let u=0;u<i;++u)if(o[u](l))return!0;return!1};case W.All:return l=>{for(let u=0;u<i;++u)if(!o[u](l))return!1;return!0};case W.Between:return l=>{const u=o[0](l),c=o[1](l),d=o[2](l);return u>=c&&u<=d};case W.In:return l=>{const u=o[0](l);for(let c=1;c<i;++c)if(u===o[c](l))return!0;return!1};case W.Not:return l=>!o[0](l);default:throw new Error(`Unsupported logical operator ${t}`)}}function cv(r,e){const t=r.operator,i=r.args.length,o=new Array(i);for(let l=0;l<i;++l)o[l]=An(r.args[l]);switch(t){case W.Multiply:return l=>{let u=1;for(let c=0;c<i;++c)u*=o[c](l);return u};case W.Divide:return l=>o[0](l)/o[1](l);case W.Add:return l=>{let u=0;for(let c=0;c<i;++c)u+=o[c](l);return u};case W.Subtract:return l=>o[0](l)-o[1](l);case W.Clamp:return l=>{const u=o[0](l),c=o[1](l);if(u<c)return c;const d=o[2](l);return u>d?d:u};case W.Mod:return l=>o[0](l)%o[1](l);case W.Pow:return l=>Math.pow(o[0](l),o[1](l));case W.Abs:return l=>Math.abs(o[0](l));case W.Floor:return l=>Math.floor(o[0](l));case W.Ceil:return l=>Math.ceil(o[0](l));case W.Round:return l=>Math.round(o[0](l));case W.Sin:return l=>Math.sin(o[0](l));case W.Cos:return l=>Math.cos(o[0](l));case W.Atan:return i===2?l=>Math.atan2(o[0](l),o[1](l)):l=>Math.atan(o[0](l));case W.Sqrt:return l=>Math.sqrt(o[0](l));default:throw new Error(`Unsupported numeric operator ${t}`)}}function hv(r,e){const t=r.args.length,i=new Array(t);for(let o=0;o<t;++o)i[o]=An(r.args[o]);return o=>{for(let l=0;l<t-1;l+=2)if(i[l](o))return i[l+1](o);return i[t-1](o)}}function dv(r,e){const t=r.args.length,i=new Array(t);for(let o=0;o<t;++o)i[o]=An(r.args[o]);return o=>{const l=i[0](o);for(let u=1;u<t;u+=2)if(l===i[u](o))return i[u+1](o);return i[t-1](o)}}function fv(r,e){const t=r.args.length,i=new Array(t);for(let o=0;o<t;++o)i[o]=An(r.args[o]);return o=>{const l=i[0](o),u=i[1](o);let c,d;for(let g=2;g<t;g+=2){const p=i[g](o);let _=i[g+1](o);const y=Array.isArray(_);if(y&&(_=oE(_)),p>=u)return g===2?_:y?pv(l,u,c,d,p,_):Ro(l,u,c,d,p,_);c=p,d=_}return d}}function gv(r,e){const t=r.operator,i=r.args.length,o=new Array(i);for(let l=0;l<i;++l)o[l]=An(r.args[l]);switch(t){case W.ToString:return l=>{const u=o[0](l);return r.args[0].type===Tn?Kh(u):u.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function Ro(r,e,t,i,o,l){const u=o-t;if(u===0)return i;const c=e-t,d=r===1?c/u:(Math.pow(r,c)-1)/(Math.pow(r,u)-1);return i+d*(l-i)}function pv(r,e,t,i,o,l){if(o-t===0)return i;const c=Sp(i),d=Sp(l);let g=d[2]-c[2];g>180?g-=360:g<-180&&(g+=360);const p=[Ro(r,e,t,c[0],o,d[0]),Ro(r,e,t,c[1],o,d[1]),c[2]+Ro(r,e,t,0,o,g),Ro(r,e,t,i[3],o,l[3])];return Wm(lE(p))}function mv(r){return!0}function _v(r){const e=t_(),t=yv(r,e),i=i_();return function(o,l){if(i.properties=o.getPropertiesInternal(),i.resolution=l,e.featureId){const u=o.getId();u!==void 0?i.featureId=u:i.featureId=null}return e.geometryType&&(i.geometryType=n_(o.getGeometry())),t(i)}}function Up(r){const e=t_(),t=r.length,i=new Array(t);for(let u=0;u<t;++u)i[u]=ph(r[u],e);const o=i_(),l=new Array(t);return function(u,c){if(o.properties=u.getPropertiesInternal(),o.resolution=c,e.featureId){const g=u.getId();g!==void 0?o.featureId=g:o.featureId=null}let d=0;for(let g=0;g<t;++g){const p=i[g](o);p&&(l[d]=p,d+=1)}return l.length=d,l}}function yv(r,e){const t=r.length,i=new Array(t);for(let o=0;o<t;++o){const l=r[o],u="filter"in l?fi(l.filter,At,e):mv;let c;if(Array.isArray(l.style)){const d=l.style.length;c=new Array(d);for(let g=0;g<d;++g)c[g]=ph(l.style[g],e)}else c=[ph(l.style,e)];i[o]={filter:u,styles:c}}return function(o){const l=[];let u=!1;for(let c=0;c<t;++c){const d=i[c].filter;if(d(o)&&!(r[c].else&&u)){u=!0;for(const g of i[c].styles){const p=g(o);p&&l.push(p)}}}return l}}function ph(r,e){const t=Go(r,"",e),i=Uo(r,"",e),o=Ev(r,e),l=vv(r,e),u=Wt(r,"z-index",e);if(!t&&!i&&!o&&!l&&!Ss(r))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(r));const c=new ui;return function(d){let g=!0;if(t){const p=t(d);p&&(g=!1),c.setFill(p)}if(i){const p=i(d);p&&(g=!1),c.setStroke(p)}if(o){const p=o(d);p&&(g=!1),c.setText(p)}if(l){const p=l(d);p&&(g=!1),c.setImage(p)}return u&&c.setZIndex(u(d)),g?null:c}}function Go(r,e,t){let i;if(e+"fill-pattern-src"in r)i=Cv(r,e+"fill-",t);else{if(r[e+"fill-color"]==="none")return l=>null;i=id(r,e+"fill-color",t)}if(!i)return null;const o=new Sr;return function(l){const u=i(l);return u===Yh?null:(o.setColor(u),o)}}function Uo(r,e,t){const i=Wt(r,e+"stroke-width",t),o=id(r,e+"stroke-color",t);if(!i&&!o)return null;const l=oi(r,e+"stroke-line-cap",t),u=oi(r,e+"stroke-line-join",t),c=r_(r,e+"stroke-line-dash",t),d=Wt(r,e+"stroke-line-dash-offset",t),g=Wt(r,e+"stroke-miter-limit",t),p=new Bo;return function(_){if(o){const y=o(_);if(y===Yh)return null;p.setColor(y)}if(i&&p.setWidth(i(_)),l){const y=l(_);if(y!=="butt"&&y!=="round"&&y!=="square")throw new Error("Expected butt, round, or square line cap");p.setLineCap(y)}if(u){const y=u(_);if(y!=="bevel"&&y!=="round"&&y!=="miter")throw new Error("Expected bevel, round, or miter line join");p.setLineJoin(y)}return c&&p.setLineDash(c(_)),d&&p.setLineDashOffset(d(_)),g&&p.setMiterLimit(g(_)),p}}function Ev(r,e){const t="text-",i=oi(r,t+"value",e);if(!i)return null;const o=Go(r,t,e),l=Go(r,t+"background-",e),u=Uo(r,t,e),c=Uo(r,t+"background-",e),d=oi(r,t+"font",e),g=Wt(r,t+"max-angle",e),p=Wt(r,t+"offset-x",e),_=Wt(r,t+"offset-y",e),y=ys(r,t+"overflow",e),x=oi(r,t+"placement",e),v=Wt(r,t+"repeat",e),w=$a(r,t+"scale",e),S=ys(r,t+"rotate-with-view",e),I=Wt(r,t+"rotation",e),T=oi(r,t+"align",e),O=oi(r,t+"justify",e),A=oi(r,t+"baseline",e),P=ys(r,t+"keep-upright",e),j=r_(r,t+"padding",e),Z=qa(r,t+"declutter-mode"),U=new Za({declutterMode:Z});return function(X){if(U.setText(i(X)),o&&U.setFill(o(X)),l&&U.setBackgroundFill(l(X)),u&&U.setStroke(u(X)),c&&U.setBackgroundStroke(c(X)),d&&U.setFont(d(X)),g&&U.setMaxAngle(g(X)),p&&U.setOffsetX(p(X)),_&&U.setOffsetY(_(X)),y&&U.setOverflow(y(X)),x){const B=x(X);if(B!=="point"&&B!=="line")throw new Error("Expected point or line for text-placement");U.setPlacement(B)}if(v&&U.setRepeat(v(X)),w&&U.setScale(w(X)),S&&U.setRotateWithView(S(X)),I&&U.setRotation(I(X)),T){const B=T(X);if(B!=="left"&&B!=="center"&&B!=="right"&&B!=="end"&&B!=="start")throw new Error("Expected left, right, center, start, or end for text-align");U.setTextAlign(B)}if(O){const B=O(X);if(B!=="left"&&B!=="right"&&B!=="center")throw new Error("Expected left, right, or center for text-justify");U.setJustify(B)}if(A){const B=A(X);if(B!=="bottom"&&B!=="top"&&B!=="middle"&&B!=="alphabetic"&&B!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");U.setTextBaseline(B)}return j&&U.setPadding(j(X)),P&&U.setKeepUpright(P(X)),U}}function vv(r,e){return"icon-src"in r?xv(r,e):"shape-points"in r?wv(r,e):"circle-radius"in r?Sv(r,e):null}function xv(r,e){const t="icon-",i=t+"src",o=s_(r[i],i),l=Ta(r,t+"anchor",e),u=$a(r,t+"scale",e),c=Wt(r,t+"opacity",e),d=Ta(r,t+"displacement",e),g=Wt(r,t+"rotation",e),p=ys(r,t+"rotate-with-view",e),_=Wp(r,t+"anchor-origin"),y=jp(r,t+"anchor-x-units"),x=jp(r,t+"anchor-y-units"),v=Lv(r,t+"color"),w=Tv(r,t+"cross-origin"),S=Iv(r,t+"offset"),I=Wp(r,t+"offset-origin"),T=Ia(r,t+"width"),O=Ia(r,t+"height"),A=Rv(r,t+"size"),P=qa(r,t+"declutter-mode"),j=new Vo({src:o,anchorOrigin:_,anchorXUnits:y,anchorYUnits:x,color:v,crossOrigin:w,offset:S,offsetOrigin:I,height:O,width:T,size:A,declutterMode:P});return function(Z){return c&&j.setOpacity(c(Z)),d&&j.setDisplacement(d(Z)),g&&j.setRotation(g(Z)),p&&j.setRotateWithView(p(Z)),u&&j.setScale(u(Z)),l&&j.setAnchor(l(Z)),j}}function wv(r,e){const t="shape-",i=t+"points",o=t+"radius",l=mh(r[i],i),u=mh(r[o],o),c=Go(r,t,e),d=Uo(r,t,e),g=$a(r,t+"scale",e),p=Ta(r,t+"displacement",e),_=Wt(r,t+"rotation",e),y=ys(r,t+"rotate-with-view",e),x=Ia(r,t+"radius2"),v=Ia(r,t+"angle"),w=qa(r,t+"declutter-mode"),S=new Ka({points:l,radius:u,radius2:x,angle:v,declutterMode:w});return function(I){return c&&S.setFill(c(I)),d&&S.setStroke(d(I)),p&&S.setDisplacement(p(I)),_&&S.setRotation(_(I)),y&&S.setRotateWithView(y(I)),g&&S.setScale(g(I)),S}}function Sv(r,e){const t="circle-",i=Go(r,t,e),o=Uo(r,t,e),l=Wt(r,t+"radius",e),u=$a(r,t+"scale",e),c=Ta(r,t+"displacement",e),d=Wt(r,t+"rotation",e),g=ys(r,t+"rotate-with-view",e),p=qa(r,t+"declutter-mode"),_=new Yo({radius:5,declutterMode:p});return function(y){return l&&_.setRadius(l(y)),i&&_.setFill(i(y)),o&&_.setStroke(o(y)),c&&_.setDisplacement(c(y)),d&&_.setRotation(d(y)),g&&_.setRotateWithView(g(y)),u&&_.setScale(u(y)),_}}function Wt(r,e,t){if(!(e in r))return;const i=fi(r[e],Re,t);return function(o){return mh(i(o),e)}}function oi(r,e,t){if(!(e in r))return null;const i=fi(r[e],Ut,t);return function(o){return s_(i(o),e)}}function Cv(r,e,t){const i=oi(r,e+"pattern-src",t),o=bp(r,e+"pattern-offset",t),l=bp(r,e+"pattern-size",t),u=id(r,e+"color",t);return function(c){return{src:i(c),offset:o&&o(c),size:l&&l(c),color:u&&u(c)}}}function ys(r,e,t){if(!(e in r))return null;const i=fi(r[e],At,t);return function(o){const l=i(o);if(typeof l!="boolean")throw new Error(`Expected a boolean for ${e}`);return l}}function id(r,e,t){if(!(e in r))return null;const i=fi(r[e],Tn,t);return function(o){return o_(i(o),e)}}function r_(r,e,t){if(!(e in r))return null;const i=fi(r[e],Cr,t);return function(o){return Ko(i(o),e)}}function Ta(r,e,t){if(!(e in r))return null;const i=fi(r[e],Cr,t);return function(o){const l=Ko(i(o),e);if(l.length!==2)throw new Error(`Expected two numbers for ${e}`);return l}}function bp(r,e,t){if(!(e in r))return null;const i=fi(r[e],Cr,t);return function(o){return l_(i(o),e)}}function $a(r,e,t){if(!(e in r))return null;const i=fi(r[e],Cr|Re,t);return function(o){return Av(i(o),e)}}function Ia(r,e){const t=r[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function Rv(r,e){const t=r[e];if(t!==void 0){if(typeof t=="number")return jt(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function Tv(r,e){const t=r[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function Wp(r,e){const t=r[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function jp(r,e){const t=r[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function Iv(r,e){const t=r[e];if(t!==void 0)return Ko(t,e)}function qa(r,e){const t=r[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function Lv(r,e){const t=r[e];if(t!==void 0)return o_(t,e)}function Ko(r,e){if(!Array.isArray(r))throw new Error(`Expected an array for ${e}`);const t=r.length;for(let i=0;i<t;++i)if(typeof r[i]!="number")throw new Error(`Expected an array of numbers for ${e}`);return r}function s_(r,e){if(typeof r!="string")throw new Error(`Expected a string for ${e}`);return r}function mh(r,e){if(typeof r!="number")throw new Error(`Expected a number for ${e}`);return r}function o_(r,e){if(typeof r=="string")return r;const t=Ko(r,e),i=t.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function l_(r,e){const t=Ko(r,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function Av(r,e){return typeof r=="number"?r:l_(r,e)}const Xp={RENDER_ORDER:"renderOrder"};class a_ extends Ha{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Xp.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const i=this.getDeclutter();i in e.declutter||(e.declutter[i]=new e_(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(Xp.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?$m:e;const t=Mv(e);this.styleFunction_=e===null?void 0:TE(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function Mv(r){if(r===void 0)return $m;if(!r)return null;if(typeof r=="function"||r instanceof ui)return r;if(!Array.isArray(r))return Up([r]);if(r.length===0)return[];const e=r.length,t=r[0];if(t instanceof ui){const o=new Array(e);for(let l=0;l<e;++l){const u=r[l];if(!(u instanceof ui))throw new Error("Expected a list of style instances");o[l]=u}return o}if("style"in t){const o=new Array(e);for(let l=0;l<e;++l){const u=r[l];if(!("style"in u))throw new Error("Expected a list of rules with a style property");o[l]=u}return _v(o)}return Up(r)}const fe={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},pa=[fe.FILL],Yi=[fe.STROKE],wr=[fe.BEGIN_PATH],Bp=[fe.CLOSE_PATH];class u_{drawCustom(e,t,i,o,l){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,i){}drawFeature(e,t,i){}drawGeometryCollection(e,t,i){}drawLineString(e,t,i){}drawMultiLineString(e,t,i){}drawMultiPoint(e,t,i){}drawMultiPolygon(e,t,i){}drawPoint(e,t,i){}drawPolygon(e,t,i){}drawText(e,t,i){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class Zo extends u_{constructor(e,t,i,o){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=o,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),o=this.tmpCoordinate_,l=this.coordinates;let u=l.length;for(let c=0,d=e.length;c<d;c+=t)o[0]=e[c],o[1]=e[c+1],Cs(i,o)&&(l[u++]=o[0],l[u++]=o[1]);return u}appendFlatLineCoordinates(e,t,i,o,l,u){const c=this.coordinates;let d=c.length;const g=this.getBufferedMaxExtent();u&&(t+=o);let p=e[t],_=e[t+1];const y=this.tmpCoordinate_;let x=!0,v,w,S;for(v=t+o;v<i;v+=o)y[0]=e[v],y[1]=e[v+1],S=oh(g,y),S!==w?(x&&(c[d++]=p,c[d++]=_,x=!1),c[d++]=y[0],c[d++]=y[1]):S===ot.INTERSECTING?(c[d++]=y[0],c[d++]=y[1],x=!1):x=!0,p=y[0],_=y[1],w=S;return(l&&x||v===t+o)&&(c[d++]=p,c[d++]=_),d}drawCustomCoordinates_(e,t,i,o,l){for(let u=0,c=i.length;u<c;++u){const d=i[u],g=this.appendFlatLineCoordinates(e,t,d,o,!1,!1);l.push(g),t=d}return t}drawCustom(e,t,i,o,l){this.beginGeometry(e,t,l);const u=e.getType(),c=e.getStride(),d=this.coordinates.length;let g,p,_,y,x;switch(u){case"MultiPolygon":g=e.getOrientedFlatCoordinates(),y=[];const v=e.getEndss();x=0;for(let w=0,S=v.length;w<S;++w){const I=[];x=this.drawCustomCoordinates_(g,x,v[w],c,I),y.push(I)}this.instructions.push([fe.CUSTOM,d,y,e,i,yp,l]),this.hitDetectionInstructions.push([fe.CUSTOM,d,y,e,o||i,yp,l]);break;case"Polygon":case"MultiLineString":_=[],g=u=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),x=this.drawCustomCoordinates_(g,0,e.getEnds(),c,_),this.instructions.push([fe.CUSTOM,d,_,e,i,wa,l]),this.hitDetectionInstructions.push([fe.CUSTOM,d,_,e,o||i,wa,l]);break;case"LineString":case"Circle":g=e.getFlatCoordinates(),p=this.appendFlatLineCoordinates(g,0,g.length,c,!1,!1),this.instructions.push([fe.CUSTOM,d,p,e,i,fs,l]),this.hitDetectionInstructions.push([fe.CUSTOM,d,p,e,o||i,fs,l]);break;case"MultiPoint":g=e.getFlatCoordinates(),p=this.appendFlatPointCoordinates(g,c),p>d&&(this.instructions.push([fe.CUSTOM,d,p,e,i,fs,l]),this.hitDetectionInstructions.push([fe.CUSTOM,d,p,e,o||i,fs,l]));break;case"Point":g=e.getFlatCoordinates(),this.coordinates.push(g[0],g[1]),p=this.coordinates.length,this.instructions.push([fe.CUSTOM,d,p,e,i,void 0,l]),this.hitDetectionInstructions.push([fe.CUSTOM,d,p,e,o||i,void 0,l]);break}this.endGeometry(t)}beginGeometry(e,t,i){this.beginGeometryInstruction1_=[fe.BEGIN_GEOMETRY,t,0,e,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[fe.BEGIN_GEOMETRY,t,0,e,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const i=e.length;let o,l,u=-1;for(t=0;t<i;++t)o=e[t],l=o[0],l==fe.END_GEOMETRY?u=t:l==fe.BEGIN_GEOMETRY&&(o[2]=t,Yy(this.hitDetectionInstructions,u,t),u=-1)}setFillStrokeStyle(e,t){const i=this.state;if(e){const o=e.getColor();i.fillPatternScale=o&&typeof o=="object"&&"src"in o?this.pixelRatio:1,i.fillStyle=jn(o||Gt)}else i.fillStyle=void 0;if(t){const o=t.getColor();i.strokeStyle=jn(o||Fo);const l=t.getLineCap();i.lineCap=l!==void 0?l:Is;const u=t.getLineDash();i.lineDash=u?u.slice():li;const c=t.getLineDashOffset();i.lineDashOffset=c||ai;const d=t.getLineJoin();i.lineJoin=d!==void 0?d:Ls;const g=t.getWidth();i.lineWidth=g!==void 0?g:zo;const p=t.getMiterLimit();i.miterLimit=p!==void 0?p:Oo,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(e){const t=e.fillStyle,i=[fe.SET_FILL_STYLE,t];return typeof t!="string"&&i.push(e.fillPatternScale),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[fe.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,o=e.lineCap,l=e.lineDash,u=e.lineDashOffset,c=e.lineJoin,d=e.lineWidth,g=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=o||l!=e.currentLineDash&&!Qi(e.currentLineDash,l)||e.currentLineDashOffset!=u||e.currentLineJoin!=c||e.currentLineWidth!=d||e.currentMiterLimit!=g)&&(i!==void 0&&t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=o,e.currentLineDash=l,e.currentLineDashOffset=u,e.currentLineJoin=c,e.currentLineWidth=d,e.currentMiterLimit=g)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[fe.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=dm(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Na(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class Pv extends Zo{constructor(e,t,i,o){super(e,t,i,o),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,i){if(!this.image_||this.maxExtent&&!Cs(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,i);const o=e.getFlatCoordinates(),l=e.getStride(),u=this.coordinates.length,c=this.appendFlatPointCoordinates(o,l);this.instructions.push([fe.DRAW_IMAGE,u,c,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([fe.DRAW_IMAGE,u,c,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,i){if(!this.image_)return;this.beginGeometry(e,t,i);const o=e.getFlatCoordinates(),l=[];for(let d=0,g=o.length;d<g;d+=e.getStride())(!this.maxExtent||Cs(this.maxExtent,o.slice(d,d+2)))&&l.push(o[d],o[d+1]);const u=this.coordinates.length,c=this.appendFlatPointCoordinates(l,2);this.instructions.push([fe.DRAW_IMAGE,u,c,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([fe.DRAW_IMAGE,u,c,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),o=e.getSize(),l=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=o[1],this.opacity_=e.getOpacity(),this.originX_=l[0],this.originY_=l[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=o[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class kv extends Zo{constructor(e,t,i,o){super(e,t,i,o)}drawFlatCoordinates_(e,t,i,o){const l=this.coordinates.length,u=this.appendFlatLineCoordinates(e,t,i,o,!1,!1),c=[fe.MOVE_TO_LINE_TO,l,u];return this.instructions.push(c),this.hitDetectionInstructions.push(c),i}drawLineString(e,t,i){const o=this.state,l=o.strokeStyle,u=o.lineWidth;if(l===void 0||u===void 0)return;this.updateStrokeStyle(o,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([fe.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,li,ai],wr);const c=e.getFlatCoordinates(),d=e.getStride();this.drawFlatCoordinates_(c,0,c.length,d),this.hitDetectionInstructions.push(Yi),this.endGeometry(t)}drawMultiLineString(e,t,i){const o=this.state,l=o.strokeStyle,u=o.lineWidth;if(l===void 0||u===void 0)return;this.updateStrokeStyle(o,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([fe.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,li,ai],wr);const c=e.getEnds(),d=e.getFlatCoordinates(),g=e.getStride();let p=0;for(let _=0,y=c.length;_<y;++_)p=this.drawFlatCoordinates_(d,p,c[_],g);this.hitDetectionInstructions.push(Yi),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Yi),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Yi),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(wr)}}class Yp extends Zo{constructor(e,t,i,o){super(e,t,i,o)}drawFlatCoordinatess_(e,t,i,o){const l=this.state,u=l.fillStyle!==void 0,c=l.strokeStyle!==void 0,d=i.length;this.instructions.push(wr),this.hitDetectionInstructions.push(wr);for(let g=0;g<d;++g){const p=i[g],_=this.coordinates.length,y=this.appendFlatLineCoordinates(e,t,p,o,!0,!c),x=[fe.MOVE_TO_LINE_TO,_,y];this.instructions.push(x),this.hitDetectionInstructions.push(x),c&&(this.instructions.push(Bp),this.hitDetectionInstructions.push(Bp)),t=p}return u&&(this.instructions.push(pa),this.hitDetectionInstructions.push(pa)),c&&(this.instructions.push(Yi),this.hitDetectionInstructions.push(Yi)),t}drawCircle(e,t,i){const o=this.state,l=o.fillStyle,u=o.strokeStyle;if(l===void 0&&u===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),o.fillStyle!==void 0&&this.hitDetectionInstructions.push([fe.SET_FILL_STYLE,Gt]),o.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fe.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,li,ai]);const c=e.getFlatCoordinates(),d=e.getStride(),g=this.coordinates.length;this.appendFlatLineCoordinates(c,0,c.length,d,!1,!1);const p=[fe.CIRCLE,g];this.instructions.push(wr,p),this.hitDetectionInstructions.push(wr,p),o.fillStyle!==void 0&&(this.instructions.push(pa),this.hitDetectionInstructions.push(pa)),o.strokeStyle!==void 0&&(this.instructions.push(Yi),this.hitDetectionInstructions.push(Yi)),this.endGeometry(t)}drawPolygon(e,t,i){const o=this.state,l=o.fillStyle,u=o.strokeStyle;if(l===void 0&&u===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),o.fillStyle!==void 0&&this.hitDetectionInstructions.push([fe.SET_FILL_STYLE,Gt]),o.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fe.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,li,ai]);const c=e.getEnds(),d=e.getOrientedFlatCoordinates(),g=e.getStride();this.drawFlatCoordinatess_(d,0,c,g),this.endGeometry(t)}drawMultiPolygon(e,t,i){const o=this.state,l=o.fillStyle,u=o.strokeStyle;if(l===void 0&&u===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),o.fillStyle!==void 0&&this.hitDetectionInstructions.push([fe.SET_FILL_STYLE,Gt]),o.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fe.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,li,ai]);const c=e.getEndss(),d=e.getOrientedFlatCoordinates(),g=e.getStride();let p=0;for(let _=0,y=c.length;_<y;++_)p=this.drawFlatCoordinatess_(d,p,c[_],g);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let i=0,o=t.length;i<o;++i)t[i]=yr(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function Dv(r,e,t,i,o){const l=[];let u=t,c=0,d=e.slice(t,2);for(;c<r&&u+o<i;){const[g,p]=d.slice(-2),_=e[u+o],y=e[u+o+1],x=Math.sqrt((_-g)*(_-g)+(y-p)*(y-p));if(c+=x,c>=r){const v=(r-c+x)/x,w=an(g,_,v),S=an(p,y,v);d.push(w,S),l.push(d),d=[w,S],c==r&&(u+=o),c=0}else if(c<r)d.push(e[u+o],e[u+o+1]),u+=o;else{const v=x-c,w=an(g,_,v/x),S=an(p,y,v/x);d.push(w,S),l.push(d),d=[w,S],c=0,u+=o}}return c>0&&l.push(d),l}function Ov(r,e,t,i,o){let l=t,u=t,c=0,d=0,g=t,p,_,y,x,v,w,S,I,T,O;for(_=t;_<i;_+=o){const A=e[_],P=e[_+1];v!==void 0&&(T=A-v,O=P-w,x=Math.sqrt(T*T+O*O),S!==void 0&&(d+=y,p=Math.acos((S*T+I*O)/(y*x)),p>r&&(d>c&&(c=d,l=g,u=_),d=0,g=_-o)),y=x,S=T,I=O),v=A,w=P}return d+=x,d>c?[g,_]:[l,u]}const La={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class Fv extends Zo{constructor(e,t,i,o){super(e,t,i,o),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Gt]={fillStyle:Gt},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,i){const o=this.textFillState_,l=this.textStrokeState_,u=this.textState_;if(this.text_===""||!u||!o&&!l)return;const c=this.coordinates;let d=c.length;const g=e.getType();let p=null,_=e.getStride();if(u.placement==="line"&&(g=="LineString"||g=="MultiLineString"||g=="Polygon"||g=="MultiPolygon")){if(!bt(this.maxExtent,e.getExtent()))return;let y;if(p=e.getFlatCoordinates(),g=="LineString")y=[p.length];else if(g=="MultiLineString")y=e.getEnds();else if(g=="Polygon")y=e.getEnds().slice(0,1);else if(g=="MultiPolygon"){const S=e.getEndss();y=[];for(let I=0,T=S.length;I<T;++I)y.push(S[I][0])}this.beginGeometry(e,t,i);const x=u.repeat,v=x?void 0:u.textAlign;let w=0;for(let S=0,I=y.length;S<I;++S){let T;x?T=Dv(x*this.resolution,p,w,y[S],_):T=[p.slice(w,y[S])];for(let O=0,A=T.length;O<A;++O){const P=T[O];let j=0,Z=P.length;if(v==null){const X=Ov(u.maxAngle,P,0,P.length,2);j=X[0],Z=X[1]}for(let X=j;X<Z;X+=_)c.push(P[X],P[X+1]);const U=c.length;w=y[S],this.drawChars_(d,U),d=U}}this.endGeometry(t)}else{let y=u.overflow?null:[];switch(g){case"Point":case"MultiPoint":p=e.getFlatCoordinates();break;case"LineString":p=e.getFlatMidpoint();break;case"Circle":p=e.getCenter();break;case"MultiLineString":p=e.getFlatMidpoints(),_=2;break;case"Polygon":p=e.getFlatInteriorPoint(),u.overflow||y.push(p[2]/this.resolution),_=3;break;case"MultiPolygon":const T=e.getFlatInteriorPoints();p=[];for(let O=0,A=T.length;O<A;O+=3)u.overflow||y.push(T[O+2]/this.resolution),p.push(T[O],T[O+1]);if(p.length===0)return;_=2;break}const x=this.appendFlatPointCoordinates(p,_);if(x===d)return;if(y&&(x-d)/2!==p.length/_){let T=d/2;y=y.filter((O,A)=>{const P=c[(T+A)*2]===p[A*_]&&c[(T+A)*2+1]===p[A*_+1];return P||--T,P})}this.saveTextStates_(),(u.backgroundFill||u.backgroundStroke)&&(this.setFillStrokeStyle(u.backgroundFill,u.backgroundStroke),u.backgroundFill&&this.updateFillStyle(this.state,this.createFill),u.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t,i);let v=u.padding;if(v!=xr&&(u.scale[0]<0||u.scale[1]<0)){let T=u.padding[0],O=u.padding[1],A=u.padding[2],P=u.padding[3];u.scale[0]<0&&(O=-O,P=-P),u.scale[1]<0&&(T=-T,A=-A),v=[T,O,A,P]}const w=this.pixelRatio;this.instructions.push([fe.DRAW_IMAGE,d,x,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,v==xr?xr:v.map(function(T){return T*w}),!!u.backgroundFill,!!u.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]);const S=1/w,I=this.state.fillStyle;u.backgroundFill&&(this.state.fillStyle=Gt,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([fe.DRAW_IMAGE,d,x,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[S,S],NaN,this.declutterMode_,this.declutterImageWithText_,v,!!u.backgroundFill,!!u.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Gt:this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]),u.backgroundFill&&(this.state.fillStyle=I,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,o=this.strokeKey_;e&&(o in this.strokeStates||(this.strokeStates[o]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const l=this.textKey_;l in this.textStates||(this.textStates[l]={font:t.font,textAlign:t.textAlign||No,justify:t.justify,textBaseline:t.textBaseline||Ca,scale:t.scale});const u=this.fillKey_;i&&(u in this.fillStates||(this.fillStates[u]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,o=this.textState_,l=this.strokeKey_,u=this.textKey_,c=this.fillKey_;this.saveTextStates_();const d=this.pixelRatio,g=La[o.textBaseline],p=this.textOffsetY_*d,_=this.text_,y=i?i.lineWidth*Math.abs(o.scale[0])/2:0;this.instructions.push([fe.DRAW_CHARS,e,t,g,o.overflow,c,o.maxAngle,d,p,l,y*d,_,u,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([fe.DRAW_CHARS,e,t,g,o.overflow,c&&Gt,o.maxAngle,d,p,l,y*d,_,u,1/d,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let i,o,l;if(!e)this.text_="";else{const u=e.getFill();u?(o=this.textFillState_,o||(o={},this.textFillState_=o),o.fillStyle=jn(u.getColor()||Gt)):(o=null,this.textFillState_=o);const c=e.getStroke();if(!c)l=null,this.textStrokeState_=l;else{l=this.textStrokeState_,l||(l={},this.textStrokeState_=l);const w=c.getLineDash(),S=c.getLineDashOffset(),I=c.getWidth(),T=c.getMiterLimit();l.lineCap=c.getLineCap()||Is,l.lineDash=w?w.slice():li,l.lineDashOffset=S===void 0?ai:S,l.lineJoin=c.getLineJoin()||Ls,l.lineWidth=I===void 0?zo:I,l.miterLimit=T===void 0?Oo:T,l.strokeStyle=jn(c.getColor()||Fo)}i=this.textState_;const d=e.getFont()||Zm;xE(d);const g=e.getScaleArray();i.overflow=e.getOverflow(),i.font=d,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||Ca,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||xr,i.scale=g===void 0?[1,1]:g;const p=e.getOffsetX(),_=e.getOffsetY(),y=e.getRotateWithView(),x=e.getKeepUpright(),v=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=p===void 0?0:p,this.textOffsetY_=_===void 0?0:_,this.textRotateWithView_=y===void 0?!1:y,this.textKeepUpright_=x===void 0?!0:x,this.textRotation_=v===void 0?0:v,this.strokeKey_=l?(typeof l.strokeStyle=="string"?l.strokeStyle:Le(l.strokeStyle))+l.lineCap+l.lineDashOffset+"|"+l.lineWidth+l.lineJoin+l.miterLimit+"["+l.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=o&&o.fillStyle?typeof o.fillStyle=="string"?o.fillStyle:"|"+Le(o.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const Nv={Circle:Yp,Default:Zo,Image:Pv,LineString:kv,Polygon:Yp,Text:Fv};class zv{constructor(e,t,i,o){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=o,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const o in i){const l=i[o].finish();e[t][o]=l}}return e}getBuilder(e,t){const i=e!==void 0?e.toString():"0";let o=this.buildersByZIndex_[i];o===void 0&&(o={},this.buildersByZIndex_[i]=o);let l=o[t];if(l===void 0){const u=Nv[t];l=new u(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),o[t]=l}return l}}const Gv=5;class Uv extends Wo{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=Gv}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return ke()}getData(e){return null}prepareFrame(e){return ke()}renderFrame(e,t){return ke()}forEachFeatureAtCoordinate(e,t,i,o,l){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===we.LOADED||t.getState()===we.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=we.LOADED&&t!=we.ERROR&&e.addEventListener(Ee.CHANGE,this.boundHandleImageChange_),t==we.IDLE&&(e.load(),t=e.getState()),t==we.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class c_ extends di{constructor(e,t,i,o){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=o}}class h_{constructor(){Bg(this,"pushMethodArgs_",(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Sa(),{get:(e,t)=>{if(typeof Sa()[t]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t),this.pushMethodArgs_},set:(e,t,i)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t,i),!0)})}pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let i=0,o=t.length;i<o;++i){const l=t[i];if(typeof l=="function"){l(e);continue}const u=t[++i];if(typeof e[l]=="function")e[l](...u);else{if(typeof u=="function"){e[l]=u(e);continue}e[l]=u}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const Vp=[];let us=null;function bv(){us=Je(1,1,void 0,{willReadFrequently:!0})}class d_ extends Uv{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Ln(),this.pixelTransform=Ln(),this.inversePixelTransform=Ln(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,i){us||bv(),us.clearRect(0,0,1,1);let o;try{us.drawImage(e,t,i,1,1,0,0,1,1),o=us.getImageData(0,0,1,1).data}catch{return us=null,null}return o}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const o=this.getLayer().getClassName();let l,u;if(e&&e.className===o&&(!i||e&&e.style.backgroundColor&&Qi(Ts(e.style.backgroundColor),Ts(i)))){const c=e.firstElementChild;c instanceof HTMLCanvasElement&&(u=c.getContext("2d"))}if(u&&u.canvas.style.transform===t?(this.container=e,this.context=u,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){l=document.createElement("div"),l.className=o;let c=l.style;c.position="absolute",c.width="100%",c.height="100%",u=Je();const d=u.canvas;l.appendChild(d),c=d.style,c.position="absolute",c.left="0",c.transformOrigin="top left",this.container=l,this.context=u}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const o=hi(i),l=ba(i),u=Ua(i),c=Ga(i);lt(t.coordinateToPixelTransform,o),lt(t.coordinateToPixelTransform,l),lt(t.coordinateToPixelTransform,u),lt(t.coordinateToPixelTransform,c);const d=this.inversePixelTransform;lt(d,o),lt(d,l),lt(d,u),lt(d,c),e.save(),e.beginPath(),e.moveTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.lineTo(Math.round(u[0]),Math.round(u[1])),e.lineTo(Math.round(c[0]),Math.round(c[1])),e.clip()}prepareContainer(e,t){const i=e.extent,o=e.viewState.resolution,l=e.viewState.rotation,u=e.pixelRatio,c=Math.round(Ae(i)/o*u),d=Math.round(at(i)/o*u);ci(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/u,1/u,l,-c/2,-d/2),hm(this.inversePixelTransform,this.pixelTransform);const g=Jy(this.pixelTransform);if(this.useContainer(t,g,this.getBackground(e)),!this.containerReused){const p=this.context.canvas;p.width!=c||p.height!=d?(p.width=c,p.height=d):this.context.clearRect(0,0,c,d),g!==p.style.transform&&(p.style.transform=g)}}dispatchRenderEvent_(e,t,i){const o=this.getLayer();if(o.hasListener(e)){const l=new c_(e,this.inversePixelTransform,i,t);o.dispatchEvent(l)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(cn.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(cn.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new h_),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(cn.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(cn.POSTRENDER,this.context,e))}getRenderTransform(e,t,i,o,l,u,c){const d=l/2,g=u/2,p=o/t,_=-p,y=-e[0]+c,x=-e[1];return ci(this.tempTransform,d,g,p,_,-i,y,x)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function Wv(r,e,t,i,o,l,u,c,d,g,p,_,y=!0){let x=r[e],v=r[e+1],w=0,S=0,I=0,T=0;function O(){w=x,S=v,e+=i,x=r[e],v=r[e+1],T+=I,I=Math.sqrt((x-w)*(x-w)+(v-S)*(v-S))}do O();while(e<t-i&&T+I<l);let A=I===0?0:(l-T)/I;const P=an(w,x,A),j=an(S,v,A),Z=e-i,U=T,X=l+c*d(g,o,p);for(;e<t-i&&T+I<X;)O();A=I===0?0:(X-T)/I;const B=an(w,x,A),ie=an(S,v,A);let $=!1;if(y)if(_){const K=[P,j,B,ie];Pm(K,0,4,2,_,K,K),$=K[0]>K[2]}else $=P>B;const te=Math.PI,J=[],ee=Z+i===e;e=Z,I=0,T=U,x=r[e],v=r[e+1];let ne;if(ee){O(),ne=Math.atan2(v-S,x-w),$&&(ne+=ne>0?-te:te);const K=(B+P)/2,b=(ie+j)/2;return J[0]=[K,b,(X-l)/2,ne,o],J}o=o.replace(/\n/g," ");for(let K=0,b=o.length;K<b;){O();let q=Math.atan2(v-S,x-w);if($&&(q+=q>0?-te:te),ne!==void 0){let ue=q-ne;if(ue+=ue>te?-2*te:ue<-te?2*te:0,Math.abs(ue)>u)return null}ne=q;const G=K;let R=0;for(;K<b;++K){const ue=$?b-K-1:K,he=c*d(g,o[ue],p);if(e+i<t&&T+I<l+R+he/2)break;R+=he}if(K===G)continue;const N=$?o.substring(b-G,b-K):o.substring(G,K);A=I===0?0:(l+R/2-T)/I;const re=an(w,x,A),z=an(S,v,A);J.push([re,z,R/2,q,N]),l+=R}return J}const ns=Xt(),zi=[],ni=[],ii=[],Gi=[];function Kp(r){return r[3].declutterBox}const Zp=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function qc(r,e){return e==="start"?e=Zp.test(r)?"right":"left":e==="end"&&(e=Zp.test(r)?"left":"right"),La[e]}function jv(r,e,t){return t>0&&r.push(`
`,""),r.push(e,""),r}class Xv{constructor(e,t,i,o,l){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=o.instructions,this.coordinates=o.coordinates,this.coordinateCache_={},this.renderedTransform_=Ln(),this.hitDetectionInstructions=o.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=o.fillStates||{},this.strokeStates=o.strokeStates||{},this.textStates=o.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=l?new h_:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,i,o){const l=e+t+i+o;if(this.labels_[l])return this.labels_[l];const u=o?this.strokeStates[o]:null,c=i?this.fillStates[i]:null,d=this.textStates[t],g=this.pixelRatio,p=[d.scale[0]*g,d.scale[1]*g],_=d.justify?La[d.justify]:qc(Array.isArray(e)?e[0]:e,d.textAlign||No),y=o&&u.lineWidth?u.lineWidth:0,x=Array.isArray(e)?e:String(e).split(`
`).reduce(jv,[]),{width:v,height:w,widths:S,heights:I,lineWidths:T}=SE(d,x),O=v+y,A=[],P=(O+2)*p[0],j=(w+y)*p[1],Z={width:P<0?Math.floor(P):Math.ceil(P),height:j<0?Math.floor(j):Math.ceil(j),contextInstructions:A};(p[0]!=1||p[1]!=1)&&A.push("scale",p),o&&(A.push("strokeStyle",u.strokeStyle),A.push("lineWidth",y),A.push("lineCap",u.lineCap),A.push("lineJoin",u.lineJoin),A.push("miterLimit",u.miterLimit),A.push("setLineDash",[u.lineDash]),A.push("lineDashOffset",u.lineDashOffset)),i&&A.push("fillStyle",c.fillStyle),A.push("textBaseline","middle"),A.push("textAlign","center");const U=.5-_;let X=_*O+U*y;const B=[],ie=[];let $=0,te=0,J=0,ee=0,ne;for(let K=0,b=x.length;K<b;K+=2){const q=x[K];if(q===`
`){te+=$,$=0,X=_*O+U*y,++ee;continue}const G=x[K+1]||d.font;G!==ne&&(o&&B.push("font",G),i&&ie.push("font",G),ne=G),$=Math.max($,I[J]);const R=[q,X+U*S[J]+_*(S[J]-T[ee]),.5*(y+$)+te];X+=S[J],o&&B.push("strokeText",R),i&&ie.push("fillText",R),++J}return Array.prototype.push.apply(A,B),Array.prototype.push.apply(A,ie),this.labels_[l]=Z,Z}replayTextBackground_(e,t,i,o,l,u,c){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,o),e.lineTo.apply(e,l),e.lineTo.apply(e,t),u&&(this.alignAndScaleFill_=u[2],this.fill_(e)),c&&(this.setStrokeStyle_(e,c),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,o,l,u,c,d,g,p,_,y,x,v,w,S){c*=y[0],d*=y[1];let I=i-c,T=o-d;const O=l+g>e?e-g:l,A=u+p>t?t-p:u,P=v[3]+O*y[0]+v[1],j=v[0]+A*y[1]+v[2],Z=I-v[3],U=T-v[0];(w||_!==0)&&(zi[0]=Z,Gi[0]=Z,zi[1]=U,ni[1]=U,ni[0]=Z+P,ii[0]=ni[0],ii[1]=U+j,Gi[1]=ii[1]);let X;return _!==0?(X=ci(Ln(),i,o,1,1,_,-i,-o),lt(X,zi),lt(X,ni),lt(X,ii),lt(X,Gi),Hi(Math.min(zi[0],ni[0],ii[0],Gi[0]),Math.min(zi[1],ni[1],ii[1],Gi[1]),Math.max(zi[0],ni[0],ii[0],Gi[0]),Math.max(zi[1],ni[1],ii[1],Gi[1]),ns)):Hi(Math.min(Z,Z+P),Math.min(U,U+j),Math.max(Z,Z+P),Math.max(U,U+j),ns),x&&(I=Math.round(I),T=Math.round(T)),{drawImageX:I,drawImageY:T,drawImageW:O,drawImageH:A,originX:g,originY:p,declutterBox:{minX:ns[0],minY:ns[1],maxX:ns[2],maxY:ns[3],value:S},canvasTransform:X,scale:y}}replayImageOrLabel_(e,t,i,o,l,u,c){const d=!!(u||c),g=o.declutterBox,p=c?c[2]*o.scale[0]/2:0;return g.minX-p<=t[0]&&g.maxX+p>=0&&g.minY-p<=t[1]&&g.maxY+p>=0&&(d&&this.replayTextBackground_(e,zi,ni,ii,Gi,u,c),CE(e,o.canvasTransform,l,i,o.originX,o.originY,o.drawImageW,o.drawImageH,o.drawImageX,o.drawImageY,o.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const i=lt(this.renderedTransform_,[0,0]),o=512*this.pixelRatio;e.save(),e.translate(i[0]%o,i[1]%o),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,i,o){const l=this.textStates[t],u=this.createLabel(e,t,o,i),c=this.strokeStates[i],d=this.pixelRatio,g=qc(Array.isArray(e)?e[0]:e,l.textAlign||No),p=La[l.textBaseline||Ca],_=c&&c.lineWidth?c.lineWidth:0,y=u.width/d-2*l.scale[0],x=g*y+2*(.5-g)*_,v=p*u.height/d+2*(.5-p)*_;return{label:u,anchorX:x,anchorY:v}}execute_(e,t,i,o,l,u,c,d){const g=this.zIndexContext_;let p;this.pixelCoordinates_&&Qi(i,this.renderedTransform_)?p=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),p=Zi(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),qy(this.renderedTransform_,i));let _=0;const y=o.length;let x=0,v,w,S,I,T,O,A,P,j,Z,U,X,B,ie=0,$=0,te=null,J=null;const ee=this.coordinateCache_,ne=this.viewRotation_,K=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,b={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:ne},q=this.instructions!=o||this.overlaps?0:200;let G,R,N,re;for(;_<y;){const z=o[_];switch(z[0]){case fe.BEGIN_GEOMETRY:G=z[1],re=z[3],G.getGeometry()?c!==void 0&&!bt(c,re.getExtent())?_=z[2]+1:++_:_=z[2],g&&(g.zIndex=z[4]);break;case fe.BEGIN_PATH:ie>q&&(this.fill_(e),ie=0),$>q&&(e.stroke(),$=0),!ie&&!$&&(e.beginPath(),T=NaN,O=NaN),++_;break;case fe.CIRCLE:x=z[1];const he=p[x],me=p[x+1],ve=p[x+2],Ce=p[x+3],Ne=ve-he,St=Ce-me,Mn=Math.sqrt(Ne*Ne+St*St);e.moveTo(he+Mn,me),e.arc(he,me,Mn,0,2*Math.PI,!0),++_;break;case fe.CLOSE_PATH:e.closePath(),++_;break;case fe.CUSTOM:x=z[1],v=z[2];const fn=z[3],Bn=z[4],Pn=z[5];b.geometry=fn,b.feature=G,_ in ee||(ee[_]=[]);const $t=ee[_];Pn?Pn(p,x,v,2,$t):($t[0]=p[x],$t[1]=p[x+1],$t.length=2),g&&(g.zIndex=z[6]),Bn($t,b),++_;break;case fe.DRAW_IMAGE:x=z[1],v=z[2],j=z[3],w=z[4],S=z[5];let gt=z[6];const Yt=z[7],kn=z[8],qt=z[9],Qt=z[10];let gn=z[11];const Yn=z[12];let Vn=z[13];I=z[14]||"declutter";const Ze=z[15];if(!j&&z.length>=20){Z=z[19],U=z[20],X=z[21],B=z[22];const Ct=this.drawLabelWithPointPlacement_(Z,U,X,B);j=Ct.label,z[3]=j;const pn=z[23];w=(Ct.anchorX-pn)*this.pixelRatio,z[4]=w;const Rt=z[24];S=(Ct.anchorY-Rt)*this.pixelRatio,z[5]=S,gt=j.height,z[6]=gt,Vn=j.width,z[13]=Vn}let Tr;z.length>25&&(Tr=z[25]);let Ji,Kn,er;z.length>17?(Ji=z[16],Kn=z[17],er=z[18]):(Ji=xr,Kn=!1,er=!1),Qt&&K?gn+=ne:!Qt&&!K&&(gn-=ne);let tr=0;for(;x<v;x+=2){if(Tr&&Tr[tr++]<Vn/this.pixelRatio)continue;const Ct=this.calculateImageOrLabelDimensions_(j.width,j.height,p[x],p[x+1],Vn,gt,w,S,kn,qt,gn,Yn,l,Ji,Kn||er,G),pn=[e,t,j,Ct,Yt,Kn?te:null,er?J:null];if(d){let Rt,pt,mt;if(Ze){const ze=v-x;if(!Ze[ze]){Ze[ze]={args:pn,declutterMode:I};continue}const qe=Ze[ze];Rt=qe.args,pt=qe.declutterMode,delete Ze[ze],mt=Kp(Rt)}let Tt,mn;if(Rt&&(pt!=="declutter"||!d.collides(mt))&&(Tt=!0),(I!=="declutter"||!d.collides(Ct.declutterBox))&&(mn=!0),pt==="declutter"&&I==="declutter"){const ze=Tt&&mn;Tt=ze,mn=ze}Tt&&(pt!=="none"&&d.insert(mt),this.replayImageOrLabel_.apply(this,Rt)),mn&&(I!=="none"&&d.insert(Ct.declutterBox),this.replayImageOrLabel_.apply(this,pn))}else this.replayImageOrLabel_.apply(this,pn)}++_;break;case fe.DRAW_CHARS:const gi=z[1],qo=z[2],Ir=z[3],Qo=z[4];B=z[5];const Ja=z[6],Lr=z[7],Ar=z[8];X=z[9];const nr=z[10];Z=z[11],U=z[12];const Mr=[z[13],z[13]];I=z[14]||"declutter";const Ps=z[15],Dn=this.textStates[U],Jt=Dn.font,pi=[Dn.scale[0]*Lr,Dn.scale[1]*Lr];let mi;Jt in this.widths_?mi=this.widths_[Jt]:(mi={},this.widths_[Jt]=mi);const ks=_E(p,gi,qo,2),Ds=Math.abs(pi[0])*Ap(Jt,Z,mi);if(Qo||Ds<=ks){const Ct=this.textStates[U].textAlign,pn=(ks-Ds)*qc(Z,Ct),Rt=Wv(p,gi,qo,2,Z,pn,Ja,Math.abs(pi[0]),Ap,Jt,mi,K?0:this.viewRotation_,Ps);e:if(Rt){const pt=[];let mt,Tt,mn,ze,qe;if(X)for(mt=0,Tt=Rt.length;mt<Tt;++mt){qe=Rt[mt],mn=qe[4],ze=this.createLabel(mn,U,"",X),w=qe[2]+(pi[0]<0?-nr:nr),S=Ir*ze.height+(.5-Ir)*2*nr*pi[1]/pi[0]-Ar;const Mt=this.calculateImageOrLabelDimensions_(ze.width,ze.height,qe[0],qe[1],ze.width,ze.height,w,S,0,0,qe[3],Mr,!1,xr,!1,G);if(d&&I==="declutter"&&d.collides(Mt.declutterBox))break e;pt.push([e,t,ze,Mt,1,null,null])}if(B)for(mt=0,Tt=Rt.length;mt<Tt;++mt){qe=Rt[mt],mn=qe[4],ze=this.createLabel(mn,U,B,""),w=qe[2],S=Ir*ze.height-Ar;const Mt=this.calculateImageOrLabelDimensions_(ze.width,ze.height,qe[0],qe[1],ze.width,ze.height,w,S,0,0,qe[3],Mr,!1,xr,!1,G);if(d&&I==="declutter"&&d.collides(Mt.declutterBox))break e;pt.push([e,t,ze,Mt,1,null,null])}d&&I!=="none"&&d.load(pt.map(Kp));for(let Mt=0,Os=pt.length;Mt<Os;++Mt)this.replayImageOrLabel_.apply(this,pt[Mt])}}++_;break;case fe.END_GEOMETRY:if(u!==void 0){G=z[1];const Ct=u(G,re,I);if(Ct)return Ct}++_;break;case fe.FILL:q?ie++:this.fill_(e),++_;break;case fe.MOVE_TO_LINE_TO:for(x=z[1],v=z[2],R=p[x],N=p[x+1],e.moveTo(R,N),T=R+.5|0,O=N+.5|0,x+=2;x<v;x+=2)R=p[x],N=p[x+1],A=R+.5|0,P=N+.5|0,(x==v-2||A!==T||P!==O)&&(e.lineTo(R,N),T=A,O=P);++_;break;case fe.SET_FILL_STYLE:te=z,this.alignAndScaleFill_=z[2],ie&&(this.fill_(e),ie=0,$&&(e.stroke(),$=0)),e.fillStyle=z[1],++_;break;case fe.SET_STROKE_STYLE:J=z,$&&(e.stroke(),$=0),this.setStrokeStyle_(e,z),++_;break;case fe.STROKE:q?$++:e.stroke(),++_;break;default:++_;break}}ie&&this.fill_(e),$&&e.stroke()}execute(e,t,i,o,l,u){this.viewRotation_=o,this.execute_(e,t,i,this.instructions,l,void 0,void 0,u)}executeHitDetection(e,t,i,o,l){return this.viewRotation_=i,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,o,l)}}const gs=["Polygon","Circle","LineString","Image","Text","Default"],f_=["Image","Text"],Bv=gs.filter(r=>!f_.includes(r));class Yv{constructor(e,t,i,o,l,u,c){this.maxExtent_=e,this.overlaps_=o,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=u,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Ln(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(l,c)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e,t){for(const i in e){let o=this.executorsByZIndex_[i];o===void 0&&(o={},this.executorsByZIndex_[i]=o);const l=e[i];for(const u in l){const c=l[u];o[u]=new Xv(this.resolution_,this.pixelRatio_,this.overlaps_,c,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let o=0,l=e.length;o<l;++o)if(e[o]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,o,l,u){o=Math.round(o);const c=o*2+1,d=ci(this.hitDetectionTransform_,o+.5,o+.5,1/t,-1/t,-i,-e[0],-e[1]),g=!this.hitDetectionContext_;g&&(this.hitDetectionContext_=Je(c,c,void 0,{willReadFrequently:!0}));const p=this.hitDetectionContext_;p.canvas.width!==c||p.canvas.height!==c?(p.canvas.width=c,p.canvas.height=c):g||p.clearRect(0,0,c,c);let _;this.renderBuffer_!==void 0&&(_=Xt(),To(_,e),Na(_,t*(this.renderBuffer_+o),_));const y=Vv(o);let x;function v(P,j,Z){const U=p.getImageData(0,0,c,c).data;for(let X=0,B=y.length;X<B;X++)if(U[y[X]]>0){if(!u||Z==="none"||x!=="Image"&&x!=="Text"||u.includes(P)){const ie=(y[X]-3)/4,$=o-ie%c,te=o-(ie/c|0),J=l(P,j,$*$+te*te);if(J)return J}p.clearRect(0,0,c,c);break}}const w=Object.keys(this.executorsByZIndex_).map(Number);w.sort(Vi);let S,I,T,O,A;for(S=w.length-1;S>=0;--S){const P=w[S].toString();for(T=this.executorsByZIndex_[P],I=gs.length-1;I>=0;--I)if(x=gs[I],O=T[x],O!==void 0&&(A=O.executeHitDetection(p,d,i,v,_),A))return A}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],o=t[1],l=t[2],u=t[3],c=[i,o,i,u,l,u,l,o];return Zi(c,0,8,2,e,c),c}isEmpty(){return Ss(this.executorsByZIndex_)}execute(e,t,i,o,l,u,c){const d=Object.keys(this.executorsByZIndex_).map(Number);d.sort(c?By:Vi),u=u||gs;const g=gs.length;for(let p=0,_=d.length;p<_;++p){const y=d[p].toString(),x=this.executorsByZIndex_[y];for(let v=0,w=u.length;v<w;++v){const S=u[v],I=x[S];if(I!==void 0){const T=c===null?void 0:I.getZIndexContext(),O=T?T.getContext():e,A=this.maxExtent_&&S!=="Image"&&S!=="Text";if(A&&(O.save(),this.clip(O,i)),!T||S==="Text"||S==="Image"?I.execute(O,t,i,o,l,c):T.pushFunction(P=>I.execute(P,t,i,o,l,c)),A&&O.restore(),T){T.offset();const P=d[p]*g+v;this.deferredZIndexContexts_[P]||(this.deferredZIndexContexts_[P]=[]),this.deferredZIndexContexts_[P].push(T)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(Vi);for(let i=0,o=t.length;i<o;++i)e[t[i]].forEach(l=>{l.draw(this.renderedContext_),l.clear()}),e[t[i]].length=0}}const Qc={};function Vv(r){if(Qc[r]!==void 0)return Qc[r];const e=r*2+1,t=r*r,i=new Array(t+1);for(let l=0;l<=r;++l)for(let u=0;u<=r;++u){const c=l*l+u*u;if(c>t)break;let d=i[c];d||(d=[],i[c]=d),d.push(((r+l)*e+(r+u))*4+3),l>0&&d.push(((r-l)*e+(r+u))*4+3),u>0&&(d.push(((r+l)*e+(r-u))*4+3),l>0&&d.push(((r-l)*e+(r-u))*4+3))}const o=[];for(let l=0,u=i.length;l<u;++l)i[l]&&o.push(...i[l]);return Qc[r]=o,o}class Kv extends u_{constructor(e,t,i,o,l,u,c){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=o,this.transformRotation_=o?kh(Math.atan2(o[1],o[0]),10):0,this.viewRotation_=l,this.squaredTolerance_=u,this.userTransform_=c,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Ln()}drawImages_(e,t,i,o){if(!this.image_)return;const l=Zi(e,t,i,o,this.transform_,this.pixelCoordinates_),u=this.context_,c=this.tmpLocalTransform_,d=u.globalAlpha;this.imageOpacity_!=1&&(u.globalAlpha=d*this.imageOpacity_);let g=this.imageRotation_;this.transformRotation_===0&&(g-=this.viewRotation_),this.imageRotateWithView_&&(g+=this.viewRotation_);for(let p=0,_=l.length;p<_;p+=2){const y=l[p]-this.imageAnchorX_,x=l[p+1]-this.imageAnchorY_;if(g!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const v=y+this.imageAnchorX_,w=x+this.imageAnchorY_;ci(c,v,w,1,1,g,-v,-w),u.save(),u.transform.apply(u,c),u.translate(v,w),u.scale(this.imageScale_[0],this.imageScale_[1]),u.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),u.restore()}else u.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,y,x,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(u.globalAlpha=d)}drawText_(e,t,i,o){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const l=Zi(e,t,i,o,this.transform_,this.pixelCoordinates_),u=this.context_;let c=this.textRotation_;for(this.transformRotation_===0&&(c-=this.viewRotation_),this.textRotateWithView_&&(c+=this.viewRotation_);t<i;t+=o){const d=l[t]+this.textOffsetX_,g=l[t+1]+this.textOffsetY_;c!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(u.save(),u.translate(d-this.textOffsetX_,g-this.textOffsetY_),u.rotate(c),u.translate(this.textOffsetX_,this.textOffsetY_),u.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&u.strokeText(this.text_,0,0),this.textFillState_&&u.fillText(this.text_,0,0),u.restore()):(this.textStrokeState_&&u.strokeText(this.text_,d,g),this.textFillState_&&u.fillText(this.text_,d,g))}}moveToLineTo_(e,t,i,o,l){const u=this.context_,c=Zi(e,t,i,o,this.transform_,this.pixelCoordinates_);u.moveTo(c[0],c[1]);let d=c.length;l&&(d-=2);for(let g=2;g<d;g+=2)u.lineTo(c[g],c[g+1]);return l&&u.closePath(),i}drawRings_(e,t,i,o){for(let l=0,u=i.length;l<u;++l)t=this.moveToLineTo_(e,t,i[l],o,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!bt(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=W1(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],o=t[3]-t[1],l=Math.sqrt(i*i+o*o),u=this.context_;u.beginPath(),u.arc(t[0],t[1],l,0,2*Math.PI),this.fillState_&&u.fill(),this.strokeState_&&u.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const i=t.getGeometryFunction()(e);i&&(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,o=t.length;i<o;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!bt(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(bt(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,o=e.getFlatCoordinates();let l=0;const u=e.getEnds(),c=e.getStride();i.beginPath();for(let d=0,g=u.length;d<g;++d)l=this.moveToLineTo_(o,l,u[d],c,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!bt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!bt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let o=0;const l=e.getEndss(),u=e.getStride();t.beginPath();for(let c=0,d=l.length;c<d;++c){const g=l[c];o=this.drawRings_(i,o,g,u)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),Qi(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,o=e.textAlign?e.textAlign:No;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=o&&(i.textAlign=o,t.textAlign=o),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=o,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:o,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:jn(i||Gt)}}if(!t)this.strokeState_=null;else{const i=t.getColor(),o=t.getLineCap(),l=t.getLineDash(),u=t.getLineDashOffset(),c=t.getLineJoin(),d=t.getWidth(),g=t.getMiterLimit(),p=l||li;this.strokeState_={lineCap:o!==void 0?o:Is,lineDash:this.pixelRatio_===1?p:p.map(_=>_*this.pixelRatio_),lineDashOffset:(u||ai)*this.pixelRatio_,lineJoin:c!==void 0?c:Ls,lineWidth:(d!==void 0?d:zo)*this.pixelRatio_,miterLimit:g!==void 0?g:Oo,strokeStyle:jn(i||Fo)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),o=e.getAnchor(),l=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=o[0]*i,this.imageAnchorY_=o[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=l[0],this.imageOriginY_=l[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const u=e.getScaleArray();this.imageScale_=[u[0]*this.pixelRatio_/i,u[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const x=t.getColor();this.textFillState_={fillStyle:jn(x||Gt)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const x=i.getColor(),v=i.getLineCap(),w=i.getLineDash(),S=i.getLineDashOffset(),I=i.getLineJoin(),T=i.getWidth(),O=i.getMiterLimit();this.textStrokeState_={lineCap:v!==void 0?v:Is,lineDash:w||li,lineDashOffset:S||ai,lineJoin:I!==void 0?I:Ls,lineWidth:T!==void 0?T:zo,miterLimit:O!==void 0?O:Oo,strokeStyle:jn(x||Fo)}}const o=e.getFont(),l=e.getOffsetX(),u=e.getOffsetY(),c=e.getRotateWithView(),d=e.getRotation(),g=e.getScaleArray(),p=e.getText(),_=e.getTextAlign(),y=e.getTextBaseline();this.textState_={font:o!==void 0?o:Zm,textAlign:_!==void 0?_:No,textBaseline:y!==void 0?y:Ca},this.text_=p!==void 0?Array.isArray(p)?p.reduce((x,v,w)=>x+=w%2?" ":v,""):p:"",this.textOffsetX_=l!==void 0?this.pixelRatio_*l:0,this.textOffsetY_=u!==void 0?this.pixelRatio_*u:0,this.textRotateWithView_=c!==void 0?c:!1,this.textRotation_=d!==void 0?d:0,this.textScale_=[this.pixelRatio_*g[0],this.pixelRatio_*g[1]]}}}const bn=.5;function Zv(r,e,t,i,o,l,u,c,d){const g=o,p=r[0]*bn,_=r[1]*bn,y=Je(p,_);y.imageSmoothingEnabled=!1;const x=y.canvas,v=new Kv(y,bn,o,null,u,c,null),w=t.length,S=Math.floor((256*256*256-1)/w),I={};for(let O=1;O<=w;++O){const A=t[O-1],P=A.getStyleFunction()||i;if(!P)continue;let j=P(A,l);if(!j)continue;Array.isArray(j)||(j=[j]);const U=(O*S).toString(16).padStart(7,"#00000");for(let X=0,B=j.length;X<B;++X){const ie=j[X],$=ie.getGeometryFunction()(A);if(!$||!bt(g,$.getExtent()))continue;const te=ie.clone(),J=te.getFill();J&&J.setColor(U);const ee=te.getStroke();ee&&(ee.setColor(U),ee.setLineDash(null)),te.setText(void 0);const ne=ie.getImage();if(ne){const G=ne.getImageSize();if(!G)continue;const R=Je(G[0],G[1],void 0,{alpha:!1}),N=R.canvas;R.fillStyle=U,R.fillRect(0,0,N.width,N.height),te.setImage(new Vo({img:N,anchor:ne.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:ne.getOrigin(),opacity:1,size:ne.getSize(),scale:ne.getScale(),rotation:ne.getRotation(),rotateWithView:ne.getRotateWithView()}))}const K=te.getZIndex()||0;let b=I[K];b||(b={},I[K]=b,b.Polygon=[],b.Circle=[],b.LineString=[],b.Point=[]);const q=$.getType();if(q==="GeometryCollection"){const G=$.getGeometriesArrayRecursive();for(let R=0,N=G.length;R<N;++R){const re=G[R];b[re.getType().replace("Multi","")].push(re,te)}}else b[q.replace("Multi","")].push($,te)}}const T=Object.keys(I).map(Number).sort(Vi);for(let O=0,A=T.length;O<A;++O){const P=I[T[O]];for(const j in P){const Z=P[j];for(let U=0,X=Z.length;U<X;U+=2){v.setStyle(Z[U+1]);for(let B=0,ie=e.length;B<ie;++B)v.setTransform(e[B]),v.drawGeometry(Z[U])}}}return y.getImageData(0,0,x.width,x.height)}function Hv(r,e,t){const i=[];if(t){const o=Math.floor(Math.round(r[0])*bn),l=Math.floor(Math.round(r[1])*bn),u=(Ke(o,0,t.width-1)+Ke(l,0,t.height-1)*t.width)*4,c=t.data[u],d=t.data[u+1],p=t.data[u+2]+256*(d+256*c),_=Math.floor((256*256*256-1)/e.length);p&&p%_===0&&i.push(e[p/_-1])}return i}const $v=.5,g_={Point:rx,LineString:tx,Polygon:ox,MultiPoint:sx,MultiLineString:nx,MultiPolygon:ix,GeometryCollection:ex,Circle:Qv};function qv(r,e){return parseInt(Le(r),10)-parseInt(Le(e),10)}function Hp(r,e){const t=p_(r,e);return t*t}function p_(r,e){return $v*r/e}function Qv(r,e,t,i,o){const l=t.getFill(),u=t.getStroke();if(l||u){const d=r.getBuilder(t.getZIndex(),"Circle");d.setFillStrokeStyle(l,u),d.drawCircle(e,i,o)}const c=t.getText();if(c&&c.getText()){const d=r.getBuilder(t.getZIndex(),"Text");d.setTextStyle(c),d.drawText(e,i)}}function $p(r,e,t,i,o,l,u,c){const d=[],g=t.getImage();if(g){let y=!0;const x=g.getImageState();x==we.LOADED||x==we.ERROR?y=!1:x==we.IDLE&&g.load(),y&&d.push(g.ready())}const p=t.getFill();p&&p.loading()&&d.push(p.ready());const _=d.length>0;return _&&Promise.all(d).then(()=>o(null)),Jv(r,e,t,i,l,u,c),_}function Jv(r,e,t,i,o,l,u){const c=t.getGeometryFunction()(e);if(!c)return;const d=c.simplifyTransformed(i,o);if(t.getRenderer())m_(r,d,t,e,u);else{const p=g_[d.getType()];p(r,d,t,e,u,l)}}function m_(r,e,t,i,o){if(e.getType()=="GeometryCollection"){const u=e.getGeometries();for(let c=0,d=u.length;c<d;++c)m_(r,u[c],t,i,o);return}r.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer(),o)}function ex(r,e,t,i,o,l){const u=e.getGeometriesArray();let c,d;for(c=0,d=u.length;c<d;++c){const g=g_[u[c].getType()];g(r,u[c],t,i,o,l)}}function tx(r,e,t,i,o){const l=t.getStroke();if(l){const c=r.getBuilder(t.getZIndex(),"LineString");c.setFillStrokeStyle(null,l),c.drawLineString(e,i,o)}const u=t.getText();if(u&&u.getText()){const c=r.getBuilder(t.getZIndex(),"Text");c.setTextStyle(u),c.drawText(e,i,o)}}function nx(r,e,t,i,o){const l=t.getStroke();if(l){const c=r.getBuilder(t.getZIndex(),"LineString");c.setFillStrokeStyle(null,l),c.drawMultiLineString(e,i,o)}const u=t.getText();if(u&&u.getText()){const c=r.getBuilder(t.getZIndex(),"Text");c.setTextStyle(u),c.drawText(e,i,o)}}function ix(r,e,t,i,o){const l=t.getFill(),u=t.getStroke();if(u||l){const d=r.getBuilder(t.getZIndex(),"Polygon");d.setFillStrokeStyle(l,u),d.drawMultiPolygon(e,i,o)}const c=t.getText();if(c&&c.getText()){const d=r.getBuilder(t.getZIndex(),"Text");d.setTextStyle(c),d.drawText(e,i,o)}}function rx(r,e,t,i,o,l){const u=t.getImage(),c=t.getText(),d=c&&c.getText(),g=l&&u&&d?{}:void 0;if(u){if(u.getImageState()!=we.LOADED)return;const p=r.getBuilder(t.getZIndex(),"Image");p.setImageStyle(u,g),p.drawPoint(e,i,o)}if(d){const p=r.getBuilder(t.getZIndex(),"Text");p.setTextStyle(c,g),p.drawText(e,i,o)}}function sx(r,e,t,i,o,l){const u=t.getImage(),c=u&&u.getOpacity()!==0,d=t.getText(),g=d&&d.getText(),p=l&&c&&g?{}:void 0;if(c){if(u.getImageState()!=we.LOADED)return;const _=r.getBuilder(t.getZIndex(),"Image");_.setImageStyle(u,p),_.drawMultiPoint(e,i,o)}if(g){const _=r.getBuilder(t.getZIndex(),"Text");_.setTextStyle(d,p),_.drawText(e,i,o)}}function ox(r,e,t,i,o){const l=t.getFill(),u=t.getStroke();if(l||u){const d=r.getBuilder(t.getZIndex(),"Polygon");d.setFillStrokeStyle(l,u),d.drawPolygon(e,i,o)}const c=t.getText();if(c&&c.getText()){const d=r.getBuilder(t.getZIndex(),"Text");d.setTextStyle(c),d.drawText(e,i,o)}}class lx extends d_{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Xt(),this.wrappedRenderedExtent_=Xt(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,i){const o=t.extent,l=t.viewState,u=l.center,c=l.resolution,d=l.projection,g=l.rotation,p=d.getExtent(),_=this.getLayer().getSource(),y=this.getLayer().getDeclutter(),x=t.pixelRatio,v=t.viewHints,w=!(v[wt.ANIMATING]||v[wt.INTERACTING]),S=this.context,I=Math.round(Ae(o)/c*x),T=Math.round(at(o)/c*x),O=_.getWrapX()&&d.canWrapX(),A=O?Ae(p):null,P=O?Math.ceil((o[2]-p[2])/A)+1:1;let j=O?Math.floor((o[0]-p[0])/A):0;do{let Z=this.getRenderTransform(u,c,0,x,I,T,j*A);t.declutter&&(Z=Z.slice(0)),e.execute(S,[S.canvas.width,S.canvas.height],Z,g,w,i===void 0?gs:i?f_:Bv,i?y&&t.declutter[y]:void 0)}while(++j<P)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Je(this.context.canvas.width,this.context.canvas.height,Vp))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,Ba(this.context),Vp.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex];this.opacity_=i.opacity;const o=e.viewState;this.prepareContainer(e,t);const l=this.context,u=this.replayGroup_;let c=u&&!u.isEmpty();if(!c&&!(this.getLayer().hasListener(cn.PRERENDER)||this.getLayer().hasListener(cn.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(l,e),o.projection,this.clipped_=!1,c&&i.extent&&this.clipping){const d=Bi(i.extent);c=bt(d,e.extent),this.clipped_=c&&!hs(d,e.extent),this.clipped_&&this.clipUnrotated(l,e,d)}return c&&this.renderWorlds(u,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&l.restore(),this.postRender(l,e),this.renderedRotation_!==o.rotation&&(this.renderedRotation_=o.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=this.frameState.size.slice(),o=this.renderedCenter_,l=this.renderedResolution_,u=this.renderedRotation_,c=this.renderedProjection_,d=this.wrappedRenderedExtent_,g=this.getLayer(),p=[],_=i[0]*bn,y=i[1]*bn;p.push(this.getRenderTransform(o,l,u,bn,_,y,0).slice());const x=g.getSource(),v=c.getExtent();if(x.getWrapX()&&c.canWrapX()&&!hs(v,d)){let w=d[0];const S=Ae(v);let I=0,T;for(;w<v[0];)--I,T=S*I,p.push(this.getRenderTransform(o,l,u,bn,_,y,T).slice()),w+=S;for(I=0,w=d[2];w>v[2];)++I,T=S*I,p.push(this.getRenderTransform(o,l,u,bn,_,y,T).slice()),w-=S}this.hitDetectionImageData_=Zv(i,p,this.renderedFeatures_,g.getStyleFunction(),d,l,u,Hp(l,this.renderedPixelRatio_))}t(Hv(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,i,o,l){if(!this.replayGroup_)return;const u=t.viewState.resolution,c=t.viewState.rotation,d=this.getLayer(),g={},p=function(y,x,v){const w=Le(y),S=g[w];if(S){if(S!==!0&&v<S.distanceSq){if(v===0)return g[w]=!0,l.splice(l.lastIndexOf(S),1),o(y,d,x);S.geometry=x,S.distanceSq=v}}else{if(v===0)return g[w]=!0,o(y,d,x);l.push(g[w]={feature:y,layer:d,geometry:x,distanceSq:v,callback:o})}},_=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,u,c,i,p,_?t.declutter[_].all().map(y=>y.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const o=e.viewHints[wt.ANIMATING],l=e.viewHints[wt.INTERACTING],u=t.getUpdateWhileAnimating(),c=t.getUpdateWhileInteracting();if(this.ready&&!u&&o||!c&&l)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const d=e.extent,g=e.viewState,p=g.projection,_=g.resolution,y=e.pixelRatio,x=t.getRevision(),v=t.getRenderBuffer();let w=t.getRenderOrder();w===void 0&&(w=qv);const S=g.center.slice(),I=Na(d,v*_),T=I.slice(),O=[I.slice()],A=p.getExtent();if(i.getWrapX()&&p.canWrapX()&&!hs(A,e.extent)){const J=Ae(A),ee=Math.max(Ae(I)/2,J);I[0]=A[0]-ee,I[2]=A[2]+ee,xm(S,p);const ne=ym(O[0],p);ne[0]<A[0]&&ne[2]<A[2]?O.push([ne[0]+J,ne[1],ne[2]+J,ne[3]]):ne[0]>A[0]&&ne[2]>A[2]&&O.push([ne[0]-J,ne[1],ne[2]-J,ne[3]])}if(this.ready&&this.renderedResolution_==_&&this.renderedRevision_==x&&this.renderedRenderOrder_==w&&this.renderedFrameDeclutter_===!!e.declutter&&hs(this.wrappedRenderedExtent_,I))return Qi(this.renderedExtent_,T)||(this.hitDetectionImageData_=null,this.renderedExtent_=T),this.renderedCenter_=S,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const P=new zv(p_(_,y),I,_,y);let j;for(let J=0,ee=O.length;J<ee;++J)i.loadFeatures(O[J],_,p);const Z=Hp(_,y);let U=!0;const X=(J,ee)=>{let ne;const K=J.getStyleFunction()||t.getStyleFunction();if(K&&(ne=K(J,_)),ne){const b=this.renderFeature(J,Z,ne,P,j,this.getLayer().getDeclutter(),ee);U=U&&!b}},B=Mm(I),ie=i.getFeaturesInExtent(B);w&&ie.sort(w);for(let J=0,ee=ie.length;J<ee;++J)X(ie[J],J);this.renderedFeatures_=ie,this.ready=U;const $=P.finish(),te=new Yv(I,_,y,i.getOverlaps(),$,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=_,this.renderedRevision_=x,this.renderedRenderOrder_=w,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=T,this.wrappedRenderedExtent_=I,this.renderedCenter_=S,this.renderedProjection_=p,this.renderedPixelRatio_=y,this.replayGroup_=te,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,o,l,u,c){if(!i)return!1;let d=!1;if(Array.isArray(i))for(let g=0,p=i.length;g<p;++g)d=$p(o,e,i[g],t,this.boundHandleStyleImageChange_,l,u,c)||d;else d=$p(o,e,i,t,this.boundHandleStyleImageChange_,l,u,c);return d}}class ax extends a_{constructor(e){super(e)}createRenderer(){return new lx(this)}}class qp{constructor(e){this.rbush_=new e_(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[Le(t)]=i}load(e,t){const i=new Array(t.length);for(let o=0,l=t.length;o<l;o++){const u=e[o],c=t[o],d={minX:u[0],minY:u[1],maxX:u[2],maxY:u[3],value:c};i[o]=d,this.items_[Le(c)]=d}this.rbush_.load(i)}remove(e){const t=Le(e),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null}update(e,t){const i=this.items_[Le(t)],o=[i.minX,i.minY,i.maxX,i.maxY];Lo(o,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(o){return o.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let o=0,l=e.length;o<l;o++)if(i=t(e[o]),i)return i;return i}isEmpty(){return Ss(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Hi(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}function ux(r,e,t,i){const o=[];let l=Xt();for(let u=0,c=t.length;u<c;++u){const d=t[u];l=Lh(r,e,d[0],i),o.push((l[0]+l[2])/2,(l[1]+l[3])/2),e=d[d.length-1]}return o}const Qp=Ln();class Rn{constructor(e,t,i,o,l,u){this.styleFunction,this.extent_,this.id_=u,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=l,this.squaredTolerance_,this.stride_=o,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?Ih(this.flatCoordinates_):Lh(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=$i(this.getExtent());this.flatInteriorPoints_=jh(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=tE(this.flatCoordinates_,this.ends_),t=ux(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=$1(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Rp(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const i=this.ends_;for(let o=0,l=i.length;o<l;++o){const u=i[o],c=Rp(e,t,u,2,.5);Th(this.flatMidpoints_,c),t=u}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Bt(e);const t=e.getExtent(),i=e.getWorldExtent();if(t&&i){const o=at(i)/at(t);ci(Qp,i[0],i[3],o,-o,0,0,0),Zi(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Qp,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new Rn(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=cm((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const i=this.simplifiedGeometry_.getFlatCoordinates();let o;switch(this.type_){case"LineString":i.length=Wh(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,i,0),o=[i.length];break;case"MultiLineString":o=[],i.length=V1(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,i,0,o);break;case"Polygon":o=[],i.length=Fm(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),i,0,o);break}return o&&(this.simplifiedGeometry_=new Rn(this.type_,i,o,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}Rn.prototype.getFlatCoordinates=Rn.prototype.getOrientedFlatCoordinates;class __ extends Xn{constructor(e){super(),this.projection=Bt(e.projection),this.attributions_=Jp(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,o){t.viewResolver=i,t.viewRejector=o})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Jp(e),this.changed()}setState(e){this.state_=e,this.changed()}}function Jp(r){return r?typeof r=="function"?r:(Array.isArray(r)||(r=[r]),e=>r):null}const ln={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function cx(r,e){return[[-1/0,-1/0,1/0,1/0]]}let hx=!1;function dx(r,e,t,i,o,l,u){const c=new XMLHttpRequest;c.open("GET",typeof r=="function"?r(t,i,o):r,!0),e.getType()=="arraybuffer"&&(c.responseType="arraybuffer"),c.withCredentials=hx,c.onload=function(d){if(!c.status||c.status>=200&&c.status<300){const g=e.getType();try{let p;g=="text"||g=="json"?p=c.responseText:g=="xml"?p=c.responseXML||c.responseText:g=="arraybuffer"&&(p=c.response),p?l(e.readFeatures(p,{extent:t,featureProjection:o}),e.readProjection(p)):u()}catch{u()}}else u()},c.onerror=u,c.send()}function em(r,e){return function(t,i,o,l,u){const c=this;dx(r,e,t,i,o,function(d,g){c.addFeatures(d),l!==void 0&&l(d)},u||ws)}}class Ui extends di{constructor(e,t,i){super(e),this.feature=t,this.features=i}}class y_ extends __{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=ws,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(Me(this.format_,"`format` must be set when `url` is set"),this.loader_=em(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:cx;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new qp:null,this.loadedExtentsRtree_=new qp,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,o;Array.isArray(e.features)?o=e.features:e.features&&(i=e.features,o=i.getArray()),!t&&i===void 0&&(i=new Wn(o)),o!==void 0&&this.addFeaturesInternal(o),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Le(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const o=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(o,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new Ui(ln.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof Rn||(this.featureChangeKeys_[e]=[Ie(t,Ee.CHANGE,this.handleFeatureChange_,this),Ie(t,xs.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let i=!0;if(t.getId()!==void 0){const o=String(t.getId());if(!(o in this.idIndex_))this.idIndex_[o]=t;else if(t instanceof Rn){const l=this.idIndex_[o];l instanceof Rn?Array.isArray(l)?l.push(t):this.idIndex_[o]=[l,t]:i=!1}else i=!1}return i&&(Me(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],o=[];for(let l=0,u=e.length;l<u;l++){const c=e[l],d=Le(c);this.addToIndex_(d,c)&&i.push(c)}for(let l=0,u=i.length;l<u;l++){const c=i[l],d=Le(c);this.setupChangeEvents_(d,c);const g=c.getGeometry();if(g){const p=g.getExtent();t.push(p),o.push(c)}else this.nullGeometryFeatures_[d]=c}if(this.featuresRtree_&&this.featuresRtree_.load(t,o),this.hasListener(ln.ADDFEATURE))for(let l=0,u=i.length;l<u;l++)this.dispatchEvent(new Ui(ln.ADDFEATURE,i[l]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(ln.ADDFEATURE,function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener(ln.REMOVEFEATURE,function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener(zt.ADD,i=>{t||(t=!0,this.addFeature(i.element),t=!1)}),e.addEventListener(zt.REMOVE,i=>{t||(t=!0,this.removeFeature(i.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(Ue);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(i=>{this.removeFeatureInternal(i)});for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new Ui(ln.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(o){const l=o.getGeometry();if(l instanceof Rn||l.intersectsCoordinate(e))return t(o)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){const o=i.getGeometry();if(o instanceof Rn||o.intersectsExtent(e)){const l=t(i);if(l)return l}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Ss(this.nullGeometryFeatures_)||Th(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const o=Ah(e,t);return[].concat(...o.map(l=>this.featuresRtree_.getInExtent(l)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],o=e[1];let l=null;const u=[NaN,NaN];let c=1/0;const d=[-1/0,-1/0,1/0,1/0];return t=t||Io,this.featuresRtree_.forEachInExtent(d,function(g){if(t(g)){const p=g.getGeometry(),_=c;if(c=p instanceof Rn?0:p.closestPointXY(i,o,u,c),c<_){l=g;const y=Math.sqrt(c);d[0]=i-y,d[1]=o-y,d[2]=i+y,d[3]=o+y}}}),l}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=Le(t),o=t.getGeometry();if(!o)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);else{const u=o.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(u,t)):this.featuresRtree_&&this.featuresRtree_.update(u,t)}const l=t.getId();if(l!==void 0){const u=l.toString();this.idIndex_[u]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[u]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new Ui(ln.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Le(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Ss(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,i){const o=this.loadedExtentsRtree_,l=this.strategy_(e,t,i);for(let u=0,c=l.length;u<c;++u){const d=l[u];o.forEachInExtent(d,function(p){return hs(p.extent,d)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Ui(ln.FEATURESLOADSTART)),this.loader_.call(this,d,t,i,p=>{--this.loadingExtentsCount_,this.dispatchEvent(new Ui(ln.FEATURESLOADEND,void 0,p))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Ui(ln.FEATURESLOADERROR))}),o.insert(d,{extent:d.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,i=t.forEachInExtent(e,function(o){if(Lo(o.extent,e))return o});i&&t.remove(i)}removeFeatures(e){let t=!1;for(let i=0,o=e.length;i<o;++i)t=this.removeFeatureInternal(e[i])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Le(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const i=this.featureChangeKeys_[t];i==null||i.forEach(Ue),delete this.featureChangeKeys_[t];const o=e.getId();if(o!==void 0){const l=o.toString(),u=this.idIndex_[l];u===e?delete this.idIndex_[l]:Array.isArray(u)&&(u.splice(u.indexOf(e),1),u.length===1&&(this.idIndex_[l]=u[0]))}return delete this.uidIndex_[t],this.hasListener(ln.REMOVEFEATURE)&&this.dispatchEvent(new Ui(ln.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){Me(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(em(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const oe={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class rd extends Oa{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(Ee.CHANGE)}release(){this.state===oe.ERROR&&this.setState(oe.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==oe.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){ke()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=t,this.transitionStarts_[e]=i;else if(i===-1)return 1;const o=t-i+1e3/60;return o>=this.transition_?1:Qm(o/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class E_ extends rd{constructor(e,t,i,o,l,u){super(e,t,u),this.crossOrigin_=o,this.src_=i,this.key=i,this.image_=new Image,o!==null&&(this.image_.crossOrigin=o),this.unlisten_=null,this.tileLoadFunction_=l}getImage(){return this.image_}setImage(e){this.image_=e,this.state=oe.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=oe.ERROR,this.unlistenImage_(),this.image_=fx(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=oe.LOADED:this.state=oe.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==oe.ERROR&&(this.state=oe.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==oe.IDLE&&(this.state=oe.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=fE(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function fx(){const r=Je(1,1);return r.fillStyle="rgba(0,0,0,0)",r.fillRect(0,0,1,1),r.canvas}class gx{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const o=this.points_[t+2]-this.points_[i+2];if(o<1e3/60)return!1;const l=this.points_[t]-this.points_[i],u=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(u,l),this.initialVelocity_=Math.sqrt(l*l+u*u)/o,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class px extends ka{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){ke()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,o=e.pixelToCoordinateTransform;ci(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),hm(o,i)}forEachFeatureAtCoordinate(e,t,i,o,l,u,c,d){let g;const p=t.viewState;function _(A,P,j,Z){return l.call(u,P,A?j:null,Z)}const y=p.projection,x=xm(e.slice(),y),v=[[0,0]];if(y.canWrapX()&&o){const A=y.getExtent(),P=Ae(A);v.push([-P,0],[P,0])}const w=t.layerStatesArray,S=w.length,I=[],T=[];for(let A=0;A<v.length;A++)for(let P=S-1;P>=0;--P){const j=w[P],Z=j.layer;if(Z.hasRenderer()&&td(j,p)&&c.call(d,Z)){const U=Z.getRenderer(),X=Z.getSource();if(U&&X){const B=X.getWrapX()?x:e,ie=_.bind(null,j.managed);T[0]=B[0]+v[A][0],T[1]=B[1]+v[A][1],g=U.forEachFeatureAtCoordinate(T,t,i,ie,I)}if(g)return g}}if(I.length===0)return;const O=1/I.length;return I.forEach((A,P)=>A.distanceSq+=P*O),I.sort((A,P)=>A.distanceSq-P.distanceSq),I.some(A=>g=A.callback(A.feature,A.layer,A.geometry)),g}hasFeatureAtCoordinate(e,t,i,o,l,u){return this.forEachFeatureAtCoordinate(e,t,i,o,Io,this,l,u)!==void 0}getMap(){return this.map_}renderFrame(e){ke()}scheduleExpireIconCache(e){hn.canExpireCache()&&e.postRenderFunctions.push(mx)}}function mx(r,e){hn.expire()}class _x extends px{constructor(e){super(e),this.fontChangeListenerKey_=Ie(si,xs.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Va+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const o=new c_(e,void 0,t);i.dispatchEvent(o)}}disposeInternal(){Ue(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(cn.PRECOMPOSE,e);const t=e.layerStatesArray.sort((c,d)=>c.zIndex-d.zIndex);t.some(c=>c.layer instanceof a_&&c.layer.getDeclutter())&&(e.declutter={});const o=e.viewState;this.children_.length=0;const l=[];let u=null;for(let c=0,d=t.length;c<d;++c){const g=t[c];e.layerIndex=c;const p=g.layer,_=p.getSourceState();if(!td(g,o)||_!="ready"&&_!="undefined"){p.unrender();continue}const y=p.render(e,u);y&&(y!==u&&(this.children_.push(y),u=y),l.push(g))}this.declutter(e,l),dE(this.element_,this.children_),this.dispatchRenderEvent(cn.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let i=t.length-1;i>=0;--i){const o=t[i],l=o.layer;l.getDeclutter()&&l.renderDeclutter(e,o)}t.forEach(i=>i.layer.renderDeferred(e))}}}class Xi extends di{constructor(e,t){super(e),this.layer=t}}const Jc={LAYERS:"layers"};class Ms extends qm{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Jc.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new Wn(i.slice(),{unique:!0}):Me(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new Wn(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Ue),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Ie(e,zt.ADD,this.handleLayersAdd_,this),Ie(e,zt.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(Ue);bo(this.listenerKeys_);const t=e.getArray();for(let i=0,o=t.length;i<o;i++){const l=t[i];this.registerLayerListeners_(l),this.dispatchEvent(new Xi("addlayer",l))}this.changed()}registerLayerListeners_(e){const t=[Ie(e,xs.PROPERTYCHANGE,this.handleLayerChange_,this),Ie(e,Ee.CHANGE,this.handleLayerChange_,this)];e instanceof Ms&&t.push(Ie(e,"addlayer",this.handleLayerGroupAdd_,this),Ie(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Le(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Xi("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Xi("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Xi("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=Le(t);this.listenerKeys_[i].forEach(Ue),delete this.listenerKeys_[i],this.dispatchEvent(new Xi("removelayer",t)),this.changed()}getLayers(){return this.get(Jc.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let o=0,l=i.length;o<l;++o)this.dispatchEvent(new Xi("removelayer",i[o]))}this.set(Jc.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],i=t.length;this.getLayers().forEach(function(u){u.getLayerStatesArray(t)});const o=this.getLayerState();let l=o.zIndex;!e&&o.zIndex===void 0&&(l=0);for(let u=i,c=t.length;u<c;u++){const d=t[u];d.opacity*=o.opacity,d.visible=d.visible&&o.visible,d.maxResolution=Math.min(d.maxResolution,o.maxResolution),d.minResolution=Math.max(d.minResolution,o.minResolution),d.minZoom=Math.max(d.minZoom,o.minZoom),d.maxZoom=Math.min(d.maxZoom,o.maxZoom),o.extent!==void 0&&(d.extent!==void 0?d.extent=In(d.extent,o.extent):d.extent=o.extent),d.zIndex===void 0&&(d.zIndex=l)}return t}getSourceState(){return"ready"}}class cs extends di{constructor(e,t,i){super(e),this.map=t,this.frameState=i!==void 0?i:null}}class Wi extends cs{constructor(e,t,i,o,l,u){super(e,t,l),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=o!==void 0?o:!1,this.activePointers=u}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Ve={SINGLECLICK:"singleclick",CLICK:Ee.CLICK,DBLCLICK:Ee.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},_h={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class yx extends Oa{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=Ie(i,_h.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Ie(i,_h.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Ee.TOUCHMOVE,this.boundHandleTouchMove_,Ym?{passive:!1}:!1)}emulateClick_(e){let t=new Wi(Ve.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Wi(Ve.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new Wi(Ve.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==Ve.POINTERUP||t.type==Ve.POINTERCANCEL){delete this.trackedTouches_[i];for(const o in this.trackedTouches_)if(this.trackedTouches_[o].target!==t.target){delete this.trackedTouches_[o];break}}else(t.type==Ve.POINTERDOWN||t.type==Ve.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Wi(Ve.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Ue),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new Wi(Ve.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Ie(i,Ve.POINTERMOVE,this.handlePointerMove_,this),Ie(i,Ve.POINTERUP,this.handlePointerUp_,this),Ie(this.element_,Ve.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(Ie(this.element_.getRootNode(),Ve.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Wi(Ve.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Wi(Ve.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Ue(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Ee.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Ue(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Ue),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const ji={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},xt={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Aa=1/0;class Ex{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,bo(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const o=this.keyFunction_(i);return delete this.queuedElements_[o],i}enqueue(e){Me(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=Aa?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,o=t.length,l=t[e],u=i[e],c=e;for(;e<o>>1;){const d=this.getLeftChildIndex_(e),g=this.getRightChildIndex_(e),p=g<o&&i[g]<i[d]?g:d;t[e]=t[p],i[e]=i[p],e=p}t[e]=l,i[e]=u,this.siftDown_(c,e)}siftDown_(e,t){const i=this.elements_,o=this.priorities_,l=i[t],u=o[t];for(;t>e;){const c=this.getParentIndex_(t);if(o[c]>u)i[t]=i[c],o[t]=o[c],t=c;else break}i[t]=l,o[t]=u}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let o=0;const l=t.length;let u,c,d;for(c=0;c<l;++c)u=t[c],d=e(u),d==Aa?delete this.queuedElements_[this.keyFunction_(u)]:(i[o]=d,t[o++]=u);t.length=o,i.length=o,this.heapify_()}}class vx extends Ex{constructor(e,t){super(function(i){return e.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(Ee.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(i===oe.LOADED||i===oe.ERROR||i===oe.EMPTY){i!==oe.ERROR&&t.removeEventListener(Ee.CHANGE,this.boundHandleTileChange_);const o=t.getKey();o in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[o],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let i=0;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;){const o=this.dequeue()[0],l=o.getKey();o.getState()===oe.IDLE&&!(l in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[l]=!0,++this.tilesLoading_,++i,o.load())}}}function xx(r,e,t,i,o){if(!r||!(t in r.wantedTiles)||!r.wantedTiles[t][e.getKey()])return Aa;const l=r.viewState.center,u=i[0]-l[0],c=i[1]-l[1];return 65536*Math.log(o)+Math.sqrt(u*u+c*c)/o}class sd extends Xn{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var t;this.map_&&((t=this.element)==null||t.remove());for(let i=0,o=this.listenerKeys.length;i<o;++i)Ue(this.listenerKeys[i]);if(this.listenerKeys.length=0,this.map_=e,e){const i=this.target_??e.getOverlayContainerStopEvent();this.element&&i.appendChild(this.element),this.render!==ws&&this.listenerKeys.push(Ie(e,ji.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class wx extends sd{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",o=e.expandClassName!==void 0?e.expandClassName:t+"-expand",l=e.collapseLabel!==void 0?e.collapseLabel:"›",u=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof l=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=l,this.collapseLabel_.className=u):this.collapseLabel_=l;const c=e.label!==void 0?e.label:"i";typeof c=="string"?(this.label_=document.createElement("span"),this.label_.textContent=c,this.label_.className=o):this.label_=c;const d=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(d),this.toggleButton_.addEventListener(Ee.CLICK,this.handleClick_.bind(this),!1);const g=t+" "+Va+" "+$h+(this.collapsed_&&this.collapsible_?" "+Ip:"")+(this.collapsible_?"":" ol-uncollapsible"),p=this.element;p.className=g,p.appendChild(this.toggleButton_),p.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),i=new Set(t.flatMap(o=>o.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(o=>i.add(o)):i.add(this.attributions_)),!this.overrideCollapsible_){const o=!t.some(l=>{var u;return((u=l.getSource())==null?void 0:u.getAttributionsCollapsible())===!1});this.setCollapsible(o)}return Array.from(i)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(o=>Ky(()=>o))),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Qi(t,this.renderedAttributions_)){hE(this.ulElement_);for(let o=0,l=t.length;o<l;++o){const u=document.createElement("li");u.innerHTML=t[o],this.ulElement_.appendChild(u)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Ip),this.collapsed_?Cp(this.collapseLabel_,this.label_):Cp(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class Sx extends sd{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"⇧",o=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=o,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(o));const l=e.tipLabel?e.tipLabel:"Reset rotation",u=document.createElement("button");u.className=t+"-reset",u.setAttribute("type","button"),u.title=l,u.appendChild(this.label_),u.addEventListener(Ee.CLICK,this.handleClick_.bind(this),!1);const c=t+" "+Va+" "+$h,d=this.element;d.className=c,d.appendChild(u),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(ca)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:As}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const o="rotate("+i+"rad)";if(this.autoHide_){const l=this.element.classList.contains(ca);!l&&i===0?this.element.classList.add(ca):l&&i!==0&&this.element.classList.remove(ca)}this.label_.style.transform=o}this.rotation_=i}}class Cx extends sd{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,o=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",l=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",u=e.zoomInLabel!==void 0?e.zoomInLabel:"+",c=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",d=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",g=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",p=document.createElement("button");p.className=o,p.setAttribute("type","button"),p.title=d,p.appendChild(typeof u=="string"?document.createTextNode(u):u),p.addEventListener(Ee.CLICK,this.handleClick_.bind(this,i),!1);const _=document.createElement("button");_.className=l,_.setAttribute("type","button"),_.title=g,_.appendChild(typeof c=="string"?document.createTextNode(c):c),_.addEventListener(Ee.CLICK,this.handleClick_.bind(this,-i),!1);const y=t+" "+Va+" "+$h,x=this.element;x.className=y,x.appendChild(p),x.appendChild(_),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const o=i.getZoom();if(o!==void 0){const l=i.getConstrainedZoom(o+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:l,duration:this.duration_,easing:As})):i.setZoom(l)}}}function Rx(r){r=r||{};const e=new Wn;return(r.zoom!==void 0?r.zoom:!0)&&e.push(new Cx(r.zoomOptions)),(r.rotate!==void 0?r.rotate:!0)&&e.push(new Sx(r.rotateOptions)),(r.attribution!==void 0?r.attribution:!0)&&e.push(new wx(r.attributionOptions)),e}const tm={ACTIVE:"active"};class Ho extends Xn{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(tm.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(tm.ACTIVE,e)}setMap(e){this.map_=e}}function Tx(r,e,t){const i=r.getCenterInternal();if(i){const o=[i[0]+e[0],i[1]+e[1]];r.animateInternal({duration:t!==void 0?t:250,easing:FE,center:r.getConstrainedCenter(o)})}}function od(r,e,t,i){const o=r.getZoom();if(o===void 0)return;const l=r.getConstrainedZoom(o+e),u=r.getResolutionForZoom(l);r.getAnimating()&&r.cancelAnimations(),r.animate({resolution:u,anchor:t,duration:i!==void 0?i:250,easing:As})}class Ix extends Ho{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Ve.DBLCLICK){const i=e.originalEvent,o=e.map,l=e.coordinate,u=i.shiftKey?-this.delta_:this.delta_,c=o.getView();od(c,u,l,this.duration_),i.preventDefault(),t=!0}return!t}}class $o extends Ho{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Ve.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Ve.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==Ve.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==Ve.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function ld(r){const e=r.length;let t=0,i=0;for(let o=0;o<e;o++)t+=r[o].clientX,i+=r[o].clientY;return{clientX:t/e,clientY:i/e}}function yh(r){const e=arguments;return function(t){let i=!0;for(let o=0,l=e.length;o<l&&(i=i&&e[o](t),!!i);++o);return i}}const Lx=function(r){const e=r.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Ax=function(r){const e=r.map.getTargetElement(),t=e.getRootNode(),i=r.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(i):e.contains(i)},v_=function(r){const e=r.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?Ax(r):!0},Mx=Io,x_=function(r){const e=r.originalEvent;return e.button==0&&!(cE&&jm&&e.ctrlKey)},w_=function(r){const e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Px=function(r){const e=r.originalEvent;return jm?e.metaKey:e.ctrlKey},kx=function(r){const e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},S_=function(r){const e=r.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},eh=function(r){const e=r.originalEvent;return Me(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},Dx=function(r){const e=r.originalEvent;return Me(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class Ox extends $o{constructor(e){super({stopDown:Da}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:yh(w_,Dx);this.condition_=e.onFocusOnly?yh(v_,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,o=t.getEventPixel(ld(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(o[0],o[1]),this.lastCentroid){const l=[this.lastCentroid[0]-o[0],o[1]-this.lastCentroid[1]],c=e.map.getView();vm(l,c.getResolution()),Dh(l,c.getRotation()),c.adjustCenterInternal(l)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=o,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const o=this.kinetic_.getDistance(),l=this.kinetic_.getAngle(),u=i.getCenterInternal(),c=t.getPixelFromCoordinateInternal(u),d=t.getCoordinateFromPixelInternal([c[0]-o*Math.cos(l),c[1]-o*Math.sin(l)]);i.animateInternal({center:i.getConstrainedCenter(d),duration:500,easing:As})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class Fx extends $o{constructor(e){e=e||{},super({stopDown:Da}),this.condition_=e.condition?e.condition:Lx,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!eh(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===ed)return;const o=t.getSize(),l=e.pixel,u=Math.atan2(o[1]/2-l[1],l[0]-o[0]/2);if(this.lastAngle_!==void 0){const c=u-this.lastAngle_;i.adjustRotationInternal(-c)}this.lastAngle_=u}handleUpEvent(e){return eh(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return eh(e)&&x_(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class Nx extends ka{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",o=this.element_.style;o.left=Math.min(e[0],t[0])+i,o.top=Math.min(e[1],t[1])+i,o.width=Math.abs(t[0]-e[0])+i,o.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,o=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);o[4]=o[0].slice(),this.geometry_?this.geometry_.setCoordinates([o]):this.geometry_=new ko([o])}getGeometry(){return this.geometry_}}const is={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Eo extends di{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}class zx extends $o{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new Nx(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??x_,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const o=i[0]-t[0],l=i[1]-t[1];return o*o+l*l>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Eo(is.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new Eo(t?is.BOXEND:is.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Eo(is.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Eo(is.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Eo(is.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class Gx extends zx{constructor(e){e=e||{};const t=e.condition?e.condition:kx;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let o=this.getGeometry();if(this.out_){const l=i.rotatedExtentForGeometry(o),u=i.getResolutionForExtentInternal(l),c=i.getResolution()/u;o=o.clone(),o.scale(c*c)}i.fitInternal(o,{duration:this.duration_,easing:As})}}const _r={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class Ux extends Ho{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return w_(t)&&S_(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==Ee.KEYDOWN){const i=e.originalEvent,o=i.key;if(this.condition_(e)&&(o==_r.DOWN||o==_r.LEFT||o==_r.RIGHT||o==_r.UP)){const u=e.map.getView(),c=u.getResolution()*this.pixelDelta_;let d=0,g=0;o==_r.DOWN?g=-c:o==_r.LEFT?d=-c:o==_r.RIGHT?d=c:g=c;const p=[d,g];Dh(p,u.getRotation()),Tx(u,p,this.duration_),i.preventDefault(),t=!0}}return!t}}class bx extends Ho{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!Px(t)&&S_(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==Ee.KEYDOWN||e.type==Ee.KEYPRESS){const i=e.originalEvent,o=i.key;if(this.condition_(e)&&(o==="+"||o==="-")){const l=e.map,u=o==="+"?this.delta_:-this.delta_,c=l.getView();od(c,u,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}}class Wx extends Ho{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:Mx;this.condition_=e.onFocusOnly?yh(v_,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==Ee.WHEEL)return!0;const i=e.map,o=e.originalEvent;o.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let l;if(e.type==Ee.WHEEL&&(l=o.deltaY,aE&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(l/=Xm),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(l*=40)),l===0)return!1;this.lastDelta_=l;const u=Date.now();this.startTime_===void 0&&(this.startTime_=u),(!this.mode_||u-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(l)<4?"trackpad":"wheel");const c=i.getView();if(this.mode_==="trackpad"&&!(c.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(c.getAnimating()&&c.cancelAnimations(),c.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),c.adjustZoom(-l/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=u,!1;this.totalDelta_+=l;const d=Math.max(this.timeout_-(u-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),d),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-Ke(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),od(t,i,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class jx extends $o{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Da),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],o=this.targetPointers[1],l=Math.atan2(o.clientY-i.clientY,o.clientX-i.clientX);if(this.lastAngle_!==void 0){const d=l-this.lastAngle_;this.rotationDelta_+=d,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=d}this.lastAngle_=l;const u=e.map,c=u.getView();c.getConstraints().rotation!==ed&&(this.anchor_=u.getCoordinateFromPixelInternal(u.getEventPixel(ld(this.targetPointers))),this.rotating_&&(u.render(),c.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class Xx extends $o{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Da),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],o=this.targetPointers[1],l=i.clientX-o.clientX,u=i.clientY-o.clientY,c=Math.sqrt(l*l+u*u);this.lastDistance_!==void 0&&(t=this.lastDistance_/c),this.lastDistance_=c;const d=e.map,g=d.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=d.getCoordinateFromPixelInternal(d.getEventPixel(ld(this.targetPointers))),d.render(),g.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),o=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,o),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function Bx(r){r=r||{};const e=new Wn,t=new gx(-.005,.05,100);return(r.altShiftDragRotate!==void 0?r.altShiftDragRotate:!0)&&e.push(new Fx),(r.doubleClickZoom!==void 0?r.doubleClickZoom:!0)&&e.push(new Ix({delta:r.zoomDelta,duration:r.zoomDuration})),(r.dragPan!==void 0?r.dragPan:!0)&&e.push(new Ox({onFocusOnly:r.onFocusOnly,kinetic:t})),(r.pinchRotate!==void 0?r.pinchRotate:!0)&&e.push(new jx),(r.pinchZoom!==void 0?r.pinchZoom:!0)&&e.push(new Xx({duration:r.zoomDuration})),(r.keyboard!==void 0?r.keyboard:!0)&&(e.push(new Ux),e.push(new bx({delta:r.zoomDelta,duration:r.zoomDuration}))),(r.mouseWheelZoom!==void 0?r.mouseWheelZoom:!0)&&e.push(new Wx({onFocusOnly:r.onFocusOnly,duration:r.zoomDuration})),(r.shiftDragZoom!==void 0?r.shiftDragZoom:!0)&&e.push(new Gx({duration:r.zoomDuration})),e}function C_(r){if(r instanceof Ha){r.setMapInternal(null);return}r instanceof Ms&&r.getLayers().forEach(C_)}function R_(r,e){if(r instanceof Ha){r.setMapInternal(e);return}if(r instanceof Ms){const t=r.getLayers().getArray();for(let i=0,o=t.length;i<o;++i)R_(t[i],e)}}let Yx=class extends Xn{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=Vx(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:Xm,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Ln(),this.pixelToCoordinateTransform_=Ln(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||Rx(),this.interactions=t.interactions||Bx({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new vx(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(xt.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(xt.VIEW,this.handleViewChanged_),this.addChangeListener(xt.SIZE,this.handleSizeChanged_),this.addChangeListener(xt.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof Un)&&e.view.then(function(o){i.setView(new Un(o))}),this.controls.addEventListener(zt.ADD,o=>{o.element.setMap(this)}),this.controls.addEventListener(zt.REMOVE,o=>{o.element.setMap(null)}),this.interactions.addEventListener(zt.ADD,o=>{o.element.setMap(this)}),this.interactions.addEventListener(zt.REMOVE,o=>{o.element.setMap(null)}),this.overlays_.addEventListener(zt.ADD,o=>{this.addOverlayInternal_(o.element)}),this.overlays_.addEventListener(zt.REMOVE,o=>{const l=o.element.getId();l!==void 0&&delete this.overlayIdIndex_[l.toString()],o.element.setMap(null)}),this.controls.forEach(o=>{o.setMap(this)}),this.interactions.forEach(o=>{o.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){R_(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const o=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const l=i.hitTolerance!==void 0?i.hitTolerance:0,u=i.layerFilter!==void 0?i.layerFilter:Io,c=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(o,this.frameState_,l,c,t,null,u,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(o){i.push(o)},t),i}getAllLayers(){const e=[];function t(i){i.forEach(function(o){o instanceof Ms?t(o.getLayers()):e.push(o)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const o=t.layerFilter!==void 0?t.layerFilter:Io,l=t.hitTolerance!==void 0?t.hitTolerance:0,u=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,l,u,o,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),o=this.getSize(),l=i.width/o[0],u=i.height/o[1],c="changedTouches"in e?e.changedTouches[0]:e;return[(c.clientX-i.left)/l,(c.clientY-i.top)/u]}getTarget(){return this.get(xt.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return dh(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?lt(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(xt.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Wn){t.setLayers(e);return}const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const o=e[t];if(!o.visible)continue;const l=o.layer.getRenderer();if(l&&!l.ready)return!0;const u=o.layer.getSource();if(u&&u.loading)return!0}return!1}getPixelFromCoordinate(e){const t=ri(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?lt(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(xt.SIZE)}getView(){return this.get(xt.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,o){return xx(this.frameState_,e,t,i,o)}handleBrowserEvent(e,t){t=t||e.type;const i=new Wi(t,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if(i===_h.POINTERDOWN||i===Ee.WHEEL||i===Ee.KEYDOWN){const o=this.getOwnerDocument(),l=this.viewport_.getRootNode?this.viewport_.getRootNode():o,u=t.target,c=l instanceof ShadowRoot?l.host===u?l.host.ownerDocument:l:l===o?o.documentElement:l;if(this.overlayContainerStopEvent_.contains(u)||!c.contains(u))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const o=this.getInteractions().getArray().slice();for(let l=o.length-1;l>=0;l--){const u=o[l];if(u.getMap()!==this||!u.getActive()||!this.getTargetElement())continue;if(!u.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let o=this.maxTilesLoading_,l=o;if(e){const u=e.viewHints;if(u[wt.ANIMATING]||u[wt.INTERACTING]){const c=Date.now()-e.time>8;o=c?0:8,l=c?0:2}}t.getTilesLoading()<o&&(t.reprioritize(),t.loadMoreTiles(o,l))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(cn.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(cn.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new cs(ji.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new cs(ji.LOADSTART,this,e))));const i=this.postRenderFunctions_;if(e)for(let o=0,l=i.length;o<l;++o)i[o](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,o=this.targetChangeHandlerKeys_.length;i<o;++i)Ue(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Ee.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Ee.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new _x(this)),this.mapBrowserEventHandler_=new yx(this,this.moveTolerance_);for(const l in Ve)this.mapBrowserEventHandler_.addEventListener(Ve[l],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Ee.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Ee.WHEEL,this.boundHandleBrowserEvent_,Ym?{passive:!1}:!1);let i;if(this.keyboardEventTarget_)i=this.keyboardEventTarget_;else{const l=t.getRootNode();i=l instanceof ShadowRoot?l.host:t}this.targetChangeHandlerKeys_=[Ie(i,Ee.KEYDOWN,this.handleBrowserEvent,this),Ie(i,Ee.KEYPRESS,this.handleBrowserEvent,this)];const o=t.getRootNode();o instanceof ShadowRoot&&this.resizeObserver_.observe(o.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Ue(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Ue(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Ie(e,xs.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Ie(e,Ee.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Ue),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Xi("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Ie(e,xs.PROPERTYCHANGE,this.render,this),Ie(e,Ee.CHANGE,this.render,this),Ie(e,"addlayer",this.handleLayerAdd_,this),Ie(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const o=e[t].layer;o.hasRenderer()&&o.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){C_(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),o=this.frameState_;let l=null;if(t!==void 0&&Tp(t)&&i&&i.isDef()){const u=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),c=i.getState();if(l={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:lh(c.center,c.resolution,c.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:c,viewHints:u,wantedTiles:{},mapId:Le(this),renderTargets:{}},c.nextCenter&&c.nextResolution){const d=isNaN(c.nextRotation)?c.rotation:c.nextRotation;l.nextExtent=lh(c.nextCenter,c.nextResolution,d,t)}}this.frameState_=l,this.renderer_.renderFrame(l),l&&(l.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,l.postRenderFunctions),o&&(!this.previousExtent_||!Wa(this.previousExtent_)&&!Lo(l.extent,this.previousExtent_))&&(this.dispatchEvent(new cs(ji.MOVESTART,this,o)),this.previousExtent_=za(this.previousExtent_)),this.previousExtent_&&!l.viewHints[wt.ANIMATING]&&!l.viewHints[wt.INTERACTING]&&!Lo(l.extent,this.previousExtent_)&&(this.dispatchEvent(new cs(ji.MOVEEND,this,l)),dm(l.extent,this.previousExtent_))),this.dispatchEvent(new cs(ji.POSTRENDER,this,l)),this.renderComplete_=(this.hasListener(ji.LOADSTART)||this.hasListener(ji.LOADEND)||this.hasListener(cn.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Xi("removelayer",t)),this.set(xt.LAYERGROUP,e)}setSize(e){this.set(xt.SIZE,e)}setTarget(e){this.set(xt.TARGET,e)}setView(e){if(!e||e instanceof Un){this.set(xt.VIEW,e);return}this.set(xt.VIEW,new Un);const t=this;e.then(function(i){t.setView(new Un(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){const o=getComputedStyle(e),l=e.offsetWidth-parseFloat(o.borderLeftWidth)-parseFloat(o.paddingLeft)-parseFloat(o.paddingRight)-parseFloat(o.borderRightWidth),u=e.offsetHeight-parseFloat(o.borderTopWidth)-parseFloat(o.paddingTop)-parseFloat(o.paddingBottom)-parseFloat(o.borderBottomWidth);!isNaN(l)&&!isNaN(u)&&(t=[Math.max(0,l),Math.max(0,u)],!Tp(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&Im("No map visible because the map container's width or height are 0."))}const i=this.getSize();t&&(!i||!Qi(t,i))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function Vx(r){let e=null;r.keyboardEventTarget!==void 0&&(e=typeof r.keyboardEventTarget=="string"?document.getElementById(r.keyboardEventTarget):r.keyboardEventTarget);const t={},i=r.layers&&typeof r.layers.getLayers=="function"?r.layers:new Ms({layers:r.layers});t[xt.LAYERGROUP]=i,t[xt.TARGET]=r.target,t[xt.VIEW]=r.view instanceof Un?r.view:new Un;let o;r.controls!==void 0&&(Array.isArray(r.controls)?o=new Wn(r.controls.slice()):(Me(typeof r.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),o=r.controls));let l;r.interactions!==void 0&&(Array.isArray(r.interactions)?l=new Wn(r.interactions.slice()):(Me(typeof r.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),l=r.interactions));let u;return r.overlays!==void 0?Array.isArray(r.overlays)?u=new Wn(r.overlays.slice()):(Me(typeof r.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),u=r.overlays):u=new Wn,{controls:o,interactions:l,keyboardEventTarget:e,overlays:u,values:t}}class Kx{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof ka&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return Me(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return Me(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){Me(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}function Ma(r,e,t,i){return i!==void 0?(i[0]=r,i[1]=e,i[2]=t,i):[r,e,t]}function Zx(r,e,t){return r+"/"+e+"/"+t}function Hx(r){return $x(r[0],r[1],r[2])}function $x(r,e,t){return(e<<r)+t}function qx(r,e){const t=r[0],i=r[1],o=r[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const l=e.getFullTileRange(t);return l?l.containsXY(i,o):!0}class ad{constructor(e,t,i,o){this.minX=e,this.maxX=t,this.minY=i,this.maxY=o}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function rs(r,e,t,i,o){return o!==void 0?(o.minX=r,o.maxX=e,o.minY=t,o.maxY=i,o):new ad(r,e,t,i)}const T_=.5,Qx=10,nm=.25;class I_{constructor(e,t,i,o,l,u,c){this.sourceProj_=e,this.targetProj_=t;let d={};const g=c?F1(O=>lt(c,Uh(O,this.targetProj_,this.sourceProj_))):xa(this.targetProj_,this.sourceProj_);this.transformInv_=function(O){const A=O[0]+"/"+O[1];return d[A]||(d[A]=g(O)),d[A]},this.maxSourceExtent_=o,this.errorThresholdSquared_=l*l,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!o&&!!this.sourceProj_.getExtent()&&Ae(o)>=Ae(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Ae(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Ae(this.targetProj_.getExtent()):null;const p=hi(i),_=ba(i),y=Ua(i),x=Ga(i),v=this.transformInv_(p),w=this.transformInv_(_),S=this.transformInv_(y),I=this.transformInv_(x),T=Qx+(u?Math.max(0,Math.ceil(Math.log2(Ao(i)/(u*u*256*256)))):0);if(this.addQuad_(p,_,y,x,v,w,S,I,T),this.wrapsXInSource_){let O=1/0;this.triangles_.forEach(function(A,P,j){O=Math.min(O,A.source[0][0],A.source[1][0],A.source[2][0])}),this.triangles_.forEach(A=>{if(Math.max(A.source[0][0],A.source[1][0],A.source[2][0])-O>this.sourceWorldWidth_/2){const P=[[A.source[0][0],A.source[0][1]],[A.source[1][0],A.source[1][1]],[A.source[2][0],A.source[2][1]]];P[0][0]-O>this.sourceWorldWidth_/2&&(P[0][0]-=this.sourceWorldWidth_),P[1][0]-O>this.sourceWorldWidth_/2&&(P[1][0]-=this.sourceWorldWidth_),P[2][0]-O>this.sourceWorldWidth_/2&&(P[2][0]-=this.sourceWorldWidth_);const j=Math.min(P[0][0],P[1][0],P[2][0]);Math.max(P[0][0],P[1][0],P[2][0])-j<this.sourceWorldWidth_/2&&(A.source=P)}})}d={}}addTriangle_(e,t,i,o,l,u){this.triangles_.push({source:[o,l,u],target:[e,t,i]})}addQuad_(e,t,i,o,l,u,c,d,g){const p=ip([l,u,c,d]),_=this.sourceWorldWidth_?Ae(p)/this.sourceWorldWidth_:null,y=this.sourceWorldWidth_,x=this.sourceProj_.canWrapX()&&_>.5&&_<1;let v=!1;if(g>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const S=ip([e,t,i,o]);v=Ae(S)/this.targetWorldWidth_>nm||v}!x&&this.sourceProj_.isGlobal()&&_&&(v=_>nm||v)}if(!v&&this.maxSourceExtent_&&isFinite(p[0])&&isFinite(p[1])&&isFinite(p[2])&&isFinite(p[3])&&!bt(p,this.maxSourceExtent_))return;let w=0;if(!v&&(!isFinite(l[0])||!isFinite(l[1])||!isFinite(u[0])||!isFinite(u[1])||!isFinite(c[0])||!isFinite(c[1])||!isFinite(d[0])||!isFinite(d[1]))){if(g>0)v=!0;else if(w=(!isFinite(l[0])||!isFinite(l[1])?8:0)+(!isFinite(u[0])||!isFinite(u[1])?4:0)+(!isFinite(c[0])||!isFinite(c[1])?2:0)+(!isFinite(d[0])||!isFinite(d[1])?1:0),w!=1&&w!=2&&w!=4&&w!=8)return}if(g>0){if(!v){const S=[(e[0]+i[0])/2,(e[1]+i[1])/2],I=this.transformInv_(S);let T;x?T=(_s(l[0],y)+_s(c[0],y))/2-_s(I[0],y):T=(l[0]+c[0])/2-I[0];const O=(l[1]+c[1])/2-I[1];v=T*T+O*O>this.errorThresholdSquared_}if(v){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const S=[(t[0]+i[0])/2,(t[1]+i[1])/2],I=this.transformInv_(S),T=[(o[0]+e[0])/2,(o[1]+e[1])/2],O=this.transformInv_(T);this.addQuad_(e,t,S,T,l,u,I,O,g-1),this.addQuad_(T,S,i,o,O,I,c,d,g-1)}else{const S=[(e[0]+t[0])/2,(e[1]+t[1])/2],I=this.transformInv_(S),T=[(i[0]+o[0])/2,(i[1]+o[1])/2],O=this.transformInv_(T);this.addQuad_(e,S,T,o,l,I,O,d,g-1),this.addQuad_(S,t,i,T,I,u,c,O,g-1)}return}}if(x){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}w&11||this.addTriangle_(e,i,o,l,c,d),w&14||this.addTriangle_(e,i,t,l,c,u),w&&(w&13||this.addTriangle_(t,o,e,u,d,l),w&7||this.addTriangle_(t,o,i,u,d,c))}calculateSourceExtent(){const e=Xt();return this.triangles_.forEach(function(t,i,o){const l=t.source;To(e,l[0]),To(e,l[1]),To(e,l[2])}),e}getTriangles(){return this.triangles_}}let th;const Es=[];function im(r,e,t,i,o){r.beginPath(),r.moveTo(0,0),r.lineTo(e,t),r.lineTo(i,o),r.closePath(),r.save(),r.clip(),r.fillRect(0,0,Math.max(e,i)+1,Math.max(t,o)),r.restore()}function nh(r,e){return Math.abs(r[e*4]-210)>2||Math.abs(r[e*4+3]-.75*255)>2}function Jx(){if(th===void 0){const r=Je(6,6,Es);r.globalCompositeOperation="lighter",r.fillStyle="rgba(210, 0, 0, 0.75)",im(r,4,5,4,0),im(r,4,5,0,5);const e=r.getImageData(0,0,3,3).data;th=nh(e,0)||nh(e,4)||nh(e,8),Ba(r),Es.push(r.canvas)}return th}function rm(r,e,t,i){const o=Uh(t,e,r);let l=fp(e,i,t);const u=e.getMetersPerUnit();u!==void 0&&(l*=u);const c=r.getMetersPerUnit();c!==void 0&&(l/=c);const d=r.getExtent();if(!d||Cs(d,o)){const g=fp(r,l,o)/l;isFinite(g)&&g>0&&(l/=g)}return l}function L_(r,e,t,i){const o=$i(t);let l=rm(r,e,o,i);return(!isFinite(l)||l<=0)&&_m(t,function(u){return l=rm(r,e,u,i),isFinite(l)&&l>0}),l}function ew(r,e,t,i,o,l,u,c,d,g,p,_,y,x){const v=Je(Math.round(t*r),Math.round(t*e),Es);if(_||(v.imageSmoothingEnabled=!1),d.length===0)return v.canvas;v.scale(t,t);function w(P){return Math.round(P*t)/t}v.globalCompositeOperation="lighter";const S=Xt();d.forEach(function(P,j,Z){pm(S,P.extent)});let I;const T=t/i,O=(_?1:1+Math.pow(2,-24))/T;I=Je(Math.round(Ae(S)*T),Math.round(at(S)*T),Es),_||(I.imageSmoothingEnabled=!1),d.forEach(function(P,j,Z){if(P.image.width>0&&P.image.height>0){if(P.clipExtent){I.save();const $=(P.clipExtent[0]-S[0])*T,te=-(P.clipExtent[3]-S[3])*T,J=Ae(P.clipExtent)*T,ee=at(P.clipExtent)*T;I.rect(_?$:Math.round($),_?te:Math.round(te),_?J:Math.round($+J)-Math.round($),_?ee:Math.round(te+ee)-Math.round(te)),I.clip()}const U=(P.extent[0]-S[0])*T,X=-(P.extent[3]-S[3])*T,B=Ae(P.extent)*T,ie=at(P.extent)*T;I.drawImage(P.image,g,g,P.image.width-2*g,P.image.height-2*g,_?U:Math.round(U),_?X:Math.round(X),_?B:Math.round(U+B)-Math.round(U),_?ie:Math.round(X+ie)-Math.round(X)),P.clipExtent&&I.restore()}});const A=hi(u);return c.getTriangles().forEach(function(P,j,Z){const U=P.source,X=P.target;let B=U[0][0],ie=U[0][1],$=U[1][0],te=U[1][1],J=U[2][0],ee=U[2][1];const ne=w((X[0][0]-A[0])/l),K=w(-(X[0][1]-A[1])/l),b=w((X[1][0]-A[0])/l),q=w(-(X[1][1]-A[1])/l),G=w((X[2][0]-A[0])/l),R=w(-(X[2][1]-A[1])/l),N=B,re=ie;B=0,ie=0,$-=N,te-=re,J-=N,ee-=re;const z=[[$,te,0,0,b-ne],[J,ee,0,0,G-ne],[0,0,$,te,q-K],[0,0,J,ee,R-K]],ue=g1(z);if(!ue)return;if(v.save(),v.beginPath(),Jx()||!_){v.moveTo(b,q);const me=4,ve=ne-b,Ce=K-q;for(let Ne=0;Ne<me;Ne++)v.lineTo(b+w((Ne+1)*ve/me),q+w(Ne*Ce/(me-1))),Ne!=me-1&&v.lineTo(b+w((Ne+1)*ve/me),q+w((Ne+1)*Ce/(me-1)));v.lineTo(G,R)}else v.moveTo(b,q),v.lineTo(ne,K),v.lineTo(G,R);v.clip(),v.transform(ue[0],ue[2],ue[1],ue[3],ne,K),v.translate(S[0]-N,S[3]-re);let he;if(I)he=I.canvas,v.scale(O,-O);else{const me=d[0],ve=me.extent;he=me.image,v.scale(Ae(ve)/he.width,-at(ve)/he.height)}v.drawImage(he,0,0),v.restore()}),I&&(Ba(I),Es.push(I.canvas)),p&&(v.save(),v.globalCompositeOperation="source-over",v.strokeStyle="black",v.lineWidth=1,c.getTriangles().forEach(function(P,j,Z){const U=P.target,X=(U[0][0]-A[0])/l,B=-(U[0][1]-A[1])/l,ie=(U[1][0]-A[0])/l,$=-(U[1][1]-A[1])/l,te=(U[2][0]-A[0])/l,J=-(U[2][1]-A[1])/l;v.beginPath(),v.moveTo(ie,$),v.lineTo(X,B),v.lineTo(te,J),v.closePath(),v.stroke()}),v.restore()),v.canvas}class Eh extends rd{constructor(e,t,i,o,l,u,c,d,g,p,_,y){super(l,oe.IDLE,y),this.renderEdges_=_!==void 0?_:!1,this.pixelRatio_=c,this.gutter_=d,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=o,this.wrappedTileCoord_=u||l,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const x=o.getTileCoordExtent(this.wrappedTileCoord_),v=this.targetTileGrid_.getExtent();let w=this.sourceTileGrid_.getExtent();const S=v?In(x,v):x;if(Ao(S)===0){this.state=oe.EMPTY;return}const I=e.getExtent();I&&(w?w=In(w,I):w=I);const T=o.getResolution(this.wrappedTileCoord_[0]),O=L_(e,i,S,T);if(!isFinite(O)||O<=0){this.state=oe.EMPTY;return}const A=p!==void 0?p:T_;if(this.triangulation_=new I_(e,i,S,w,O*A,T),this.triangulation_.getTriangles().length===0){this.state=oe.EMPTY;return}this.sourceZ_=t.getZForResolution(O);let P=this.triangulation_.calculateSourceExtent();if(w&&(e.canWrapX()?(P[1]=Ke(P[1],w[1],w[3]),P[3]=Ke(P[3],w[1],w[3])):P=In(P,w)),!Ao(P))this.state=oe.EMPTY;else{let j=0,Z=0;e.canWrapX()&&(j=Ae(I),Z=Math.floor((P[0]-I[0])/j)),Ah(P.slice(),e,!0).forEach(X=>{const B=t.getTileRangeForExtentAndZ(X,this.sourceZ_);for(let ie=B.minX;ie<=B.maxX;ie++)for(let $=B.minY;$<=B.maxY;$++){const te=g(this.sourceZ_,ie,$,c);if(te){const J=Z*j;this.sourceTiles_.push({tile:te,offset:J})}}++Z}),this.sourceTiles_.length===0&&(this.state=oe.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var o;const i=t.tile;if(i&&i.getState()==oe.LOADED){const l=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);l[0]+=t.offset,l[2]+=t.offset;const u=(o=this.clipExtent_)==null?void 0:o.slice();u&&(u[0]+=t.offset,u[2]+=t.offset),e.push({extent:l,clipExtent:u,image:i.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=oe.ERROR;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),o=typeof i=="number"?i:i[0],l=typeof i=="number"?i:i[1],u=this.targetTileGrid_.getResolution(t),c=this.sourceTileGrid_.getResolution(this.sourceZ_),d=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=ew(o,l,this.pixelRatio_,c,this.sourceTileGrid_.getExtent(),u,d,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=oe.LOADED}this.changed()}load(){if(this.state==oe.IDLE){this.state=oe.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const i=t.getState();if(i==oe.IDLE||i==oe.LOADING){e++;const o=Ie(t,Ee.CHANGE,l=>{const u=t.getState();(u==oe.LOADED||u==oe.ERROR||u==oe.EMPTY)&&(Ue(o),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(o)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},i,o){t.getState()==oe.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Ue),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Ba(this.canvas_.getContext("2d")),Es.push(this.canvas_),this.canvas_=null),super.release()}}const ih={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},ss=[0,0,0],bi=5;class A_{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Me(Vy(this.resolutions_,(o,l)=>l-o),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let o=0,l=this.resolutions_.length-1;o<l;++o)if(!t)t=this.resolutions_[o]/this.resolutions_[o+1];else if(this.resolutions_[o]/this.resolutions_[o+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Me(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=hi(i)),Me(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Me(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:qh,Me(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((o,l)=>{const u=new ad(Math.min(0,o[0]),Math.max(o[0]-1,-1),Math.min(0,o[1]),Math.max(o[1]-1,-1));if(i){const c=this.getTileRangeForExtentAndZ(i,l);u.minX=Math.max(c.minX,u.minX),u.maxX=Math.min(c.maxX,u.maxX),u.minY=Math.max(c.minY,u.minY),u.maxY=Math.min(c.maxY,u.maxY)}return u}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const o=this.getTileRangeForExtentAndZ(e,t);for(let l=o.minX,u=o.maxX;l<=u;++l)for(let c=o.minY,d=o.maxY;c<=d;++c)i([t,l,c])}forEachTileCoordParentTileRange(e,t,i,o){let l,u,c,d=null,g=e[0]-1;for(this.zoomFactor_===2?(u=e[1],c=e[2]):d=this.getTileCoordExtent(e,o);g>=this.minZoom;){if(u!==void 0&&c!==void 0?(u=Math.floor(u/2),c=Math.floor(c/2),l=rs(u,u,c,c,i)):l=this.getTileRangeForExtentAndZ(d,g,i),t(g,l))return!0;--g}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const l=e[1]*2,u=e[2]*2;return rs(l,l+1,u,u+1,t)}const o=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const o=e[0],l=e[1],u=e[2];if(t===o)return rs(l,u,l,u,i);if(this.zoomFactor_){const d=Math.pow(this.zoomFactor_,t-o),g=Math.floor(l*d),p=Math.floor(u*d);if(t<o)return rs(g,g,p,p,i);const _=Math.floor(d*(l+1))-1,y=Math.floor(d*(u+1))-1;return rs(g,_,p,y,i)}const c=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(c,t,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,ss);const o=ss[1],l=ss[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,ss);const u=ss[1],c=ss[2];return rs(o,u,l,c,i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),o=jt(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*o[0]*i,t[1]-(e[2]+.5)*o[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),o=this.getResolution(e[0]),l=jt(this.getTileSize(e[0]),this.tmpSize_),u=i[0]+e[1]*l[0]*o,c=i[1]-(e[2]+1)*l[1]*o,d=u+l[0]*o,g=c+l[1]*o;return Hi(u,c,d,g,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,o,l){const u=this.getZForResolution(i),c=i/this.getResolution(u),d=this.getOrigin(u),g=jt(this.getTileSize(u),this.tmpSize_);let p=c*(e-d[0])/i/g[0],_=c*(d[1]-t)/i/g[1];return o?(p=ua(p,bi)-1,_=ua(_,bi)-1):(p=aa(p,bi),_=aa(_,bi)),Ma(u,p,_,l)}getTileCoordForXYAndZ_(e,t,i,o,l){const u=this.getOrigin(i),c=this.getResolution(i),d=jt(this.getTileSize(i),this.tmpSize_);let g=(e-u[0])/c/d[0],p=(u[1]-t)/c/d[1];return o?(g=ua(g,bi)-1,p=ua(p,bi)-1):(g=aa(g,bi),p=aa(p,bi)),Ma(i,g,p,l)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const i=Rh(this.resolutions_,e,t||0);return Ke(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return Um(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let o=this.minZoom;o<t;++o)i[o]=this.getTileRangeForExtentAndZ(e,o);this.fullTileRanges_=i}}function M_(r){let e=r.getDefaultTileGrid();return e||(e=rw(r),r.setDefaultTileGrid(e)),e}function tw(r,e,t){const i=e[0],o=r.getTileCoordCenter(e),l=ud(t);if(!Cs(l,o)){const u=Ae(l),c=Math.ceil((l[0]-o[0])/u);return o[0]+=u*c,r.getTileCoordForCoordAndZ(o,i)}return e}function nw(r,e,t,i){i=i!==void 0?i:"top-left";const o=P_(r,e,t);return new A_({extent:r,origin:t1(r,i),resolutions:o,tileSize:t})}function iw(r){const e=r,t=e.extent||Bt("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:P_(t,e.maxZoom,e.tileSize,e.maxResolution)};return new A_(i)}function P_(r,e,t,i){e=e!==void 0?e:LE,t=jt(t!==void 0?t:qh);const o=at(r),l=Ae(r);i=i>0?i:Math.max(l/t[0],o/t[1]);const u=e+1,c=new Array(u);for(let d=0;d<u;++d)c[d]=i/Math.pow(2,d);return c}function rw(r,e,t,i){const o=ud(r);return nw(o,e,t,i)}function ud(r){r=Bt(r);let e=r.getExtent();if(!e){const t=180*Mh.degrees/r.getMetersPerUnit();e=Hi(-t,-t,t,t)}return e}class sw extends __{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&jt(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Le(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,o,l){return ke()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:M_(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const o=this.getTileGridForProjection(i),l=this.getTilePixelRatio(t),u=jt(o.getTileSize(e),this.tmpSize);return l==1?u:yE(u,l,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const i=t!==void 0?t:this.getProjection(),o=t!==void 0?this.getTileGridForProjection(i):this.tileGrid||this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(e=tw(o,e,i)),qx(e,o)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class ow extends di{constructor(e,t){super(e),this.tile=t}}const lw=/\{z\}/g,aw=/\{x\}/g,uw=/\{y\}/g,cw=/\{-y\}/g;function hw(r,e,t,i,o){return r.replace(lw,e.toString()).replace(aw,t.toString()).replace(uw,i.toString()).replace(cw,function(){if(o===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(o-i).toString()})}function dw(r){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(r);if(t){const i=t[1].charCodeAt(0),o=t[2].charCodeAt(0);let l;for(l=i;l<=o;++l)e.push(r.replace(t[0],String.fromCharCode(l)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(r),t){const i=parseInt(t[2],10);for(let o=parseInt(t[1],10);o<=i;o++)e.push(r.replace(t[0],o.toString()));return e}return e.push(r),e}function fw(r,e){return function(t,i,o){if(!t)return;let l;const u=t[0];if(e){const c=e.getFullTileRange(u);c&&(l=c.getHeight()-1)}return hw(r,u,t[1],t[2],l)}}function gw(r,e){const t=r.length,i=new Array(t);for(let o=0;o<t;++o)i[o]=fw(r[o],e);return pw(i)}function pw(r){return r.length===1?r[0]:function(e,t,i){if(!e)return;const o=Hx(e),l=_s(o,r.length);return r[l](e,t,i)}}class cd extends sw{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===cd.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=Le(t),o=t.getState();let l;o==oe.LOADING?(this.tileLoadingKeys_[i]=!0,l=ih.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],l=o==oe.ERROR?ih.TILELOADERROR:o==oe.LOADED?ih.TILELOADEND:void 0),l!=null&&this.dispatchEvent(new ow(l,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=dw(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(gw(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}}class mw extends cd{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:_w,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:E_,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!bc(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||bc(t,e)))return this.tileGrid;const i=Le(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=M_(e)),this.tileGridForProjection[i]}createTile_(e,t,i,o,l,u){const c=[e,t,i],d=this.getTileCoordForTileUrlFunction(c,l),g=d?this.tileUrlFunction(d,o,l):void 0,p=new this.tileClass(c,g!==void 0?oe.IDLE:oe.EMPTY,g!==void 0?g:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return p.key=u,p.addEventListener(Ee.CHANGE,this.handleTileChange.bind(this)),p}getTile(e,t,i,o,l){const u=this.getProjection();if(!u||!l||bc(u,l))return this.getTileInternal(e,t,i,o,u||l);const c=[e,t,i],d=this.getKey(),g=this.getTileGridForProjection(u),p=this.getTileGridForProjection(l),_=this.getTileCoordForTileUrlFunction(c,l),y=new Eh(u,g,l,p,c,_,this.getTilePixelRatio(o),this.getGutter(),(x,v,w,S)=>this.getTileInternal(x,v,w,S,u),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return y.key=d,y}getTileInternal(e,t,i,o,l){const u=this.getKey();return this.createTile_(e,t,i,o,l,u)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const i=Bt(e);if(i){const o=Le(i);o in this.tileGridForProjection||(this.tileGridForProjection[o]=t)}}}function _w(r,e){r.getImage().src=e}class yw extends mw{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",i=e.tileGrid!==void 0?e.tileGrid:iw({extent:ud(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}class Ew extends y_{constructor(e){e=e||{},super({attributions:e.attributions,wrapX:e.wrapX}),this.resolution=void 0,this.distance=e.distance!==void 0?e.distance:20,this.minDistance=e.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=e.geometryFunction||function(t){const i=t.getGeometry();return Me(!i||i.getType()==="Point","The default `geometryFunction` can only handle `Point` or null geometries"),i},this.createCustomCluster_=e.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(e.source||null)}clear(e){this.features.length=0,super.clear(e)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(e,t,i){var o;(o=this.source)==null||o.loadFeatures(e,t,i),t!==this.resolution&&(this.resolution=t,this.refresh())}setDistance(e){this.updateDistance(e,this.minDistance)}setMinDistance(e){this.updateDistance(this.distance,e)}getMinDistance(){return this.minDistance}setSource(e){this.source&&this.source.removeEventListener(Ee.CHANGE,this.boundRefresh_),this.source=e,e&&e.addEventListener(Ee.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(e,t){const i=e===0?0:Math.min(t,e)/e,o=e!==this.distance||this.interpolationRatio!==i;this.distance=e,this.minDistance=t,this.interpolationRatio=i,o&&this.refresh()}cluster(){if(this.resolution===void 0||!this.source)return;const e=Xt(),t=this.distance*this.resolution,i=this.source.getFeatures(),o={};for(let l=0,u=i.length;l<u;l++){const c=i[l];if(!(Le(c)in o)){const d=this.geometryFunction(c);if(d){const g=d.getCoordinates();Ih(g,e),Na(e,t,e);const p=this.source.getFeaturesInExtent(e).filter(function(_){const y=Le(_);return y in o?!1:(o[y]=!0,!0)});this.features.push(this.createCluster(p,e))}}}}createCluster(e,t){const i=[0,0];for(let c=e.length-1;c>=0;--c){const d=this.geometryFunction(e[c]);d?Em(i,d.getCoordinates()):e.splice(c,1)}vm(i,1/e.length);const o=$i(t),l=this.interpolationRatio,u=new Xo([i[0]*(1-l)+o[0]*l,i[1]*(1-l)+o[1]*l]);return this.createCustomCluster_?this.createCustomCluster_(u,e):new Fa({geometry:u,features:e})}}function Pa(r){return r instanceof Image||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageBitmap?r:null}function vw(r){return r instanceof Uint8Array||r instanceof Uint8ClampedArray||r instanceof Float32Array||r instanceof DataView?r:null}const xw=new Error("disposed");let os=null;function ww(r){os||(os=Je(r.width,r.height,void 0,{willReadFrequently:!0}));const e=os.canvas,t=r.width;e.width!==t&&(e.width=t);const i=r.height;return e.height!==i&&(e.height=i),os.clearRect(0,0,t,i),os.drawImage(r,0,0),os.getImageData(0,0,t,i).data}const Sw=[256,256];class vh extends rd{constructor(e){const t=oe.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=Pa(this.data_);return e?[e.width,e.height]:Sw}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==oe.IDLE&&this.state!==oe.ERROR)return;this.state=oe.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=oe.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=oe.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(xw),this.controller_=null),super.disposeInternal()}}function Qa(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function xh(r,e,t,i,o,l,u){u=u??Qa();const c=1/(r-e),d=1/(t-i),g=1/(o-l);return u[0]=-2*c,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*d,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*g,u[11]=0,u[12]=(r+e)*c,u[13]=(i+t)*d,u[14]=(l+o)*g,u[15]=1,u}function sm(r,e,t,i,o){return o=o??Qa(),o[0]=r[0]*e,o[1]=r[1]*e,o[2]=r[2]*e,o[3]=r[3]*e,o[4]=r[4]*t,o[5]=r[5]*t,o[6]=r[6]*t,o[7]=r[7]*t,o[8]=r[8]*i,o[9]=r[9]*i,o[10]=r[10]*i,o[11]=r[11]*i,o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o}function Cw(r,e,t,i,o){o=o??Qa();let l,u,c,d,g,p,_,y,x,v,w,S;return r===o?(o[12]=r[0]*e+r[4]*t+r[8]*i+r[12],o[13]=r[1]*e+r[5]*t+r[9]*i+r[13],o[14]=r[2]*e+r[6]*t+r[10]*i+r[14],o[15]=r[3]*e+r[7]*t+r[11]*i+r[15]):(l=r[0],u=r[1],c=r[2],d=r[3],g=r[4],p=r[5],_=r[6],y=r[7],x=r[8],v=r[9],w=r[10],S=r[11],o[0]=l,o[1]=u,o[2]=c,o[3]=d,o[4]=g,o[5]=p,o[6]=_,o[7]=y,o[8]=x,o[9]=v,o[10]=w,o[11]=S,o[12]=l*e+g*t+x*i+r[12],o[13]=u*e+p*t+v*i+r[13],o[14]=c*e+_*t+w*i+r[14],o[15]=d*e+y*t+S*i+r[15]),o}function Rw(r,e,t,i){return i=i??Qa(),i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=r,i[13]=e,i[14]=t,i[15]=1,i}const Tw=`
  attribute vec4 a_position;
  attribute vec4 a_texcoord;

  uniform mat4 u_matrix;
  uniform mat4 u_textureMatrix;

  varying vec2 v_texcoord;

  void main() {
    gl_Position = u_matrix * a_position;
    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;
    v_texcoord = texcoord;
  }
`,Iw=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (
      v_texcoord.x < 0.0 ||
      v_texcoord.y < 0.0 ||
      v_texcoord.x > 1.0 ||
      v_texcoord.y > 1.0
    ) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;class Lw{constructor(e){this.gl_=e,this.program_=wh(e,Iw,Tw),this.positionLocation=e.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=e.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=e.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=e.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=e.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.positions),e.STATIC_DRAW),this.texcoordBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.texcoords),e.STATIC_DRAW)}drawImage(e,t,i,o,l,u,c,d,g,p,_,y,x){const v=this.gl_;d===void 0&&(d=o),g===void 0&&(g=l),u===void 0&&(u=t),c===void 0&&(c=i),p===void 0&&(p=u),_===void 0&&(_=c),y===void 0&&(y=v.canvas.width),x===void 0&&(x=v.canvas.height),v.bindTexture(v.TEXTURE_2D,e),v.useProgram(this.program_),v.bindBuffer(v.ARRAY_BUFFER,this.positionBuffer),v.enableVertexAttribArray(this.positionLocation),v.vertexAttribPointer(this.positionLocation,2,v.FLOAT,!1,0,0),v.bindBuffer(v.ARRAY_BUFFER,this.texcoordBuffer),v.enableVertexAttribArray(this.texcoordLocation),v.vertexAttribPointer(this.texcoordLocation,2,v.FLOAT,!1,0,0);let w=xh(0,y,0,x,-1,1);w=Cw(w,d,g,0),w=sm(w,p,_,1),v.uniformMatrix4fv(this.matrixLocation,!1,w);let S=Rw(o/t,l/i,0);S=sm(S,u/t,c/i,1),v.uniformMatrix4fv(this.textureMatrixLocation,!1,S),v.uniform1i(this.textureLocation,0),v.drawArrays(v.TRIANGLES,0,this.positions.length/2)}}function om(r,e,t){const i=r.createShader(e);if(i===null)throw new Error("Shader compilation failed");if(r.shaderSource(i,t),r.compileShader(i),!r.getShaderParameter(i,r.COMPILE_STATUS)){const o=r.getShaderInfoLog(i);throw o===null?new Error("Shader info log creation failed"):new Error(o)}return i}function wh(r,e,t){const i=r.createProgram(),o=om(r,r.VERTEX_SHADER,t),l=om(r,r.FRAGMENT_SHADER,e);if(i===null)throw new Error("Program creation failed");if(r.attachShader(i,o),r.attachShader(i,l),r.linkProgram(i),!r.getProgramParameter(i,r.LINK_STATUS))throw r.getProgramInfoLog(i)===null?new Error("Program info log creation failed"):new Error;return i}const Aw=`
  attribute vec4 a_position;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
  }
`,Mw=`
  precision mediump float;

  uniform vec4 u_val;
  void main() {
     gl_FragColor = u_val;
  }
`,Pw=`
  attribute vec4 a_position;
  attribute vec2 a_texcoord;

  varying vec2 v_texcoord;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
     v_texcoord = a_texcoord;
  }
`,kw=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;function Dw(r,e,t,i){let o;return t.length?o=t.shift():Zh?o=new OffscreenCanvas(r||300,e||300):o=document.createElement("canvas"),r&&(o.width=r),e&&(o.height=e),o.getContext("webgl",i)}function Ow(r){const e=r.canvas;e.width=1,e.height=1,r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT|r.STENCIL_BUFFER_BIT)}const lm=[];function Fw(r,e,t,i,o,l,u,c,d,g,p,_,y,x){const v=Math.round(i*e),w=Math.round(i*t);r.canvas.width=v,r.canvas.height=w;let S,I;if(I=r.createTexture(),r.bindTexture(r.TEXTURE_2D,I),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),y?(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST)),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,v,w,0,r.RGBA,p,null),S=r.createFramebuffer(),r.bindFramebuffer(r.FRAMEBUFFER,S),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,I,0),S===null)throw new Error("Could not create framebuffer");if(I===null)throw new Error("Could not create texture");if(d.length===0)return{width:v,height:w,framebuffer:S,texture:I};const T=Xt();d.forEach(function(B,ie,$){pm(T,B.extent)});let O,A,P;const j=1/o;{if(O=r.createTexture(),I===null)throw new Error("Could not create texture");A=Math.round(Ae(T)*j),P=Math.round(at(T)*j);const B=r.getParameter(r.MAX_TEXTURE_SIZE),ie=Math.max(A,P),$=ie>B?B/ie:1,te=Math.round(A*$),J=Math.round(P*$);r.bindTexture(r.TEXTURE_2D,O),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),y?(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST)),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,te,J,0,r.RGBA,p,null);const ee=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,ee),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,O,0);const ne=new Lw(r);d.forEach(function(K,b,q){const G=(K.extent[0]-T[0])*j*$,R=-(K.extent[3]-T[3])*j*$,N=Ae(K.extent)*j*$,re=at(K.extent)*j*$;if(r.bindFramebuffer(r.FRAMEBUFFER,ee),r.viewport(0,0,te,J),K.clipExtent){const z=(K.clipExtent[0]-T[0])*j*$,ue=-(K.clipExtent[3]-T[3])*j*$,he=Ae(K.clipExtent)*j*$,me=at(K.clipExtent)*j*$;r.enable(r.SCISSOR_TEST),r.scissor(y?z:Math.round(z),y?ue:Math.round(ue),y?he:Math.round(z+he)-Math.round(z),y?me:Math.round(ue+me)-Math.round(ue))}ne.drawImage(K.texture,K.width,K.height,g,g,K.width-2*g,K.height-2*g,y?G:Math.round(G),y?R:Math.round(R),y?N:Math.round(G+N)-Math.round(G),y?re:Math.round(R+re)-Math.round(R),te,J),r.disable(r.SCISSOR_TEST)}),r.deleteFramebuffer(ee)}const Z=hi(u),U=hi(T),X=B=>{const ie=(B[0][0]-Z[0])/l*i,$=-(B[0][1]-Z[1])/l*i,te=(B[1][0]-Z[0])/l*i,J=-(B[1][1]-Z[1])/l*i,ee=(B[2][0]-Z[0])/l*i,ne=-(B[2][1]-Z[1])/l*i;return{u1:te,v1:J,u0:ie,v0:$,u2:ee,v2:ne}};r.bindFramebuffer(r.FRAMEBUFFER,S),r.viewport(0,0,v,w);{const B=[],ie=[],$=wh(r,kw,Pw);r.useProgram($);const te=r.getUniformLocation($,"u_texture");r.bindTexture(r.TEXTURE_2D,O),r.uniform1i(te,0),c.getTriangles().forEach(function(G,R,N){const re=G.source,z=G.target,{u1:ue,v1:he,u0:me,v0:ve,u2:Ce,v2:Ne}=X(z),St=(re[0][0]-U[0])/o/A,Mn=-(re[0][1]-U[1])/o/P,fn=(re[1][0]-U[0])/o/A,Bn=-(re[1][1]-U[1])/o/P,Pn=(re[2][0]-U[0])/o/A,$t=-(re[2][1]-U[1])/o/P;B.push(ue,he,me,ve,Ce,Ne),ie.push(fn,Bn,St,Mn,Pn,$t)});const J=xh(0,v,w,0,-1,1),ee=r.getUniformLocation($,"u_matrix");r.uniformMatrix4fv(ee,!1,J);const ne=r.getAttribLocation($,"a_position"),K=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,K),r.bufferData(r.ARRAY_BUFFER,new Float32Array(B),r.STATIC_DRAW),r.vertexAttribPointer(ne,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(ne);const b=r.getAttribLocation($,"a_texcoord"),q=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,q),r.bufferData(r.ARRAY_BUFFER,new Float32Array(ie),r.STATIC_DRAW),r.vertexAttribPointer(b,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(b),r.drawArrays(r.TRIANGLES,0,B.length/2)}if(_){const B=wh(r,Mw,Aw);r.useProgram(B);const ie=xh(0,v,w,0,-1,1),$=r.getUniformLocation(B,"u_matrix");r.uniformMatrix4fv($,!1,ie);const te=Array.isArray(_)?_:[0,0,0,255],J=r.getUniformLocation(B,"u_val");r.uniform4fv(J,te);const ee=r.getAttribLocation(B,"a_position"),ne=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,ne),r.vertexAttribPointer(ee,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(ee);const K=c.getTriangles().reduce(function(b,q){const G=q.target,{u1:R,v1:N,u0:re,v0:z,u2:ue,v2:he}=X(G);return b.concat([R,N,re,z,re,z,ue,he,ue,he,R,N])},[]);r.bufferData(r.ARRAY_BUFFER,new Float32Array(K),r.STATIC_DRAW),r.drawArrays(r.LINES,0,K.length/2)}return{width:v,height:w,framebuffer:S,texture:I}}class Nw extends vh{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:e.interpolate,transition:e.transition}),this.renderEdges_=e.renderEdges!==void 0?e.renderEdges:!1,this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const t=e.sourceProj,i=t.getExtent(),o=e.sourceTileGrid.getExtent();this.clipExtent_=t.canWrapX()?o?In(i,o):i:o;const l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),u=this.targetTileGrid_.getExtent();let c=this.sourceTileGrid_.getExtent();const d=u?In(l,u):l;if(Ao(d)===0){this.state=oe.EMPTY;return}i&&(c?c=In(c,i):c=i);const g=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),p=e.targetProj,_=L_(t,p,d,g);if(!isFinite(_)||_<=0){this.state=oe.EMPTY;return}const y=e.errorThreshold!==void 0?e.errorThreshold:T_;if(this.triangulation_=new I_(t,p,d,c,_*y,g,e.transformMatrix),this.triangulation_.getTriangles().length===0){this.state=oe.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(_);let x=this.triangulation_.calculateSourceExtent();if(c&&(t.canWrapX()?(x[1]=Ke(x[1],c[1],c[3]),x[3]=Ke(x[3],c[1],c[3])):x=In(x,c)),!Ao(x))this.state=oe.EMPTY;else{let v=0,w=0;t.canWrapX()&&(v=Ae(i),w=Math.floor((x[0]-i[0])/v)),Ah(x.slice(),t,!0).forEach(I=>{const T=this.sourceTileGrid_.getTileRangeForExtentAndZ(I,this.sourceZ_),O=e.getTileFunction;for(let A=T.minX;A<=T.maxX;A++)for(let P=T.minY;P<=T.maxY;P++){const j=O(this.sourceZ_,A,P,this.pixelRatio_);if(j){const Z=w*v;this.sourceTiles_.push({tile:j,offset:Z})}}++w}),this.sourceTiles_.length===0&&(this.state=oe.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];let t=!1;if(this.sourceTiles_.forEach(A=>{var R;const P=A.tile;if(!P||P.getState()!==oe.LOADED)return;const j=P.getSize(),Z=this.gutter_;let U;const X=vw(P.getData());X?U=X:(t=!0,U=ww(Pa(P.getData())));const B=[j[0]+2*Z,j[1]+2*Z],ie=U instanceof Float32Array,$=B[0]*B[1],te=ie?Float32Array:Uint8ClampedArray,J=new te(U.buffer),ee=te.BYTES_PER_ELEMENT,ne=ee*J.length/$,K=J.byteLength/B[1],b=Math.floor(K/ee/B[0]),q=this.sourceTileGrid_.getTileCoordExtent(P.tileCoord);q[0]+=A.offset,q[2]+=A.offset;const G=(R=this.clipExtent_)==null?void 0:R.slice();G&&(G[0]+=A.offset,G[2]+=A.offset),e.push({extent:q,clipExtent:G,data:J,dataType:te,bytesPerPixel:ne,pixelSize:B,bandCount:b})}),this.sourceTiles_.length=0,e.length===0){this.state=oe.ERROR,this.changed();return}const i=this.wrappedTileCoord_[0],o=this.targetTileGrid_.getTileSize(i),l=typeof o=="number"?o:o[0],u=typeof o=="number"?o:o[1],c=l*this.pixelRatio_,d=u*this.pixelRatio_,g=this.targetTileGrid_.getResolution(i),p=this.sourceTileGrid_.getResolution(this.sourceZ_),_=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),y=e[0].bandCount,x=new e[0].dataType(y*c*d),v=Dw(c,d,lm,{premultipliedAlpha:!1,antialias:!1});let w;const S=v.RGBA;let I;e[0].dataType==Float32Array?(I=v.FLOAT,v.getExtension("WEBGL_color_buffer_float"),v.getExtension("OES_texture_float"),v.getExtension("EXT_float_blend"),w=v.getExtension("OES_texture_float_linear")!==null&&this.interpolate):(I=v.UNSIGNED_BYTE,w=this.interpolate);const T=4,O=Math.ceil(y/T);for(let A=O-1;A>=0;--A){const P=[];for(let te=0,J=e.length;te<J;++te){const ee=e[te],ne=ee.pixelSize,K=ne[0],b=ne[1],q=new ee.dataType(T*K*b),G=ee.data;let R=A*T;for(let re=0,z=q.length;re<z;re+=T)q[re]=G[R],q[re+1]=G[R+1],q[re+2]=G[R+2],q[re+3]=G[R+3],R+=y;const N=v.createTexture();v.bindTexture(v.TEXTURE_2D,N),w?(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.LINEAR),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.LINEAR)):(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.NEAREST),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.NEAREST)),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.texImage2D(v.TEXTURE_2D,0,S,K,b,0,S,I,q),P.push({extent:ee.extent,clipExtent:ee.clipExtent,texture:N,width:K,height:b})}const{framebuffer:j,width:Z,height:U}=Fw(v,l,u,this.pixelRatio_,p,g,_,this.triangulation_,P,this.gutter_,I,this.renderEdges_,w),X=Z,B=U*T,ie=new e[0].dataType(X*B);v.bindFramebuffer(v.FRAMEBUFFER,j),v.readPixels(0,0,Z,U,v.RGBA,I,ie);let $=A*T;for(let te=0,J=ie.length;te<J;te+=T){const ee=(X-1-(te/B|0))*B+te%B;x[$]=ie[ee],x[$+1]=ie[ee+1],x[$+2]=ie[ee+2],x[$+3]=ie[ee+3],$+=y}}if(Ow(v),lm.push(v.canvas),t){const A=Je(l,u),P=new ImageData(x,l);A.putImageData(P,0,0),this.reprojData_=A.canvas}else this.reprojData_=x;this.reprojSize_=[Math.round(c),Math.round(d)],this.state=oe.LOADED,this.changed()}load(){if(this.state!==oe.IDLE&&this.state!==oe.ERROR)return;this.state=oe.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const i=t.getState();if(i!==oe.IDLE&&i!==oe.LOADING)return;e++;const o=Ie(t,Ee.CHANGE,()=>{const l=t.getState();(l==oe.LOADED||l==oe.ERROR||l==oe.EMPTY)&&(Ue(o),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(o)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t}){t.getState()==oe.IDLE&&t.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(Ue),this.sourcesListenerKeys_=null}}const zw='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class Gw extends yw{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[zw];const i=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",o=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:i,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:o,wrapX:e.wrapX,zDirection:e.zDirection})}}const ma={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class Uw extends Ha{constructor(e){e=e||{};const t=Object.assign({},e),i=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(ma.PRELOAD)}setPreload(e){this.set(ma.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(ma.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(ma.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}function rh(r,e,t,i){return`${r},${Zx(e,t,i)}`}function sh(r,e,t){if(!(t in r))return r[t]=new Set([e]),!0;const i=r[t],o=i.has(e);return o||i.add(e),!o}function bw(r,e,t){const i=r[t];return i?i.delete(e):!1}function am(r,e){const t=r.layerStatesArray[r.layerIndex];t.extent&&(e=In(e,Bi(t.extent,r.viewState.projection)));const i=t.layer.getRenderSource();if(!i.getWrapX()){const o=i.getTileGridForProjection(r.viewState.projection).getExtent();o&&(e=In(e,o))}return e}class Ww extends d_{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Xt(),this.tempTileRange_=new ad(0,0,0,0),this.tempTileCoord_=Ma(0,0,0);const i=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new Kx(i),this.maxStaleKeys=i*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,i,o){const l=this.tileCache_,c=this.getLayer().getSource(),d=rh(c.getKey(),e,t,i);let g;if(l.containsKey(d))g=l.get(d);else{if(g=c.getTile(e,t,i,o.pixelRatio,o.viewState.projection),!g)return null;l.set(d,g)}return g}getTile(e,t,i,o){const l=this.getOrCreateTile(e,t,i,o);return l||null}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),o=lt(t.pixelToCoordinateTransform,e.slice()),l=i.getExtent();if(l&&!Cs(l,o))return null;const u=t.viewState,c=i.getRenderSource(),d=c.getTileGridForProjection(u.projection),g=c.getTilePixelRatio(t.pixelRatio);for(let p=d.getZForResolution(u.resolution);p>=d.getMinZoom();--p){const _=d.getTileCoordForCoordAndZ(o,p),y=this.getTile(p,_[1],_[2],t);if(!y||y.getState()!==oe.LOADED)continue;const x=d.getOrigin(p),v=jt(d.getTileSize(p)),w=d.getResolution(p);let S;if(y instanceof E_||y instanceof Eh)S=y.getImage();else if(y instanceof vh){if(S=Pa(y.getData()),!S)continue}else continue;const I=Math.floor(g*((o[0]-x[0])/w-_[1]*v[0])),T=Math.floor(g*((x[1]-o[1])/w-_[2]*v[1])),O=Math.round(g*c.getGutterForProjection(u.projection));return this.getImageData(S,I+O,T+O)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const i=t.getRevision();return this.renderedRevision_?this.renderedRevision_!==i&&(this.renderedRevision_=i,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedRevision_=i,!0}enqueueTiles(e,t,i,o,l){const u=e.viewState,c=this.getLayer(),d=c.getRenderSource(),g=d.getTileGridForProjection(u.projection),p=Le(d);p in e.wantedTiles||(e.wantedTiles[p]={});const _=e.wantedTiles[p],y=c.getMapInternal(),x=Math.max(i-l,g.getMinZoom(),g.getZForResolution(Math.min(c.getMaxResolution(),y?y.getView().getResolutionForZoom(Math.max(c.getMinZoom(),0)):g.getResolution(0)),d.zDirection));for(let v=i;v>=x;--v){const w=g.getTileRangeForExtentAndZ(t,v,this.tempTileRange_),S=g.getResolution(v);for(let I=w.minX;I<=w.maxX;++I)for(let T=w.minY;T<=w.maxY;++T){const O=this.getTile(v,I,T,e);if(!O||!sh(o,O,v))continue;const P=O.getKey();if(_[P]=!0,O.getState()===oe.IDLE&&!e.tileQueue.isKeyQueued(P)){const j=Ma(v,I,T,this.tempTileCoord_);e.tileQueue.enqueue([O,p,g.getTileCoordCenter(j),S])}}}}findStaleTile_(e,t){const i=this.tileCache_,o=e[0],l=e[1],u=e[2],c=this.getStaleKeys();for(let d=0;d<c.length;++d){const g=rh(c[d],o,l,u);if(i.containsKey(g)){const p=i.get(g);if(p.getState()===oe.LOADED)return p.endTransition(Le(this)),sh(t,p,o),!0}}return!1}findAltTiles_(e,t,i,o){const l=e.getTileRangeForTileCoordAndZ(t,i,this.tempTileRange_);if(!l)return!1;let u=!0;const c=this.tileCache_,g=this.getLayer().getRenderSource().getKey();for(let p=l.minX;p<=l.maxX;++p)for(let _=l.minY;_<=l.maxY;++_){const y=rh(g,i,p,_);let x=!1;if(c.containsKey(y)){const v=c.get(y);v.getState()===oe.LOADED&&(sh(o,v,i),x=!0)}x||(u=!1)}return u}renderFrame(e,t){let i=!0;this.renderComplete=!0;const o=e.layerStatesArray[e.layerIndex],l=e.viewState,u=l.projection,c=l.resolution,d=l.center,g=e.pixelRatio,p=this.getLayer(),_=p.getSource(),y=_.getRevision(),x=_.getTileGridForProjection(u),v=x.getZForResolution(c,_.zDirection),w=x.getResolution(v),S=_.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==S&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=S):this.renderedSourceKey_=S;let I=e.extent;const T=_.getTilePixelRatio(g);this.prepareContainer(e,t);const O=this.context.canvas.width,A=this.context.canvas.height,P=o.extent&&Bi(o.extent);P&&(I=In(I,Bi(o.extent)));const j=w*O/2/T,Z=w*A/2/T,U=[d[0]-j,d[1]-Z,d[0]+j,d[1]+Z],X={};this.renderedTiles.length=0;const B=p.getPreload();if(e.nextExtent){const G=x.getZForResolution(l.nextResolution,_.zDirection),R=am(e,e.nextExtent);this.enqueueTiles(e,R,G,X,B)}const ie=am(e,I);if(this.enqueueTiles(e,ie,v,X,0),B>0&&setTimeout(()=>{this.enqueueTiles(e,ie,v-1,X,B-1)},0),!(v in X))return this.container;const $=Le(this),te=e.time;for(const G of X[v]){const R=G.getState();if((G instanceof Eh||G instanceof Nw)&&R===oe.EMPTY)continue;const N=G.tileCoord;if(R===oe.LOADED&&G.getAlpha($,te)===1){G.endTransition($);continue}if(R!==oe.IDLE&&(i=!1),R!==oe.ERROR&&(this.renderComplete=!1),this.findStaleTile_(N,X)){bw(X,G,v),e.animate=!0;continue}if(this.findAltTiles_(x,N,v+1,X))continue;const ue=x.getMinZoom();for(let he=v-1;he>=ue&&!this.findAltTiles_(x,N,he,X);--he);}const J=w/c*g/T,ee=this.getRenderContext(e);ci(this.tempTransform,O/2,A/2,J,J,0,-O/2,-A/2),o.extent&&this.clipUnrotated(ee,e,P),_.getInterpolate()||(ee.imageSmoothingEnabled=!1),this.preRender(ee,e);const ne=Object.keys(X).map(Number);ne.sort(Vi);let K;const b=[],q=[];for(let G=ne.length-1;G>=0;--G){const R=ne[G],N=_.getTilePixelSize(R,g,u),z=x.getResolution(R)/w,ue=N[0]*z*J,he=N[1]*z*J,me=x.getTileCoordForCoordAndZ(hi(U),R),ve=x.getTileCoordExtent(me),Ce=lt(this.tempTransform,[T*(ve[0]-U[0])/w,T*(U[3]-ve[3])/w]),Ne=T*_.getGutterForProjection(u);for(const St of X[R]){if(St.getState()!==oe.LOADED)continue;const Mn=St.tileCoord,fn=me[1]-Mn[1],Bn=Math.round(Ce[0]-(fn-1)*ue),Pn=me[2]-Mn[2],$t=Math.round(Ce[1]-(Pn-1)*he),gt=Math.round(Ce[0]-fn*ue),Yt=Math.round(Ce[1]-Pn*he),kn=Bn-gt,qt=$t-Yt,Qt=ne.length===1;let gn=!1;K=[gt,Yt,gt+kn,Yt,gt+kn,Yt+qt,gt,Yt+qt];for(let Yn=0,Vn=b.length;Yn<Vn;++Yn)if(!Qt&&R<q[Yn]){const Ze=b[Yn];bt([gt,Yt,gt+kn,Yt+qt],[Ze[0],Ze[3],Ze[4],Ze[7]])&&(gn||(ee.save(),gn=!0),ee.beginPath(),ee.moveTo(K[0],K[1]),ee.lineTo(K[2],K[3]),ee.lineTo(K[4],K[5]),ee.lineTo(K[6],K[7]),ee.moveTo(Ze[6],Ze[7]),ee.lineTo(Ze[4],Ze[5]),ee.lineTo(Ze[2],Ze[3]),ee.lineTo(Ze[0],Ze[1]),ee.clip())}b.push(K),q.push(R),this.drawTile(St,e,gt,Yt,kn,qt,Ne,Qt),gn&&ee.restore(),this.renderedTiles.unshift(St),this.updateUsedTiles(e.usedTiles,_,St)}}if(this.renderedRevision=y,this.renderedResolution=w,this.extentChanged=!this.renderedExtent_||!Lo(this.renderedExtent_,U),this.renderedExtent_=U,this.renderedPixelRatio=g,this.postRender(this.context,e),o.extent&&ee.restore(),ee.imageSmoothingEnabled=!0,this.renderComplete){const G=(R,N)=>{const re=Le(_),z=N.wantedTiles[re],ue=z?Object.keys(z).length:0;this.updateCacheSize(ue),this.tileCache_.expireCache()};e.postRenderFunctions.push(G)}return!this.renderComplete&&!i&&(e.animate=!0),this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,i,o,l,u,c,d){let g;if(e instanceof vh){if(g=Pa(e.getData()),!g)throw new Error("Rendering array data is not yet supported")}else g=this.getTileImage(e);if(!g)return;const p=this.getRenderContext(t),_=Le(this),y=t.layerStatesArray[t.layerIndex],x=y.opacity*(d?e.getAlpha(_,t.time):1),v=x!==p.globalAlpha;v&&(p.save(),p.globalAlpha=x),p.drawImage(g,c,c,g.width-2*c,g.height-2*c,i,o,l,u),v&&p.restore(),x!==y.opacity?t.animate=!0:d&&e.endTransition(_)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,i){const o=Le(t);o in e||(e[o]={}),e[o][i.getKey()]=!0}}class jw extends Uw{constructor(e){super(e)}createRenderer(){return new Ww(this,{cacheSize:this.getCacheSize()})}}const Xw="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23000000'%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20id='pin'%20data-name='Flat%20Color'%20xmlns='http://www.w3.org/2000/svg'%20class='icon%20flat-color'%3e%3cpath%20id='secondary'%20d='M12,22a1,1,0,0,1-1-1V9a1,1,0,0,1,2,0V21A1,1,0,0,1,12,22Z'%20style='fill:%20rgb(44,%20169,%20188);'%3e%3c/path%3e%3ccircle%20id='primary'%20cx='12'%20cy='6'%20r='4'%20style='fill:%20rgb(0,%200,%200);'%3e%3c/circle%3e%3c/svg%3e",Bw=Am([-79.41636,43.76681]),Yw=({features:r,loading:e})=>{const t=un.useRef(null),i=un.useRef(null);return un.useEffect(()=>{if(!i.current&&t.current){const o=new Yx({target:t.current,view:new Un({center:Bw,zoom:11}),layers:[new jw({source:new Gw})]});i.current=o,o.on("click",l=>{o.forEachFeatureAtPixel(l.pixel,u=>{const c=u.get("features");c!=null&&c.length&&console.log("Clicked the cluster",c)})})}return()=>{var o;(o=i.current)==null||o.setTarget()}},[]),un.useEffect(()=>{if(!e&&r&&i.current){const o=new ui({image:new Vo({anchor:[.5,1],src:Xw,width:30})}),l=r.map(g=>{const p=new Xo(Am([g.attributes.LONG_WGS84,g.attributes.LAT_WGS84])),_=new Fa({geometry:p,name:g.attributes.EVENT_UNIQUE_ID});return _.setStyle(o),_}),u=new y_({features:l}),c=new Ew({source:u,distance:40}),d=new ax({source:c,style:g=>{const p=g.get("features").length;let _=o;return p>1&&(_=new ui({image:new Yo({radius:10,fill:new Sr({color:"rgb(70, 70, 255)"}),stroke:new Bo({color:"white",width:2})}),text:new Za({text:p.toString(),fill:new Sr({color:"white"})})})),_}});i.current.addLayer(d)}},[r,e]),{mapRef:t,mapInstanceRef:i}},k_=un.createContext(void 0);function Vw({children:r}){const[e,t]=un.useState([]);return ht.jsx(k_.Provider,{value:{crimes:e,setCrimes:t},children:r})}const hd=()=>{const r=un.useContext(k_);if(!r)throw new Error("Crime context provider is missing.");return r};function D_(r){return Object.keys(r).some(e=>{let t=r[e];if(!t)return!1;switch(t&&t.toParam&&(t=t.toParam()),t.constructor.name){case"Array":return!1;case"Object":return!1;case"Date":return!1;case"Function":return!1;case"Boolean":return!1;case"String":return!1;case"Number":return!1;default:return!0}})}function O_(r){const e={};return Object.keys(r).forEach(t=>{var i,o;let l=r[t];if(l&&l.toParam&&(l=l.toParam()),!l&&l!==0&&typeof l!="boolean"&&typeof l!="string")return;const u=l.constructor.name;let c;switch(u){case"Array":const d=(o=(i=l[0])===null||i===void 0?void 0:i.constructor)===null||o===void 0?void 0:o.name;c=d==="Array"?l:d==="Object"?JSON.stringify(l):l.join(",");break;case"Object":c=JSON.stringify(l);break;case"Date":c=l.valueOf();break;case"Function":c=null;break;case"Boolean":c=l+"";break;default:c=l;break}(c||c===0||typeof c=="string"||Array.isArray(c))&&(e[t]=c)}),e}function F_(r,e){return Array.isArray(e)&&e[0]&&Array.isArray(e[0])?e.map(t=>F_(r,t)).join("&"):encodeURIComponent(r)+"="+encodeURIComponent(e)}function Sh(r){const e=O_(r);return Object.keys(e).map(t=>F_(t,e[t])).join("&")}const Kw=globalThis.FormData;function Zw(r,e){const t=D_(r)||e,i=O_(r);if(t){const o=new Kw;return Object.keys(i).forEach(l=>{if(typeof Blob<"u"&&i[l]instanceof Blob){const u=i.fileName||i[l].name||l;o.append(l,i[l],u)}else o.append(l,i[l])}),o}else return Sh(r)}class vs extends Error{constructor(e,t,i,o,l){super(e);const u=new.target.prototype;Object.setPrototypeOf(this,u),e=e||"UNKNOWN_ERROR",t=t||"UNKNOWN_ERROR_CODE",this.name="ArcGISRequestError",this.message=t==="UNKNOWN_ERROR_CODE"?e:`${t}: ${e}`,this.originalMessage=e,this.code=t,this.response=i,this.url=o,this.options=l}}function Hw(r){console&&console.warn&&console.warn.apply(console,[r])}function $w(){return Promise.resolve({fetch:globalThis.fetch,Headers:globalThis.Headers,Response:globalThis.Response,Request:globalThis.Request})}const qw="@esri/arcgis-rest-js";function Qw(){return globalThis.DEFAULT_ARCGIS_REQUEST_OPTIONS||{httpMethod:"POST",params:{f:"json"}}}class N_ extends vs{constructor(e="AUTHENTICATION_ERROR",t="AUTHENTICATION_ERROR_CODE",i,o,l){super(e,t,i,o,l),this.name="ArcGISAuthError",this.message=t==="AUTHENTICATION_ERROR_CODE"?e:`${t}: ${e}`;const u=new.target.prototype;Object.setPrototypeOf(this,u)}retry(e,t=1){let i=0;const o=(l,u)=>{i=i+1,e(this.url,this.options).then(c=>{const d=Object.assign(Object.assign({},this.options),{authentication:c});return z_(this.url,d)}).then(c=>{l(c)}).catch(c=>{c.name==="ArcGISAuthError"&&i<t?o(l,u):c.name===this.name&&c.message===this.message&&i>=t?u(this):u(c)})};return new Promise((l,u)=>{o(l,u)})}}function Jw(r,e,t,i,o){if(r.code>=400){const{message:l,code:u}=r;throw new vs(l,u,r,e,i)}if(r.error){const{message:l,code:u,messageCode:c}=r.error,d=c||u||"UNKNOWN_ERROR_CODE";throw u===498||u===499?o||new N_(l,d,r,e,i):new vs(l,d,r,e,i)}if(r.status==="failed"||r.status==="failure"){let l,u="UNKNOWN_ERROR_CODE";try{l=JSON.parse(r.statusMessage).message,u=JSON.parse(r.statusMessage).code}catch{l=r.statusMessage||r.message}throw new vs(l,u,r,e,i)}return r}function z_(r,e){const t=Qw(),i=Object.assign(Object.assign(Object.assign({httpMethod:"POST"},t),e),{params:Object.assign(Object.assign({},t.params),e.params),headers:Object.assign(Object.assign({},t.headers),e.headers)}),{httpMethod:o,rawResponse:l}=i,u=Object.assign({f:"json"},i.params);let c=null;const d={method:o,signal:i.signal,credentials:i.credentials||"same-origin"};i.headers&&i.headers["X-Esri-Auth-Client-Id"]&&r.indexOf("/oauth2/platformSelf")>-1&&(d.credentials="include");let g;if(typeof i.authentication=="string"){const _=i.authentication;g={portal:"https://www.arcgis.com/sharing/rest",getToken:()=>Promise.resolve(_)},!i.authentication.startsWith("AAPK")&&!i.authentication.startsWith("AATK")&&!i.suppressWarnings&&!globalThis.ARCGIS_REST_JS_SUPPRESS_TOKEN_WARNING&&(Hw("Using an oAuth 2.0 access token directly in the token option is discouraged. Consider using ArcGISIdentityManager or Application session. See https://esriurl.com/arcgis-rest-js-direct-token-warning for more information."),globalThis.ARCGIS_REST_JS_SUPPRESS_TOKEN_WARNING=!0)}else g=i.authentication;const p=r;return(g?g.getToken(r).catch(_=>(_.url=r,_.options=i,c=_,Promise.resolve(""))):Promise.resolve("")).then(_=>{_.length&&(u.token=_),g&&g.getDomainCredentials&&(d.credentials=g.getDomainCredentials(r));const y={};if(d.method==="GET"){u.token&&i.hideToken&&typeof window>"u"&&(y["X-Esri-Authorization"]=`Bearer ${u.token}`,delete u.token);const w=Sh(u)===""?r:r+"?"+Sh(u);i.maxUrlLength&&w.length>i.maxUrlLength||u.token&&i.hideToken?(d.method="POST",_.length&&i.hideToken&&(u.token=_,delete y["X-Esri-Authorization"])):r=w}const x=new RegExp("/items/.+/updateResources").test(r);return d.method==="POST"&&(d.body=Zw(u,x)),d.headers=Object.assign(Object.assign({},y),i.headers),(typeof window>"u"||window&&typeof window.document>"u")&&!d.headers.referer&&(d.headers.referer=qw),!D_(u)&&!x&&(d.headers["Content-Type"]="application/x-www-form-urlencoded"),globalThis.fetch?globalThis.fetch(r,d):$w().then(({fetch:v})=>v(r,d))}).then(_=>{if(!_.ok)return _.json().then(y=>{const{status:x,statusText:v}=_,{message:w,details:S}=y.error,I=`${w}. ${S?S.join(" "):""}`.trim();throw new vs(I,`HTTP ${x} ${v}`,y,r,i)}).catch(y=>{if(y.name==="ArcGISRequestError")throw y;const{status:x,statusText:v}=_;throw new vs(v,`HTTP ${x}`,_,r,i)});if(l)return _;switch(u.f){case"json":return _.json();case"geojson":return _.json();case"html":return _.text();case"text":return _.text();default:return _.blob()}}).then(_=>{if((u.f==="json"||u.f==="geojson")&&!l){const y=Jw(_,p,u,i,c);if(c){const x=r.toLowerCase().split(/\/rest(\/admin)?\/services\//)[0];i.authentication.federatedServers[x]={token:[],expires:new Date(Date.now()+86400*1e3)},c=null}return y}else return _})}function eS(r,e={params:{f:"json"}}){return z_(r,e).catch(t=>t instanceof N_&&e.authentication&&typeof e.authentication!="string"&&e.authentication.canRefresh&&e.authentication.refreshCredentials?t.retry(()=>e.authentication.refreshCredentials(),1):Promise.reject(t))}function tS(r,e,t){const i=["params","httpMethod","rawResponse","authentication","portal","fetch","maxUrlLength","headers"],o=Object.assign(Object.assign({params:{}},t),r);return o.params=e.reduce((l,u)=>((r[u]||typeof r[u]=="boolean"||typeof r[u]=="number"&&r[u]===0)&&(l[u]=r[u]),l),o.params),i.reduce((l,u)=>(o[u]&&(l[u]=o[u]),l),{})}function nS(r){return typeof r!="string"||(r=r.trim(),r[r.length-1]==="/"&&(r=r.slice(0,-1))),r}function iS(r){const e=tS(r,["where","objectIds","relationParam","time","distance","units","outFields","geometry","geometryType","spatialRel","returnGeometry","maxAllowableOffset","geometryPrecision","inSR","outSR","gdbVersion","returnDistinctValues","returnIdsOnly","returnCountOnly","returnExtentOnly","orderByFields","groupByFieldsForStatistics","outStatistics","returnZ","returnM","multipatchOption","resultOffset","resultRecordCount","quantizationParameters","returnCentroid","resultType","historicMoment","returnTrueCurves","sqlFormat","returnExceededLimitFeatures","f"],{httpMethod:"GET",params:Object.assign({where:"1=1",outFields:"*"},r.params)});return eS(`${nS(r.url)}/query`,e)}const rS="https://services.arcgis.com/S9th0jAJ7bqgIRjw/arcgis/rest/services/Major_Crime_Indicators_Open_Data/FeatureServer/0",sS=r=>Object.entries(r).filter(([e,t])=>!!t).map(([e,t])=>`${e} = '${t}'`).join(" AND "),oS=r=>{const e=sS(r),{setCrimes:t}=hd(),[i,o]=un.useState({resultOffset:0,loading:!0}),l=un.useCallback(async()=>{if(!i.loading)return;const u=d=>{d&&(t(g=>[...g,...d.features]),o(g=>({resultOffset:g.resultOffset+d.features.length,loading:d.exceededTransferLimit})))},c=await iS({url:rS,where:e,resultOffset:i.resultOffset});u(c)},[e,i.loading,i.resultOffset,o,t]);return un.useEffect(()=>{l()},[l]),{loading:i.loading}};function lS({queryFilter:r}){const{crimes:e}=hd(),{loading:t}=oS(r),{mapRef:i}=Yw({features:e,loading:t});return ht.jsxs("div",{style:{position:"relative"},children:[ht.jsx("div",{id:"openLayersMap",style:{height:"100%"},className:"map",ref:i}),ht.jsx(jy,{show:t})]})}function aS(){const{crimes:r}=hd(),e=new Set(r.map(c=>c.attributes.MCI_CATEGORY)),t=r.filter(c=>c.attributes.MCI_CATEGORY==="Assault").length,i=r.filter(c=>c.attributes.MCI_CATEGORY==="Break and Enter").length,o=r.filter(c=>c.attributes.MCI_CATEGORY==="Auto Theft").length,l=r.filter(c=>c.attributes.MCI_CATEGORY==="Robbery").length,u=r.filter(c=>c.attributes.MCI_CATEGORY==="Theft Over").length;return console.log(e,r,{assaults:t,breaksAndEnters:i,autoThefts:o,robberies:l,theftsOver:u}),ht.jsx("div",{})}function uS(){const[r]=un.useState({OCC_YEAR:2023});return ht.jsxs("div",{children:[ht.jsxs("div",{className:"placeholder-glow position-relative",children:[ht.jsx("h2",{children:"crime_scan"}),ht.jsxs("p",{children:[ht.jsx("span",{children:"Currently displays all crimes commited in Toronto in "}),r==null?void 0:r.OCC_YEAR]})]}),ht.jsx(lS,{queryFilter:r}),ht.jsx(aS,{}),ht.jsx("footer",{})]})}Uy.createRoot(document.getElementById("root")).render(ra.createElement(ra.StrictMode,null,ra.createElement(Vw,null,ra.createElement(uS,null))));
